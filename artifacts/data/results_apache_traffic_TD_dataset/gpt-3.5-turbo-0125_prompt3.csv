id,text,Label,Model_classification
0," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
the deprecated traffic ops api version  exists

 new behavior
the deprecated traffic ops api version  no longer exists

",TD,TD
1," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops database

 current behavior
there are a bunch of migrations that were released with  and still exist

 new behavior
migrations that were in  are squashed into the createtablessql script

",TD,Not_TD
2," this improvement request usability performance tech debt etc affects these traffic control components
 traffic monitor

 current behavior
as of  tm will no longer overwrite its monitoringjson snapshot data with corresponding crconfig snapshot data if the monitoringjson contains ip addresses for the tms meaning it now has parity with the crconfig data however it still needs the crconfig in order to filter out delivery services from monitoringjson which arent present in the crconfig that was fixed in  in that the monitoringjson no longer contains delivery services from other cdns to which the tm doesnt belong

 new behavior
once atc  is released with the changes from  we should be able to remove this fallback behavior from tm and possibly its reliance on the crconfig altogether in the next majorminor release that is because monitoringjson snapshots as of to  will contain all the necessary data and will no longer need to rely on the crconfig snapshot
",TD,TD
3,"

 this improvement request usability performance tech debt etc affects these traffic control components

 traffic clients go
 traffic ops
 documentation

 current behavior


the currently logged in user has the ability to edit various fields via a put request to the usercurrent endpoint however that request must be wrapped in a user json object such that the body looks something like
json

  user 
      
  



this object appears to be unnecessary but adds a gotcha of sorts to the put requests even resulting in bug submissions such as  

 new behavior

removing this wrapper will help reduce unnecessary code reduce and add clarity to documentation and help with maintainability going forward

go
 libgotcusersgo

 currentuserupdaterequest differs from a regular userusercurrent in that many of its fields are
 parsed but not unmarshaled this allows a handler to distinguish between null and
 undefined values
type currentuserupdaterequest struct 
	 user for whatever reason contains all of the actual data
	user currentuserupdaterequestuser jsonuser  this is the wrapper



additionally the documentation for the api endpoint will need to be updated to remove the reference to the user wrapper object ",TD,TD
4," this tech debt affects these traffic control components
none

 current behavior
there are a bunch of dockerfiles sitting under infrastructuredocker not counting the ones in infrastructuredockerbuild that are used by pkg that have no current possible use and should be removed to avoid having eg usages old api versions in the codebase that nobody wants to fix because nobody actually uses those the dockerfiles in question were meant to represent a minimal atc system for use in development and testing i arrogantly assert that cdninabox at infrastructurecdninabox and the developer environment at dev have rendered these dockerfiles obsolete

according to the changelog traffic ops api version  was removed on  those dockerfiles use api version  until  is merged that means that for roughly  months those docker images that relied on it in infrastructuredocker have been broken they are currently broken in latest supported release of atc which evidently nobody thought was worth a 

so it appears truly nobody has been using these for quite some time

 new behavior
get rid of em

",TD,TD
5," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops database

 current behavior
there are a bunch of migrations that were released with  and still exist

 new behavior
migrations that were in  are squashed into the createtablessql script

",TD,Not_TD
6," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
the type of the response properties of response bodies from post requests to profileparameters in all api versions are odd if the array request format is used and multiple associations between profiles and parameters are created then the response will be
json

	alerts 
		
			text profileparameters were created
			level success
		
	
	response null



when creating a single association the response looks like

json

	alerts 
		
			text profileparameter was created
			level success
		
	
	response 
		lastupdated null
		profile null
		profileid 
		parameter null
		parameterid 
	



where presumably lastupdated is meant to be the time of the associations creation profile is probably meant to be the name of the profile identified by profileid and parameter could possibly be the name of the parameter identified by parameterid although thats not enough information to identify a parameter however all of these properties are always null

get requests return different representations of the associations in the form
json

	response 
		
			lastupdated  
			profile global
			parameter 
		
        



so profiles are identified by name and never id  however the filtering query parameters offered by that endpoint do not allow filtering by profile name only id parameters on the other hand are only presented as ids but use the property name parameter whereas the post response uses the property name parameterid to represent the same information  and the query parameter offered by the endpoint to filter by parameter id is likewise parameterid note that in get requests lastupdated is properly never null

 new behavior
the representation used for an object should not vary so wildly between requests and responses and between request methods of the same endpoint a single representation format must be chosen and used for all representations

according to the api guidelines the response should be a representation of the created objects therefore when something is created null is always an unacceptable response

likewise null is not a valid datetime value so it is always unacceptable as a value for lastupdated and similarly there is no point in always returning null for pieces of information that are redundant other identifiers exist useless fields andor the information is knowable at the time of the request which it is in the case of post requests as described above

finally though the  also state

 relationships should not be represented through the api as objects in their own right

so this endpoint really should not exist at all which would be a totally acceptable solution to this issue even if such an endpoint is desirable i would hesitate to say that being able to make assignments of more than one distinct parameter to more than one distinct profile is an unintuitive ux at best and is typically better accomplished using profilesidparameters andor parametersidprofiles instead in the case of bootstrapping an environment eg for testing the profiles and parameters must be created first anyway so using profile importing would be much easier and faster than using this method furthermore for manipulating associations between parameters and profiles we have

 parameterprofile
 profileparameter
 profileparameters
 profileparametersprofile idparameter id
 profilesidparameters
 profilesimport kinda
 profilesnamenameparameters

and i refuse to believe that all of these are necessary to accomplish whatever obscure task a user requires

this bug may be a regression but at this point im not going to go back to perl days to find out",TD,TD
7,"everywhere we use raw strings that can be enums we should convert them
for example in cachegroupqueueupdatego on line  queue and dequeue can be converted to string enums",TD,TD
8,"usetenancy is now on by default   we can simplify quite a bit of code including sql by no longer checking this parameter

note  the perl code should not be touched except where it gets the value of that parameter always assume   only go code should be cleaned up",TD,TD
9,"
error   checking local user password algorithm defined is not scrypt

this error message is continually spewing in the logs  seems like this should be called when there is a true error",TD,Not_TD
10,"in libgotc  there exist nullable versions of most traffic ops structs   there are inconsistencies between these structs that should be addressed   ive written a test that should be run with unit tests to ensure that these are correct    ill create a pr shortly with that test with instructions on how to run it

the following is the output from the test showing these inconsistencies

go test tags nullable
 fail testnullstructs 
     tcasnlastupdated string and tcasnnullablelastupdated tctimenomod have mismatched types
      has  fields but  has 
     field deepcachingtype found on  but not 
     field dnsbypasscname found on  but not 
       and  int have mismatched types
     field trresponseheaders found on  but not 
     field dnsbypasscname found on  but not 
     field geolimitcountries found on  but not 
     field geolimitredirecturl found on  but not 
     field originshield found on  but not 
     field sslkeyversion found on  but not 
     tcprofile has  fields but tcprofilenullable has 
     field parameter found on tcprofile but not tcprofilenullable
     tcsteeringtargetdeliveryserviceid int and tcsteeringtargetnullabledeliveryserviceid  have mismatched types
     tcsteeringtargettargetid int and tcsteeringtargetnullabletargetid  have mismatched types
     tcsteeringtargetvalue int and tcsteeringtargetnullablevalue  have mismatched types
fail
exit status 
fail	githubcomapachetrafficcontrollibgotc	

",TD,TD
11,groverfc is a generically useful library that implements http rfcs it should be moved to lib for use by other apps several of our other go apps already define their own duplicate constants or have additional rfc constants that should be moved to rfc,TD,TD
12,a number of our to api tests have logdebuglntest passed  at the end these serve the same purpose as go test v and should be removed eg ,TD,TD
13,right now the to go packages which are api endpoints are mixed in the root directory with all the other packages tocookie plugin riaksvc etc and its hard to see which are which the api endpoint packages should be moved to api to make the code easier to understand and work with,TD,TD
14,"the to api defines post and put to return the object for most endpoints but the cruder framework doesnt it just returns an empty success response

i dont think itll be that difficult to make the cruder framework do this by adding it to the genericcreate and genericupdate funcs to expect an object to be returned from sql and populate it via the existing sqlx tags and add that to each query via returning

this might ought to be tagged bug its a bug that the api is missing this from  where it existed before",TD,TD
15,"traffic ops uses goose for database migration goose is unmaintained and has been for years we need to move to a maintained db migration tool for security bug fixes ease of use etc

the most difficult part of this will be removing the  go migration we have which wont be supported by a generic sql migration tool it will need to be converted to real sql alternatively if we squash the migrations into the default seeds in a release including that migration that may solve the problem or it may be equally difficult to squash",TD,TD
16,"the traffic ops client package is trafficopsclient this isnt a good package name because it doesnt make sense in general context for example when traffic monitor imports the package clientnewsession doesnt convey any information

i suggest renaming the package toclient thats what most users will alias it to anyway and it follows the go idioms for package names its short and conveys enough information in the context of its usage for most users to immediately know what it is

likewise session newsession and loginwithagent arent idiomatic names 

i suggest renaming session to toclient and loginwithagent to new and removing newsession or making it private",TD,TD
17,"a number of to client funcs have been deprecated since  and should be removed from master 

they can be found by searching for  deprecated eg ",TD,Not_TD
18,"many to client objects are missing nullable objects and missing returning reqinf

we need to go through and add all of these and mark functions missing either as  deprecated

nullable objects are necessary to distinguish missing from empty values and reqinf is necessary for clients to get the ip which is important to users if theres an error or unexpected behavior and to is behind a gslb",TD,TD
19,"the riaksvcwithcluster func was useful for safely cleaning up the cluster but its since been changed to be a global variable so withcluster is now unnecessary further because it requires a lambda and extra indentation its harder to read and understand it should be removed

see ",TD,TD
20,"traffic ops golang riaksvc is currently hardcoded there are a very small number of functions we do on riak 

by moving riak to a plugin tc users will be able to use any secure database making it easy to move away from riak if it doesnt suit their use case 

it will also allow us to provide multiple secure db implementations in tc itself 

it will also allow us to implement a trivial file or memory db so users developing and testing tc could run without the additional work of setting up riak making developing debugging and trying out tc easier

i suggest implementing the plugin hook as a hook which runs on initialization and plugins return a securedb interface which implements the necessary functions to load and store keys",TD,TD
21,"currently the to api tests dont support riak this makes it impossible to write integration tests for riak endpoints 

we need to add riak support so we can test the riak endpoints

this may be as simple as adding a few fixtures and configs or it may be rather difficult to begin with someone needs to investigate or prototype it to find out how much work its going to be",TD,TD
22,the tcapierrortype is a legacy artifact that needs removed to golang has standardized around the usererr syserr errcode idiom which is more powerful and flexible and easier to work with no type casting the few remaining functions in togo using tcapierrortype need changed to use the usererr syserr errcode idiom and the symbol removed,TD,TD
23,"currently the to golang http dispatchrouter uses a regex for routes this has become a legacy artifact regex routing isnt necessary and requires duplicating the same constructs json and is dangerous and easy to get wrong

the to go router should be changed to automatically anchor  and  and automatically allow and strip json and be a constant string only interpolating path parameters

this will make it easier to work with easier to read and much safer and harder for routes to get wrong",TD,TD
24,"the tm api has docs 

but theyre incomplete and not in a very visible place

we should document all the endpoints the endpoints are all linked from the monitors http page they just need added to the docs

we should also probably put the monitor api docs in a more visible place maybe create a unified root apis doc page with links to the apis of every component",TD,TD
25,"the tr api has docs 

but theyre incomplete and not in a very visible place

we should add explanations and examples of what they return

we should also probably put the router api docs in a more visible place maybe create a unified root apis doc page with links to the apis of every component",TD,TD
26,"we should create a native language client for traffic monitor in go to match the canonical to client

shouldnt be too much work as the tm api doesnt have auth",TD,Not_TD
27,"we should create a native language client for traffic router in go to match the canonical to client

shouldnt be too much work as the tr api doesnt have auth",TD,Not_TD
28,"because our server table is overloaded with caches and infrastructure servers tp to tm etc and the cdn attribute is required for all servers the all cdn was introduced to help satisfy this requirement for servers where a cdn doesnt make sense infrastructure servers

imo either the server table should be broken into  tables  caches and servers or maybe its as simple as making cdn nullable for certain server types not sure of the solution",TD,TD
29,a number of our to api tests have logdebuglntest passed  at the end these serve the same purpose as go test v and should be removed eg ,TD,Not_TD
30,"all go components except grove and grovetccfg are currently compiled with go  in the docker build system

later versions have changes that drastically improve performance for  tls requests using rsa certificates  see ",TD,Not_TD
31,"if the cert or key file specified in cdnconf is unreadable  trafficopsgolang exits with a cryptic error message  

info   listening on 
error   stopping server open  no such file or directory
",TD,Not_TD
32,"if the cert or key file specified in cdnconf is unreadable  trafficopsgolang exits with a cryptic error message  

info   listening on 
error   stopping server open  no such file or directory
",TD,TD
33,"so we went through all this debate about adding the massive sqlx library for its one structscan function to avoid things like


	resultrows err  txqueryinsertquery dsactive dsanonymousblockingenabled dscacheurl dsccrdnsttl dscdnid dscheckpath dsconsistenthashregex deepcachingtype dsdisplayname dsdnsbypasscname dsdnsbypassip  dsdnsbypassttl dsdscp dsedgeheaderrewrite dsgeolimitredirecturl dsgeolimit dsgeolimitcountries dsgeoprovider dsglobalmaxmbps dsglobalmaxtps dsfqpacingrate dshttpbypassfqdn dsinfourl dsinitialdispersion  dslogsenabled dslongdesc   dsmaxdnsanswers dsmidheaderrewrite dsmisslat dsmisslong dsmultisiteorigin dsoriginshield dsprofileid dsprotocol dsqstringignore dsrangerequesthandling dsregexremap dsregionalgeoblocking dsremaptext dsroutingname dssigningalgorithm dssslkeyversion dstenantid dstrrequestheaders dstrresponseheaders dstypeid dsxmlid


and were not even avoiding them the worse ones are still using the standard library



because we need fields not in the struct and sqlx isnt capable of that note the deepcachingtype in the above query

but this is possible and not even that difficult all we have to do is create a new struct which anonymously embeds the real struct like so


type createds struct 
  tcdeliveryservicenullable
  deepcachingtype string

createds  createdsdeliveryservicenullable ds deepcachingtype deepcachingtype
resultrows err  txstructscaninsertquery createds
ds  updatedsdeliveryservicenullable


as well as updating insertquery to use sqlx activeactive syntax rather than standard sql 

in this particular case its also possible to solve the problem by making tcdeliveryservicedeepcachingtype implement sqlvaluer and sqlscanner but the above solution works universally

in fact it would probably take less time to do than it took me to make this issue",TD,TD
34,"usetenancy is now on by default   we can simplify quite a bit of code including sql by no longer checking this parameter

note  the perl code should not be touched except where it gets the value of that parameter always assume   only go code should be cleaned up",TD,TD
35,"the traffic ops parentconfig generation has been transliterated from perl to go


its been transliterated as closely as possible for safety its a very complex set of logic and easy to get wrong and getting it wrong can cause critical errors and potentially break traffic or even the entire cdn

the code needs refactored there is much duplication very long functions querying too much data and other issues

but we dont want to completely refactor it at the same time as transliterating it to reduce the risk of introducing errors

so at some point after  has been running without issue we need to go back and improve it

when i transliterated it i added todo comments for all the issues i immediately saw those should be the starting point but there are almost certainly other code sanity improvements that need to be made",TD,TD
36,"
error   checking local user password algorithm defined is not scrypt

this error message is continually spewing in the logs  seems like this should be called when there is a true error",TD,Not_TD
37,"we should deprecate steering delivery services in favor of a singular clientsteering delivery service type for the most part a clientsteering delivery service can provide the same set of functionality as a steering delivery service there are only a few things that apply to steering and not clientsteering
 the xtcsteeringoption header can be used by a client to request a specific steering target in a steering delivery service
 delivery service steeringregexps aka steering filters only apply to steering
 the json response format when using the query string formatjson varies slightly between steering and clientsteering

steering

location 

clientsteering

locations


that said if no clients of a steering delivery service use the above  features they should be able to smoothly transition to an equivalent clientsteering delivery service instead they will still get  by default but with clientsteering they will also receive the full result list of all targets which they could choose to ignore if the steering clients only care about the  ignore the response body and dont use formatjson then their experience shouldnt change between a steering delivery service and an equivalent clientsteering delivery service

however if the steering client depends on the specific json format provided via formatjson then they will need to be fixed to work with the clientsteering json format other than that we could add functionality to clientsteering to satisfy points  and  for steering clients that use those features still

i think a tentative plan would look like this
 add functionality for points  and  to clientsteering possibly if the community still relies on that obscure functionality
 deprecate steering in major release n  no new delivery services of type steering can be created but existing steering delivery services will continue to be supported delivery services of type clientsteering can be created and existing steering delivery services should be updated to use clientsteering instead
 in major release  remove support for steeringtype delivery services this would include removing the steering type from traffic ops removing nonclientsteering support in the crconfig and removing nonclientsteering support in traffic router by this point release  could probably include a db migration that automatically sets any remaining steering delivery services to clientsteering because everyone should have manually transitioned to clientsteering before release  anyways

relevant mailing list thread ",TD,TD
38,"when the to ui was formally decommissioned the bulk of the ui routes were disabled



the following ui routes are still enabled


  gendbdump  get db dump
rgetdbdumpover authenticated   notldap   to gendbdumpdbdump namespace  namespace 

  health  parameters for rascal
rgethealthto healthhealthprofile namespace  namespace 
rgethealthfullto healthhealthfull namespace  namespace 
rgethealthcdnnameto healthrascalconfig namespace  namespace 

  options
roptionsto cdnoptions namespace  namespace 
roptionsto cdnoptions namespace  namespace 

  ort
 authenticated   notldap   to  namespace  namespace 
rrouteorthostnamepackagesviagetover authenticated   notldap   to ortgetpackageversions namespace  namespace 
rrouteorthostnamechkconfigviagetover authenticated   notldap   to ortgetchkconfig namespace  namespace 

 select available profile ds or server
rgetavailableprofileparamidover authenticated   notldap   to profileavailableprofile namespace  namespace 
rrouteprofileidexportviagetover authenticated   notldap   to profileexport namespace  namespace 

 flashandclose is a helper for the trafficopsgolang migration to allow go handlers to intercept gui routes do their work then redirect to this to perform the gui operation
rgettoolsflashandclosemsgover authenticated   notldap   to toolsflashandclose namespace  namespace 

  topology  ccr config rewrote in json
rroutegenfilesmodebycdnnamecdnnamecrconfigviagetover authenticated   notldap   to topologyccrconfig namespace  namespace 
rgetcrconfigsnapshotscdnnamecrconfigjsonover authenticated   notldap   to snapshotgetcdnsnapshot namespace  namespace 

  update bit  process updates  legacy stuff
rgetupdatehostnameover authenticated   notldap   to serverreadupdate namespace  namespace 
rpostupdatehostnameover authenticated   notldap   to serverpostupdate namespace  namespace 
rpostpostupdatequeueidover authenticated   notldap   to serverpostupdatequeue namespace  namespace 
rpostpostupdatequeuecdncachegroupover authenticated   notldap   to serverpostupdatequeue namespace  namespace 

  utils
rgetutilsclosefancyboxover authenticated   notldap   to utilsclosefancybox namespace  namespace 

 deprecated  see apiversionservers and 
 duplicate route
rgethealthdataserverover authenticated   notldap   to serverindexresponse namespace  namespace 

 select  from table where idid
rgetserverbyididover authenticated   notldap   to serverserverbyid namespace  namespace 













",TD,TD
39,at one point i added restangular  to help simplify the tp services trafficportalappsrccommonapi however many of the services use restangular and others do not it might make sense to just remove the dependency on restangular altogether,TD,TD
40,"the cdninabox documentation  is missing some things that were added fairly recently  including but not limited to
 use of dockercomposeexposeportsyml should be mentioned with the first dockercompose  up
 optional containers vnc vpn grafana socksproxy 
",TD,Not_TD
41,on the servers page when you click  more  update status we are presented with a list of server statuses this list of statuses should be sorted alphabetically and exclude the servers current status for example if the server status is currently online that status should not be included in the list,TD,Not_TD
42,"related to    missed the to db test in upgrading go

remove reference to vaultcentosorg and install go   trafficopsdbtestdockerdockerfiledbadmin",TD,Not_TD
43,"some log lines in traffic ops errorlog contain a timestamp and some do not the expected format is as follows

   
ie
error    error getting cookie http named cookie not present

here are some of the log line variants
error  http tls handshake error from  eof
proxy error   http proxy error dial tcp  getsockopt connection refused
error    error getting cookie http named cookie not present",TD,Not_TD
44,"

this section is very incomplete it probably only covers  of all of tps functionality

now that the to ui has been deprecated this section should also be removed    and maybe a lot of the information in there could be reused for tp",TD,TD
45,"the types table currently has types associated with

 cache groups
 delivery services
 federations
 regexes
 servers
 static dns entries
 steering targets
 to extensions

as far as i know only one type of type can be added dynamically  server types the other types are static and would require supporting code changes if new types are introduced

for example you can create an edgefoo or midfoo type and the system will treat those servers as edges and mids respectively  no code changes required

however if you create a dnsfoo delivery service type they system cant handle that without code changed

therefore i think the crud apis for types should only work if useintableserver",TD,TD
46,now when a dss hostname changes on an update via ui or api it changes the hostname field on the record stored in riak but it does not regenerate the certificate or csr so there will be a mismatch between the ssl certificate and the hostname it is being used for we need to decide what the proper way to handle this is we can regenerate the certificate and csr in the manner we currently do from the api or ui but they will still be unsigned without human interaction at this pointauthor dylan volzjira link a href,TD,TD
47," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnshealth is handled by perl

 expected  new behavior
cdnshealth should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
48," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsnamehealth is handled by perl

 expected  new behavior
cdnsnamehealth should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
49," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsrouting is handled by perl

 expected  new behavior
cdnsrouting should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
50," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsnameconfigsrouting is handled by perl

 expected  new behavior
cdnsnameconfigsrouting should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
51," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serversserverconfigfilesatsconfigfile is handled by perl

 expected  new behavior
serversserverconfigfilesatsconfigfile should be handled by go this includes behavior for when server is an id as well as a hostname and should encompass all possible files  not just the generic case

the files that need special handlers are

  files matching toextconfig
  cacheconfig
  chkconfig
  ipallowconfig
  hostingconfig
  packages
  parentconfig pr 
  remapconfig

 minimal reproduction of the problem with instructions
na",TD,Not_TD
52," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnscdnconfigfilesatsconfigfile is handled by perl

 expected  new behavior
cdnscdnconfigfilesatsconfigfile should be handled by go this should encompass the behavior when cdn is an id as well as a name the values of configfile that need to be implemented are

  bgfetchconfig
  files matching cacheurlconfig
  files matching regexremapconfig
  files matching setdscpconfig
  sslmulticertconfig
  files matching hdrrwconfig pr 
  regexrevalidateconfig pr 

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
53," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
dbdump is handled by perl

 expected  new behavior
dbdump should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
54," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidsafe is handled by perl

 expected  new behavior
deliveryservicesidsafe should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress ",TD,Not_TD
55," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidhealth is handled by perl

 expected  new behavior
deliveryservicesidhealth should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress  waiting on ",TD,Not_TD
56," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidcapacity is handled by perl

 expected  new behavior
deliveryservicesidcapacity should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress  waiting on ",TD,Not_TD
57," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
divisionsnamename is handled by perl

 expected  new behavior
divisionsnamename should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress  waiting on ",TD,Not_TD
58," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federations is handled by perl

 expected  new behavior
federations should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
59," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationsidusers is handled by perl

 expected  new behavior
federationsidusers should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
60," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationsidusersuserid is handled by perl

 expected  new behavior
federationsidusersuserid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
61," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationsiddeliveryservices is handled by perl

 expected  new behavior
federationsiddeliveryservices should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
62," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationsiddeliveryservicesdsid is handled by perl

 expected  new behavior
federationsiddeliveryservicesdsid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
63," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationsidfederationresolvers is handled by perl

 expected  new behavior
federationsidfederationresolvers should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
64," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationresolvers is handled by perl

 expected  new behavior
federationresolvers should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
65," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
federationresolversid is handled by perl

 expected  new behavior
federationresolversid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
66," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
hwinfo is handled by perl

 expected  new behavior
hwinfo should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
a route named hwinfowip seems to exist progress to completion is unknown
",TD,Not_TD
67," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
hwinfodtdata is handled by perl

 expected  new behavior
hwinfodtdata should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
a route named hwinfowip seems to exist progress to completion is unknown
",TD,Not_TD
68," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
osversions is handled by perl

 expected  new behavior
osversions should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
69," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
isos is handled by perl

 expected  new behavior
isos should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
70," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
jobs is handled by perl

 expected  new behavior
jobs should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
71," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
jobsid is handled by perl

 expected  new behavior
jobsid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
72," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
usercurrentjobs is handled by perl

 expected  new behavior
usercurrentjobs should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
73," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
parametersvalidate is handled by perl

 expected  new behavior
parametersvalidate should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
74," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupsidparameters is handled by perl

 expected  new behavior
cachegroupsidparameters should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
75," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupsidunassignedparameters is handled by perl

 expected  new behavior
cachegroupsidunassignedparameters should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
76," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupsparameteridparameter is handled by perl

 expected  new behavior
cachegroupsparameteridparameter should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
77," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupparameters is handled by perl

 expected  new behavior
cachegroupparameters should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
78," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupparameterscachegroupidparameterid is handled by perl

 expected  new behavior
cachegroupparameterscachegroupidparameterid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
79," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupsparameteridparameteravailable is handled by perl

 expected  new behavior
cachegroupsparameteridparameteravailable should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
80," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
regionsregionphyslocations is handled by perl

 expected  new behavior
regionsregionphyslocations should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
81," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
profilesnamenamecopyfromname is handled by perl

 expected  new behavior
profilesnamenamecopyfromname should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
82," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
profilesidexport is handled by perl

 expected  new behavior
profilesidexport should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
83," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
profilesimport is handled by perl

 expected  new behavior
profilesimport should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
84," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
parametersidprofiles is handled by perl

 expected  new behavior
parametersidprofiles should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
85," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
parametersidunassignedprofiles is handled by perl

 expected  new behavior
parametersidunassignedprofiles should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
86," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
divisionsdivisionregions is handled by perl

 expected  new behavior
divisionsdivisionregions should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
87," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
regionsnamename is handled by perl

 expected  new behavior
regionsnamename should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
88," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
roles is handled by perl

 expected  new behavior
roles should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
89," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
capabilities is handled by perl

 expected  new behavior
capabilities should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
90," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
capabilitiescapability is handled by perl

 expected  new behavior
capabilitiescapability should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
91," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
apicapabilities is handled by perl

 expected  new behavior
apicapabilities should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
92," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
apicapabilitiesid is handled by perl

 expected  new behavior
apicapabilitiesid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
93," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serverstotals is handled by perl

 expected  new behavior
serverstotals should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
94," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serversstatus is handled by perl

 expected  new behavior
serversstatus should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
95," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serverschecks is handled by perl

 expected  new behavior
serverschecks should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
96," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serversidqueueupdate is handled by perl

 expected  new behavior
serversidqueueupdate should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
97," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
serversidstatus is handled by perl

 expected  new behavior
serversidstatus should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
98," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
servercheck is handled by perl

 expected  new behavior
servercheck should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
99," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
servercheckaadata is handled by perl

 expected  new behavior
servercheckaadata should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
100," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
statssummary is handled by perl

 expected  new behavior
statssummary should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
101," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
statssummarycreate is handled by perl

 expected  new behavior
statssummarycreate should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
102," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
typestrimmed is handled by perl

 expected  new behavior
typestrimmed should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
103," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
usersregister is handled by perl

 expected  new behavior
usersregister should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
104," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryserviceuser is handled by perl

 expected  new behavior
deliveryserviceuser should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress   progress to completion is unknown",TD,Not_TD
105," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryserviceuserdsiduserid is handled by perl

 expected  new behavior
deliveryserviceuserdsiduserid should be handled by go

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress   progress to completion is unknown",TD,Not_TD
106," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
usercurrent is handled by perl

 expected  new behavior
usercurrent should be handled by go

 minimal reproduction of the problem with instructions
na",TD,Not_TD
107," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
usercurrentupdate is handled by perl

 expected  new behavior
usercurrentupdate should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
108," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
userlogintoken is handled by perl

 expected  new behavior
userlogintoken should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
109," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
userlogout is handled by perl

 expected  new behavior
userlogout should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
110," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
userresetpassword is handled by perl

 expected  new behavior
userresetpassword should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
111," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
toextensions is handled by perl

 expected  new behavior
toextensions should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
112," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
toextensionsiddelete is handled by perl

 expected  new behavior
toextensionsiddelete should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
113," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
trafficmonitorstats is handled by perl

 expected  new behavior
trafficmonitorstats should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
114,"one of the first steps to self service change integrity is to change the crconfig to select the latest timestamps for each delivery service which requires all tables queried for the crconfig deliveryservices key insertnotupdate which requires those endpoints be written in go

the following tables are queried in the crconfig

 cachegroup
 cdn
 deliveryservice
 deliveryserviceregex
 deliveryserviceserver
 parameter
 profile
 profileparameter
 regex
 server
 staticdnsentry
 type
 status
 snapshot

this case is part of self service and represents the overarching task of rewriting those tables in go but individual issues and prs for each table should be in  

 if youve verified a route does not use one of the crconfig tables above follow it with a bullet noting that be sure to verify any tables the route does use do not link a crconfig table in those tables trafficopsapplibschemaresult
 if there is an unmerged pr follow with a bullet linking the pr
 if the route is in go in master check it off

note this checklist should be current as of  cachegroupfallbacks omitted because that functionality was added to the cachegroups endpoint

  get 
  get 
  get 
  post 
  put 
  delete 
  get 
   
  get 
  get 
  get 
  post 
  put 
  delete 
  post 
   
  post 
  get 
  get 
  get 
  post 
  put 
  delete 
  delete 
  post 
  get 
   
  get 
   
  get 
   
  get 
   
  get 
  get 
  put 
  put 
  get 
  get 
   
  post 
  get 
  get 
  get 
  get 
   
  get 
  get 
  get 
   
  get 
   
  get 
   
  get 
  get 
  get 
  get 
  get 
  get 
  get 
  post 
  put 
  put 
   
  delete 
  get 
  post 
  delete 
  get 
   
  get 
   
  get 
  get 
  post 
  get 
   
  get 
   
  post 
   
  put 
   
  delete 
   
  get 
  post 
  post 
  get 
  post 
  post 
  get 
  get 
  get 
  get 
  get 
  post 
  put 
  delete 
  get 
  get 
  post 
  get 
  get 
  get 
  put 
  post 
  delete 
  delete 
  get 
  post 
  put 
  delete 
  get 
  get 
  post 
  put 
  delete 
  get 
  post 
  delete 
  get 
  post 
  delete 
  get 
  post 
  post 
  delete 
  get 
  get 
  get 
  post 
  get 
  get 
  get 
  post 
  get 
  get 
  post 
  put 
  delete 
  post 
  get 
  get 
  get 
  get 
  post 
  post 
  get 
  post 
  post 
  post 
  delete 
  get 
  get 
  get 
  get 
  post 
  delete 
  get 
  get 
  get 
  get 
  post 
  post 
  put 
  delete 
  get 
  get 
  get 
  post 
  put 
  delete 
  post 
  get 
  post 
  get 
  get 
  get 
  get 
  get 
  put 
  post 
  post 
  delete 
  delete 
  get 
  get 
  get 
  put 
  post 
  delete 
  get 
  get 
  put 
  post 
  delete 
  get 
  get 
  post 
  put 
  delete 
  get 
  get 
  get 
  get 
  get 
  get 
  get 
  post 
  put 
  get 
  get 
  post 
  get 
  post 
  get 
  get 
  put 
  post 
  delete 
  get 
  get 
  get 
  get 
  put 
  post 
  delete 
  get 
  get 
  get 
  post 
  put 
  delete 
  get 
  get 
  put 
  post 
  post 
  get 
  get 
  post 
   
  delete 
   
  get 
  put 
  post 
  post 
  post 
  post 
  post 
  get 
  get 
  get 
  get 
  post 
  post 
  get 
  get ",TD,TD
115," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachestats is handled by perl

 expected  new behavior
cachestats should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
116," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cachegroupfallbacks is handled by perl

 expected  new behavior
cachegroupfallbacks should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
117," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsconfigs is handled by perl

 expected  new behavior
cdnsconfigs should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
118," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsusageoverview is handled by perl

 expected  new behavior
cdnsusageoverview should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
119," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsnamefederationsfederationid is handled by perl

 expected  new behavior
cdnsnamefederationsfederationid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
120," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
currentstats is handled by perl

 expected  new behavior
currentstats should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
121," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryserviceserverdsidserverid is handled by perl

 expected  new behavior
deliveryserviceserverdsidserverid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
122," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesrequest is handled by perl

 expected  new behavior
deliveryservicesrequest should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
123," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidrouting is handled by perl

 expected  new behavior
deliveryservicesidrouting should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
124," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidstate is handled by perl

 expected  new behavior
deliveryservicesidstate should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
125," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidurlkeys is handled by perl

 expected  new behavior
deliveryservicesidurlkeys should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
126," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
riakstats is handled by perl

 expected  new behavior
riakstats should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
127," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 
  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
ort currently fetches packages and the chkconfig from orthost namepackages and orthost namechkconfig respectively

 expected  new behavior
 handlers exist in the perl route apiversionserversserverconfigfilesatsfilename for those two special packages if they are incorrect in some way then a rewrite to go should be done that fixes them either way the apibased routes should be used",TD,Not_TD
128," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryservicesidurlkeys is handled by perl

 expected  new behavior
deliveryservicesidurlkeys should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
129," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
deliveryserviceserverdsidserverid is handled by perl

 expected  new behavior
deliveryserviceserverdsidserverid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
130," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsnamefederationsfederationid is handled by perl

 expected  new behavior
cdnsnamefederationsfederationid should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
131," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsnamefederations is handled by perl

 expected  new behavior
cdnsnamefederations should be handled by go

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
132,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache software foundation security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure



 for support questions use the
 or 
 before submitting please search github for a similar issue or pr 

 im submitting a 


  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  testing
  unknown

 current behavior


 the to api testing framework currently deletes all rows from certain tables before running some manual db queries to insert test data and running the actual tests some manual db queries are probably necessary to set up some targeted data in order to run the tests but we already have a thing to reset the db  dbadmin envtest reset this will get the db into an empty state at the latest schema version simply deleting all data without reinserting all the necessary starterseed data is a problem because traffic control depends on that starter data for some of its features toextensionsserverchecks for example
 the tcfixturesjson file  the json file that contains the to api test fixture data  overlaps significantly with the seedssql file that is used to seed the db with necessary data this is a problem because duplicate data is bound to get out of sync and seedssql should be the ssot for necessary starterseed data

 expected  new behavior


 the to api testing framework should use the dbadmin binary for resetting the db instead of doing it itself
 the to api testing framework should use seedssql for populating all the necessary starterseed data instead of duplicating all the same data in json form in tcfixturesjson

it seems like there should be three initial steps performed by the to api test framework
 run the dbadmin envtest reset to empty the totest db
 run targeted db queries to populate some required data that running seedssql alone would be insufficient things like creating the initial set of users that the tests will require to log in  it does some of this today but currently inserts data that could be inserted by seedssql instead 
 run seedssql to populate the db with the necessary starterseed data

there was already an issue opened by  for item   so ill add that description here as rationale for item 
 right now the to api tests dont use seedssql which has a number of issues
  the sql commands required by the tests have to be copypasted into the tests for example for capabilities this is  lines of duplicate code
  changes to seedssql will break the tests unless theyre also copypasted in
  changes to seedssql which change behavior could break an endpoint but the api tests will still pass because theyre copypasted
  the seedssql is not being tested ideally the to tests should verify that the seedssql works correctly as part of verifying to works
 
 the api test framework should be changed to use seedsql rather than copying its contents to fix these issues and improve test coverage in general


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,Not_TD
133," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 
  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior

objects with names that are numbers can be created

 expected  new behavior

prevent creating objects with names that are numbers

 minimal reproduction of the problem with instructions

currently you can create objects  cdns profiles delivery services servers  basically any object whose name cdn name profile name ds xmlid server hostname etc these names can then be queried from api endpoints and clients expect to get a single response 

further many api endpoints accept either a name or id in the same path segment

what then happens when a user requests cdnsidorname for an object with a name which is a valid id of a different object

we should not do anything to break upon existing data if some traffic control user has names which are ids and is somehow using them successfully we should not cause them to break

but we should prevent new objects for every object type with a name from being created with a name that is strictly a number we have never supported that and it has never worked correctly with the api it is better to explicitly prohibit it and return an error when trying to create than to let users create it and get difficult errors when later using it

in the future for api  we could design an api which can unambiguously handle names that are numbers but the current api simply does not work with numeric names in numerous places both at the api and internal code level and so it should be prevented

footgun

 anything else

no",TD,TD
134,in the config object in the  endpoint response theres  a key named hackttl which nobody ive talked to believes has a use anymore if thats the case we should get rid of it,TD,TD
135,now that the old to ui is disabled its no longer possible to login  if you just sit on the deprecation page your web browser will still try to make calls to the to netlogcount api endpoint  this will always return a  since its nolonger possible to login  we should remove the javascript thats making this call,TD,TD
136,"the to api defines post and put to return the object for most endpoints but the cruder framework doesnt it just returns an empty success response

i dont think itll be that difficult to make the cruder framework do this by adding it to the genericcreate and genericupdate funcs to expect an object to be returned from sql and populate it via the existing sqlx tags and add that to each query via returning

this might ought to be tagged bug its a bug that the api is missing this from  where it existed before",TD,TD
137," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnscapacity is handled by perl

 expected  new behavior
cdnscapacity should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
138," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupsidparameters is handled by perl

 expected  new behavior
cachegroupsidparameters should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
139," im submitting an
improvement request usability performance tech debt etc

 traffic control components affected 
traffic ops

 current behavior
ip addresses in the todb are stored as text or byte strings  and usually separate  addresses and  addresses into separate columnstables

 expected  new behavior
ip addresses should make use of the  datatype and should ideally not distinguish between  and  ",TD,TD
140," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupsidunassignedparameters is handled by perl

 expected  new behavior
cachegroupsidunassignedparameters should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
141,"currently the to api tests dont support traffic monitors this makes it impossible to write integration tests for endpoints that call out to monitors

we need to add monitor support so we can test the monitor endpoints

this may be as simple as adding a few fixtures and configs or it may be rather difficult to begin with someone needs to investigate or prototype it to find out how much work its going to be

see also 

 im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 
  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior

api tests dont support monitors

 expected  new behavior

api tests support monitors and support tests that make requests to them

 minimal reproduction of the problem with instructions

write an api test that requests a monitor endpoint

 anything else



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,TD
142," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
profilesidexport is handled by perl

 expected  new behavior
profilesidexport should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
143," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
dbdump is handled by perl

 expected  new behavior
dbdump should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
144," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
userlogintoken is handled by perl

 expected  new behavior
userlogintoken should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
145," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
servercheck is handled by perl

 expected  new behavior
servercheck should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
146," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
userlogout is handled by perl

 expected  new behavior
userlogout should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
147," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
profilesimport is handled by perl

 expected  new behavior
profilesimport should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
148," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationsiddeliveryservices is handled by perl

 expected  new behavior
federationsiddeliveryservices should be handled by go

 minimum api version


 request methods
  get
  post 

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
149," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
jobsid is handled by perl

 expected  new behavior
jobsid should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
150," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
jobs is handled by perl

 expected  new behavior
jobs should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
151," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
usercurrentjobs is handled by perl

 expected  new behavior
usercurrentjobs should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
152," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationsiddeliveryservicesdsid is handled by perl

 expected  new behavior
federationsiddeliveryservicesdsid should be handled by go

 minimum api version


 request methods
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
153," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesrequest is handled by perl

 expected  new behavior
deliveryservicesrequest should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
154," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
roles is handled by perl

 expected  new behavior
roles should be handled by go

 minimum api version
  this is the real issue here the current go implementation has a minimum version of 

 request methods
  get
go added other request methods in api   this was the only one in perl

 minimal reproduction of the problem with instructions
na
",TD,TD
155," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnscdnconfigfilesatsconfigfile is handled by perl

 expected  new behavior
cdnscdnconfigfilesatsconfigfile should be handled by go this should encompass the behavior when cdn is an id as well as a name the values of configfile that need to be implemented are

  bgfetchconfig
  files matching cacheurlconfig
  files matching regexremapconfig
  files matching setdscpconfig
  sslmulticertconfig
  files matching hdrrwconfig pr 
  regexrevalidateconfig pr 

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,TD
156," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationsidusers is handled by perl

 expected  new behavior
federationsidusers should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
157," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serversstatus is handled by perl

 expected  new behavior
serversstatus should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
158," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachestats is handled by perl

 expected  new behavior
cachestats should be handled by go

 minimum api version 


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
159," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federations is handled by perl

 expected  new behavior
federations should be handled by go

 minimum api version


 request methods
  delete
  get 
  post
  put

 minimal reproduction of the problem with instructions
na
",TD,TD
160," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serversidstatus is handled by perl

 expected  new behavior
serversidstatus should be handled by go

 minimum api versions


 request methods
  put

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
161," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationresolvers is handled by perl

 expected  new behavior
federationresolvers should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
162," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serversserverconfigfilesatsconfigfile is handled by perl

 expected  new behavior
serversserverconfigfilesatsconfigfile should be handled by go this includes behavior for when server is an id as well as a hostname and should encompass all possible files  not just the generic case

the files that need special handlers are

  files matching toextconfig
  cacheconfig
  chkconfig
  ipallowconfig
  hostingconfig
  packages
  parentconfig pr 
  remapconfig

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na",TD,Not_TD
163," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationsidusersuserid is handled by perl

 expected  new behavior
federationsidusersuserid should be handled by go

 minimum api version


 request methods
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
164," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
osversions is handled by perl

 expected  new behavior
osversions should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
165," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
usersregister is handled by perl

 expected  new behavior
usersregister should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
166," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serversidqueueupdate is handled by perl

 expected  new behavior
serversidqueueupdate should be handled by go

 minimum api versions


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
167," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnshealth is handled by perl

 expected  new behavior
cdnshealth should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
168," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnsnamehealth is handled by perl

 expected  new behavior
cdnsnamehealth should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
169," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
profilesnamenamecopyfromname is handled by perl

 expected  new behavior
profilesnamenamecopyfromname should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
170,at one point i added restangular  to help simplify the tp services trafficportalappsrccommonapi however many of the services use restangular and others do not it might make sense to just remove the dependency on restangular altogether so the service code can be consistent and one less dependency,TD,TD
171," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesidcapacity is handled by perl

 expected  new behavior
deliveryservicesidcapacity should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress  waiting on ",TD,Not_TD
172," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serverstotals is handled by perl

 expected  new behavior
serverstotals should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
173," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
usercurrent is handled by perl

 expected  new behavior
usercurrent should be handled by go

 minimum api version


 request methods
  get 
  put

 minimal reproduction of the problem with instructions
na",TD,Not_TD
174," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
apicapabilities is handled by perl

 expected  new behavior
apicapabilities should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
175," im submitting a 


  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
tp currently makes calls to api endpoints that will soon be deprecated these calls need to be removed or changed to another suitable endpoint

 expected  new behavior
tp does not make any api calls to deprecated endpoints

 minimal reproduction of the problem with instructions

na


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,Not_TD
176," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationsidfederationresolvers is handled by perl

 expected  new behavior
federationsidfederationresolvers should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
177," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
statssummary is handled by perl

 expected  new behavior
statssummary should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
178," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesidhealth is handled by perl

 expected  new behavior
deliveryservicesidhealth should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress  waiting on ",TD,Not_TD
179," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
federationresolversid is handled by perl

 expected  new behavior
federationresolversid should be handled by go

 minimum api version


 request methods
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
180," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
apicapabilitiesid is handled by perl

 expected  new behavior
apicapabilitiesid should be handled by go

 minimum api version


 request methods
  get
  put
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
181," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupsparameteridparameter is handled by perl

 expected  new behavior
cachegroupsparameteridparameter should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
182," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupsparameteridparameteravailable is handled by perl

 expected  new behavior
cachegroupsparameteridparameteravailable should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
183," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupparameterscachegroupidparameterid is handled by perl

 expected  new behavior
cachegroupparameterscachegroupidparameterid should be handled by go

 minimum api version


 request methods
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
184," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
hwinfodtdata is handled by perl

 expected  new behavior
hwinfodtdata should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else
a route named hwinfowip seems to exist progress to completion is unknown
",TD,TD
185," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
capabilities is handled by perl

 expected  new behavior
capabilities should be handled by go

 minimum api versions
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
186," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
parametersidprofiles is handled by perl

 expected  new behavior
parametersidprofiles should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
187," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
divisionsdivisionregions is handled by perl

 expected  new behavior
divisionsdivisionregions should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
188," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
parametersvalidate is handled by perl

 expected  new behavior
parametersvalidate should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
189," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
regionsregionphyslocations is handled by perl

 expected  new behavior
regionsregionphyslocations should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
190," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnsnameconfigsrouting is handled by perl

 expected  new behavior
cdnsnameconfigsrouting should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
191," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
divisionsnamename is handled by perl

 expected  new behavior
divisionsnamename should be handled by go

 minimum api version


 request methods
  delete
  get 

 minimal reproduction of the problem with instructions
na",TD,Not_TD
192," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
serverschecks is handled by perl

 expected  new behavior
serverschecks should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
193," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
riakstats is handled by perl

 expected  new behavior
riakstats should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
194," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
toextensionsiddelete is handled by perl

 expected  new behavior
toextensionsiddelete should be handled by go

 minimum api version


 request methods
  post yeesh

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
195," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
statssummarycreate is handled by perl

 expected  new behavior
statssummarycreate should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
196," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupfallbacks is handled by perl

 expected  new behavior
cachegroupfallbacks should be handled by go

 minimum api version


 request methods
  get
  put
  post
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
197," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other

 traffic control components affected 
  cdn in a box
  documentation possibly
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
cdnsconfigs is handled by perl

 expected  new behavior
cdnsconfigs should be handled by go

 minimum api version
  this is the actual problem here the current go implementation has a minimum supported version of 

 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
198," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
capabilitiescapability is handled by perl

 expected  new behavior
capabilitiescapability should be handled by go

 minimum api version


 request methods
  get
  put
  delete

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
199," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesidstate is handled by perl

 expected  new behavior
deliveryservicesidstate should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
200,"at the time of creating this issue all the following endpoints were undocumented
i can update the tickbox to be checked for each endpoint that is updated note this may not be a comprehensive list

specific fields
  user does not document lastupdated for post
  regions does not document lastupdated for post

whole endpoints
  get steering
  post statuses
  post type
  put type
  delete type
  post roles
  put roles
  delete roles
  delete divisions
  delete regions
  getpostputdelete deliveryservicerequests
     note a post method is documented for deliveryservicesrequest implemented in perl
     im not sure whether or not this supposed to be a different endpoint

note most cases where an id is used i mean a path parameter because it is understood but there are exceptions like roles where only query parameters are used



other incomplete documentation
  deliveryservicesdnsseckeysgenerate
    there is no example request structure
",TD,TD
201," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
toextensions is handled by perl

 expected  new behavior
toextensions should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
202," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
servercheckaadata is handled by perl

 expected  new behavior
servercheckaadata should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
203," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
typestrimmed is handled by perl

 expected  new behavior
typestrimmed should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
204," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
parametersidunassignedprofiles is handled by perl

 expected  new behavior
parametersidunassignedprofiles should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
205," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
trafficmonitorstats is handled by perl

 expected  new behavior
trafficmonitorstats should be handled by go

 minimum api version 


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
206," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryserviceuserdsiduserid is handled by perl

 expected  new behavior
deliveryserviceuserdsiduserid should be handled by go

 minimum api version


 request methods
  delete

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress   progress to completion is unknown",TD,Not_TD
207," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryserviceuser is handled by perl

 expected  new behavior
deliveryserviceuser should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress   progress to completion is unknown",TD,Not_TD
208," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnsrouting is handled by perl

 expected  new behavior
cdnsrouting should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na

 anything else

pr in progress  ",TD,Not_TD
209," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
usercurrentupdate is handled by perl

 expected  new behavior
usercurrentupdate should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
210," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cdnsusageoverview is handled by perl

 expected  new behavior
cdnsusageoverview should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
211," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
cachegroupparameters is handled by perl

 expected  new behavior
cachegroupparameters should be handled by go

 minimum api version


 request methods
  get
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
212," im submitting a 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesidsafe is handled by perl

 expected  new behavior
deliveryservicesidsafe should be handled by go

 minimum api version


 request methods
  put

 minimal reproduction of the problem with instructions
na

 anything else
pr in progress ",TD,Not_TD
213," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
regionsnamename is handled by perl

 expected  new behavior
regionsnamename should be handled by go

 minimum api versions


 request methods
  get 
  delete

 minimal reproduction of the problem with instructions
na
",TD,TD
214,"a number of to client funcs have been deprecated since  and should be removed from master 

they can be found by searching for  deprecated eg ",TD,Not_TD
215," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
deliveryservicesidrouting is handled by perl

 expected  new behavior
deliveryservicesidrouting should be handled by go

 minimum api version


 request methods
  get

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
216," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to fetch the packages necessary for install on cache servers ort calls the orthost namepackages endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to support generating the output from standard api calls
 ort itself could be changed to request the necessary information from the standard api
 the endpoint could be rewritten in go and added to the  api
 the ability to install packages could be removed from ort entirely and be left to the orchestration or administration system of choice for the organization managing the server  which probably does it better anyway

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api",TD,TD
217," im submitting a 
  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 
  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
ort currently fetches packages and the chkconfig from orthost namepackages and orthost namechkconfig respectively

 expected  new behavior
 handlers exist in the perl route apiversionserversserverconfigfilesatsfilename for those two special packages if they are incorrect in some way then a rewrite to go should be done that fixes them either way the apibased routes should be used",TD,Not_TD
218," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to fetch the services and their necessary states in different runlevels on cache servers ort calls the orthost namechkconfig endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to support generating the output from standard api calls
 ort itself could be changed to request the necessary information from the standard api
 the endpoint could be rewritten in go and added to the  api
 the ability to manage services that are not ats could be removed from ort entirely and left up to the orchestration or administration system in use by the organization managing the cache server as they probably do it much better

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api

 anything else
however this is done  provided the functionality is retained  it really ought to not use the chkconfig format as all centos versions currently supported use systemd instead",TD,TD
219," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to report that updates andor revalidations were successfully applied on cache servers ort calls the updatehost name endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to it using standard api calls
 ort itself could be changed to make the request using the standard api
 the endpoint could be rewritten in go and added to the  api

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api",TD,TD
220," im submitting an 
improvement request usability performance tech debt etc

 traffic control components affected 
 documentation possibly
 traffic ops

 current behavior
isos is handled by perl

 expected  new behavior
isos should be handled by go

 minimum api version


 request methods
  post

 minimal reproduction of the problem with instructions
na
",TD,Not_TD
221," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to fetch the packages necessary for install on cache servers ort calls the orthost namepackages endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to support generating the output from standard api calls
 ort itself could be changed to request the necessary information from the standard api
 the endpoint could be rewritten in go and added to the  api
 the ability to install packages could be removed from ort entirely and be left to the orchestration or administration system of choice for the organization managing the server  which probably does it better anyway

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api",TD,TD
222," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to fetch the services and their necessary states in different runlevels on cache servers ort calls the orthost namechkconfig endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to support generating the output from standard api calls
 ort itself could be changed to request the necessary information from the standard api
 the endpoint could be rewritten in go and added to the  api
 the ability to manage services that are not ats could be removed from ort entirely and left up to the orchestration or administration system in use by the organization managing the cache server as they probably do it much better

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api

 anything else
however this is done  provided the functionality is retained  it really ought to not use the chkconfig format as all centos versions currently supported use systemd instead",TD,TD
223,"because the api version is treated as a float under the hood i believe we will run into issues once we reach api minor version  because    the underlying implementation should model api versions as a struct of two unsigned integers 

type apiversion struct 
    major uint
    minor uint



this would have to be refactored before we could possibly support to api minor version  we are currently at  so i believe we have about  releases until this will need to be addressed",TD,TD
224,"i am writing an api test for a pr i submitted 

i have the following code


func trytodeletedivisiont testingt 
    division  testdatadivisions
    resp  err  tosessiondeletedivisionbynamedivisionname

    fmtprintfresp vn resp
    fmtprintferr vn err

    if err  nil 
        terrorfshould not be able to delete a division prematurely
        return
    

    if lenrespalerts   
        terrorferror occurred while deleting division but no alerts exist
        return
    

    switch respalertstext 
    case resource not found
        terrorfdivision with name v does not exist divisionname
    case this division is currently used by regions
         expected return message
    default
        terrorfunexpected alert occurred v resp
    



below is the result you can see that the error clearly returns the alert message im looking for but when an error occurs the client doesnt return the alerts at first glance this is confusing is there a particular reason this is done i believe there is a go convention that says a returned error implies the first value is nil but i dont think that makes sense in this case

i can write this particular test differently but maybe this makes sense to change


resp 
err  bad request  error requesting traffic ops  alerts
 fail testdivisions 
	 error occurred while deleting division but no alerts exist
fail
",TD,TD
225,"the types table currently has types associated with

 cache groups
 delivery services
 federations
 regexes
 servers
 static dns entries
 steering targets
 to extensions

as far as i know only one type of type can be added dynamically  server types the other types are static and would require supporting code changes if new types are introduced

for example you can create an edgefoo or midfoo type and the system will treat those servers as edges and mids respectively because they start with edge or mid  no code changes required

however if you create a dnsfoo delivery service type the system cant handle that without code changes

therefore i think the crud apis for types should only work if useintableserver otherwise you should get back a  bad request",TD,TD
226," says to use the pkg script but it doesnt say where it is the docs should note its in the root of the repo and possibly include a link to github or instructions to checkout and run it

i know that might seem obvious but im making this case because we actually had someone asking where to find it

relatedly the dockercompose instructions on the same page have the same problem might be worth adding to the instructions a section on how go get the code and navigate to it ie 

mkdir p gopathsrcgithubcomapache
cd gopathsrcgithubcomapache
git clone 
cd incubatortrafficcontrol
",TD,TD
227,"this endpoint just outputs a list of cdns as nameid pairs like eg

json

  response 
    
      name all
      id 
    
    
      name cdninabox
      id 
    
    
      name foo
      id 
    
  



which based on the name doesnt seem like the desired behaviour even if it is the  endpoint already provides the same information so maybe we should just get rid of this instead of fixing it",TD,TD
228,nan,TD,Not_TD
229," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  grove
  traffic control client
  traffic ops

 current behavior
trafficopsgolang and trafficopsclient now depend on groveweb grove is an app not a library nothing should depend on it

the things in groveweb that to needs should be moved to libgorfc to fix the dependency

 expected  new behavior
to no longer depends on grove

 minimal reproduction of the problem with instructions
tech debt not actively causing a bug but its a logistical problem to requires grove to build build systems tests etc must all copy and build grove etc etc

 anything else
",TD,TD
230,"traffic ops currently creates location parameters for ds fields that use config files this is no longer necessary since 

code is here


 im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
to creates ds location parameters

 expected  new behavior
to does not create ds field location parameters

 minimal reproduction of the problem with instructions
change a ds to have a header rewrite observe location parameter created

 anything else
",TD,Not_TD
231,"since  the config generation will infer location parameters but this requires ort to pass it the ats config directory

the perl ort does this but ortpy used by the ciab doesnt it should be changed so it does and the unnecessary location parameters removed

 im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  cdn in a box

 current behavior
ciab creates inferred location parameters and ortpy doesnt pass config generation the ats install path

 expected  new behavior
ciab does not create inferred location parameters and ortpy does pass config generation the ats install path

 minimal reproduction of the problem with instructions
run ciab observe unnecessary location parameters

 anything else
",TD,TD
232,"ats config generation creates dscp files from ds settings these settings are read and then set as a file on the remapconfig line for the ds

but the files themselves are not inferred the location parameters for setdscpconfig must exist or ats will fail to start

the config generation should infer these files from the dscp settings of all dses on the server instead of relying on duplicate potentiallywrong parameters

 im submitting a 

  new feature  enhancement request
  improvement request usability performance tech debt etc


 traffic control components affected 
  traffic ops ort

 current behavior
dscp files are not  dynamically created

 expected  new behavior
dscp files are dynamically created as needed irrespective of location parameters

 minimal reproduction of the problem with instructions
delete all setdscp location parameters run ort observe ats exploding

 anything else
",TD,TD
233," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  grove
  traffic control client
  traffic ops

 current behavior
trafficopsgolang and trafficopsclient now depend on groveweb grove is an app not a library nothing should depend on it

the things in groveweb that to needs should be moved to libgorfc to fix the dependency

 expected  new behavior
to no longer depends on grove

 minimal reproduction of the problem with instructions
tech debt not actively causing a bug but its a logistical problem to requires grove to build build systems tests etc must all copy and build grove etc etc

 anything else
",TD,TD
234,"since  the config generation will infer location parameters but this requires ort to pass it the ats config directory

the perl ort does this but ortpy used by the ciab doesnt it should be changed so it does and the unnecessary location parameters removed

 im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  cdn in a box

 current behavior
ciab creates inferred location parameters and ortpy doesnt pass config generation the ats install path

 expected  new behavior
ciab does not create inferred location parameters and ortpy does pass config generation the ats install path

 minimal reproduction of the problem with instructions
run ciab observe unnecessary location parameters

 anything else
",TD,TD
235,"by ignorance or by maybe by design i created a crconfig that got rejected from traffic router i added a hostregexp with order of  which shouldnt have been a problem there is no default value 

this created a bunch of null entries added in the crconfig which traffic router was unable to parse

note crconfig rejections are not being relayed back to users in portal


  testds 
    coveragezoneonly false
    deepcachingtype never
    domains 
      testdswcdncoxnet
    
    geolocationprovider maxmindgeolocationservice
     false
    matchsets 
      
        matchlist 
          
            matchtype host
            regex testds
          
        
        protocol dns
      
    null
      null
      null
      null
      null
      null
      null
      null
      null
      
        matchlist 
          
            matchtype host
            regex mycnamecdncoxnet
          
        
        protocol dns
      
    


traffic router logs


warn    comcomcastcdntrafficcontroltrafficroutercoremonitortrafficmonitorwatcher  comcomcastcdntrafficcontroltrafficroutercoreutiljsonutilsexception failed querying json for key protocol
comcomcastcdntrafficcontroltrafficroutercoreutiljsonutilsexception failed querying json for key protocol
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 
        at 


",TD,TD
236," im submitting a 


  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior
tp currently makes calls to api endpoints that will soon be deprecated with api  these calls need to be removed or changed to another suitable endpoint

you can determine which calls tp makes to soontobedeprecated api  routes as they look like this

httpgetenvapi

api calls are made in the following services 

 expected  new behavior
tp does not make any api calls to deprecated legacy endpoints

 minimal reproduction of the problem with instructions

na


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,Not_TD
237,"i was browsing the official docs and ended up having to dive into the code to get the api endpoint for 

docs should get added to ",TD,Not_TD
238,"this route needs documented

its new and not in perl or the docs i almost deleted it because i thought it was a mistake its not ",TD,Not_TD
239,"the cdninabox documentation  is missing some things that were added fairly recently  including but not limited to
 use of dockercomposeexposeportsyml should be mentioned with the first dockercompose  up
 optional containers vnc vpn grafana socksproxy 
",TD,Not_TD
240," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 

  documentation
  traffic ops

 current behavior
there is no mention of how performing a cdn snapshot put apiversionsnapshotcdncdnname affects the output of the monitoring configuration file get cdnscdnconfigsmonitoring used by traffic monitor

 expected  new behavior
include mention of how cdn snapshotting affects get cdnscdnconfigsmonitoring

 minimal reproduction of the problem with instructions



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
241,because of how the build system recursively copies the trafficportal directory existing nodemodules and bowercomponents dependencies directories in the locallycopied repo will be pulled into the build environment this means that conflicting dependency versions can exist  which can cause the build to fail cryptically problem is easily fixed by deleting the local resources but developers might be annoyed by that so a better solution would be to just either destroy the dependency directories in the build system before running bower installnpm install or just not copying them in the first place,TD,TD
242," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 

  documentation
  traffic ops

 current behavior
there is no mention of how performing a cdn snapshot put apiversionsnapshotcdncdnname affects the output of the monitoring configuration file get cdnscdnconfigsmonitoring used by traffic monitor

 expected  new behavior
include mention of how cdn snapshotting affects get cdnscdnconfigsmonitoring

 minimal reproduction of the problem with instructions



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
243," im submitting a 
 improvement request usability performance tech debt etc

 traffic control components affected 
 cdninabox because of ortpy
 traffic ops ort and also the python version used by cdninabox

 current behavior
to report that updates andor revalidations were successfully applied on cache servers ort calls the updatehost name endpoint which is not grounded in an api version nor documented anywhere nor handled in go

 expected  new behavior
ort should use only real documented supported versioned api endpoints im not personally very particular how thats done though i prefer the bottommost option unrealistic though that may be

 the call could be forwarded to atstccfg which could be updated to it using standard api calls
 ort itself could be changed to make the request using the standard api
 the endpoint could be rewritten in go and added to the  api

 minimal reproduction of the problem with instructions
run ort observe the call to an unsupported nonstandard api",TD,TD
244,"currently the to api tests dont support riak this makes it impossible to write integration tests for riak endpoints 

we need to add riak support so we can test the riak endpoints

this may be as simple as adding a few fixtures and configs or it may be rather difficult to begin with someone needs to investigate or prototype it to find out how much work its going to be",TD,TD
245,"remove this section which does not apply to new installs of tv

 riak search using apache solr will now index all new records that are added to the ssl bucket the cdn deliveryservice and hostname fields are indexed and when a search is performed riak will return the indexed fields along with the crt and key values for a ssl record in order to add the indexed fields to current records and to get the current records added a standalone script needs to be run the following explains how to run the script

get script from github either by cloning the project and going to trafficopsappscript or from here
run the script by performing the following command updateriakforsearchpl tourl tounuser topwpassword
validate the search is working by querying against riak directly curl kvs 

validation can also be done by querying traffic ops curl lvs h cookie cookie 

",TD,Not_TD
246,in cdnfederationsgo i used getusertenantidlisttx instead of isresourceauthorizedtousertx because the secondary method still used the usetenancy variable however it would be more idomatic to use the secondary method especially after usetenancy is fully deprecated,TD,TD
247,"it would be a good idea to return status codes from client functions to better test the trafficops api a common use case would be to test for  while using put or delete

a part of the underlying argument is that the client should be more versatile
related 

there are some instances where we have already returned status codes

clientrolego
 to session createroleregion tcrole tcalerts reqinf int error 
 to session updaterolebyidid int region tcrole tcalerts reqinf int error 
 to session getroles tcrole reqinf int error 
 to session getrolebyidid int tcrole reqinf int error 
 to session getrolebynamename string tcrole reqinf int error 
 to session deleterolebyidid int tcalerts reqinf int error 

clientstaticdnsentrygo
 to session updatestaticdnsentrybyidid int sdns tcstaticdnsentry tcalerts reqinf int error 
",TD,Not_TD
248," im submitting a 
  tech debt

 traffic control components affected 
  traffic ops ort

 current behavior
ort links against the  client

 new behavior
ort would ideally link against the latest stable api version  currently 

 minimal reproduction of the problem with instructions
 
",TD,Not_TD
249," im submitting a 
 tech debt

 traffic control components affected 
noneother

 current behavior
ansible data set loader uses traffic ops api version 

 expected behavior
ansible data set loader should use the latest stable api version  currently 

 minimal reproduction of the problem with instructions
notice the ansible data set loader is using api version ",TD,TD
250," im submitting a 
 tech debt

 traffic control components affected 
noneother

 current behavior
ansible data set loader uses traffic ops api version 

 expected behavior
ansible data set loader should use the latest stable api version  currently 

 minimal reproduction of the problem with instructions
notice the ansible data set loader is using api version ",TD,TD
251,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request

 traffic control components affected 

 cdn in a box
 documentation
 traffic ops
 astats simulator

 current behavior

several lines of code use get toolswritecrconfigname

 
 
 
 
 
 
 
 
 

also some lines of code use get crconfigsnapshotsnamecrconfigjson

 
 
 
 
 
 


 expected behavior

 code using get toolswritecrconfigname should instead use put 
 code using get crconfigsnapshotsnamecrconfigjson should instead use get 


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
252,create dnssec keys only for ds types that are routed on the cdn such as any http or dns type anymap or other types that are not routed on the cdn should not have dnssec keys created for them,TD,Not_TD
253,"component tr
build nightly
endpoints
trurlportcrsstats


allowed http request methods any
expected to allow get for all others http status   method not allowed should be returned 
documentation ref traffic router api endpoints only respond to get requests 

",TD,Not_TD
254,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  grove
  traffic ops
  traffic ops ort

 current behavior

go vet compositestrue  finds  issues

messageline of code
 composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatareqdata composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatarespdata composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatasrvrdata composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgorfcemailaddress composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontrollibgotcalert composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontrollibgotcalerts composite literal uses unkeyed fields

click to expand  lines



 composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcassigneddsresponse composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdeliveryserviceserverresponse composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdeliveryserviceservers composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdsserver composite literal uses unkeyed fields



 composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdssmapresponse composite literal uses unkeyed fields



 composite literal uses unkeyed fields



 composite literal uses unkeyed fields

click to expand  lines



 composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontroltrafficopstrafficopsgolangapiapiinfoimpl composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontroltrafficopstrafficopsgolangapikeyfieldinfo composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontroltrafficopstrafficopsgolangapiversion composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontroltrafficopstrafficopsgolangdbhelperswherecolumninfo composite literal uses unkeyed fields

click to expand  lines



githubcomapachetrafficcontroltrafficopstrafficopsgolangparametertoparameter composite literal uses unkeyed fields



githubcomapachetrafficcontroltrafficopstrafficopsgolangprofileparametertoprofileparameter composite literal uses unkeyed fields



githubcomapachetrafficcontroltrafficopstrafficopsgolangroutingmiddlewareauthbase composite literal uses unkeyed fields



githubcommiekgdnsquestion composite literal uses unkeyed fields





 expected behavior

go vet compositestrue  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet compositestrue 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
255,"postinstall has a feature to write all questions to a json file to answer all the questions that it would ask if invoked with no options  and another option to use a json file as input


sudo postinstall defaultstmppostinstalljson
sudo vim tmppostinstalljson
sudo postinstall cfiletmppostinstalljson


this needs to be documented in the traffic ops administration documentation

also the file trafficopsinstallbininputjson should be removed entirely  it easily will get out of date and confuse users",TD,Not_TD
256,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request

 traffic control components affected 

 cdn in a box
 documentation
 traffic ops
 astats simulator

 current behavior

several lines of code use get toolswritecrconfigname

 
 
 
 
 
 
 
 
 

also some lines of code use get crconfigsnapshotsnamecrconfigjson

 
 
 
 
 
 


 expected behavior

 code using get toolswritecrconfigname should instead use put 
 code using get crconfigsnapshotsnamecrconfigjson should instead use get 


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
257,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  grove
  traffic ops
  traffic ops ort

 current behavior

go vet compositestrue  finds  issues

messageline of code
 composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatareqdata composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatarespdata composite literal uses unkeyed fields



githubcomapachetrafficcontrolgrovecachedatasrvrdata composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgorfcemailaddress composite literal uses unkeyed fields

click to expand  lines











githubcomapachetrafficcontrollibgotcalert composite literal uses unkeyed fields

click to expand  lines






















githubcomapachetrafficcontrollibgotcalerts composite literal uses unkeyed fields

click to expand  lines





















 composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcassigneddsresponse composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdeliveryserviceserverresponse composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdeliveryserviceservers composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdsserver composite literal uses unkeyed fields



 composite literal uses unkeyed fields



githubcomapachetrafficcontrollibgotcdssmapresponse composite literal uses unkeyed fields



 composite literal uses unkeyed fields



 composite literal uses unkeyed fields

click to expand  lines








































 composite literal uses unkeyed fields

click to expand  lines
























githubcomapachetrafficcontroltrafficopstrafficopsgolangapiapiinfoimpl composite literal uses unkeyed fields

click to expand  lines


























githubcomapachetrafficcontroltrafficopstrafficopsgolangapikeyfieldinfo composite literal uses unkeyed fields

click to expand  lines

































githubcomapachetrafficcontroltrafficopstrafficopsgolangapiversion composite literal uses unkeyed fields

click to expand  lines











































































































































and so on github comment size limit is  characters


githubcomapachetrafficcontroltrafficopstrafficopsgolangdbhelperswherecolumninfo composite literal uses unkeyed fields

click to expand  lines











































































































































githubcomapachetrafficcontroltrafficopstrafficopsgolangparametertoparameter composite literal uses unkeyed fields



githubcomapachetrafficcontroltrafficopstrafficopsgolangprofileparametertoprofileparameter composite literal uses unkeyed fields



githubcomapachetrafficcontroltrafficopstrafficopsgolangroutingmiddlewareauthbase composite literal uses unkeyed fields



githubcommiekgdnsquestion composite literal uses unkeyed fields





 expected behavior

go vet compositestrue  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet compositestrue 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
258,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  grove

 current behavior

go vet copylocks  finds  issues

messageline of code

assignment copies lock value to newtransport nethttptransport contains syncmutex





 expected behavior

go vet copylocks  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet copylocks 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
259,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic router tester go

 current behavior

go vet httpresponse  finds  issues

messageline of code

using resp before checking for errors






 expected behavior

go vet httpresponse  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet httpresponse 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
260,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops api tests
  traffic ops ort

 current behavior

go vet loopclosure  finds  issues

messageline of code

loop variable pl captured by func literal






loop variable pp captured by func literal







 expected behavior

go vet loopclosure  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet loopclosure 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
261,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops unit tests

 current behavior

go vet lostcancel  finds  issues

messageline of code

this return statement may be reached without using the canceltx var defined on line 



the cancel function returned by contextwithtimeout should be called not discarded to avoid a context leak
click to expand  lines






























the canceltx function is not used on all paths possible context leak



the cancel function returned by contextwithdeadline should be called not discarded to avoid a context leak





 expected behavior

go vet lostcancel  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet lostcancel 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
262,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box enroller
  experimental traffic ops service for auth
  traffic ops ort

 current behavior

go vet printf  finds  issues

messageline of code

println arg list ends with redundant newline



infof format s has arg pid of wrong type int



printf format s has arg cfgtoinsecure of wrong type bool



printf call has arguments but no formatting directives



printf format s reads arg  but call has  arg



infof format s has arg sname of wrong type string





 expected behavior

go vet printf  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet printf 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
263,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic monitor
  traffic router tester go

 current behavior

go vet structtag  finds  issues

messageline of code

struct field asn has json tag but is not exported



struct field tag jsonstarttime omitempty dbstarttime not compatible with reflectstructtagget suspicious space in struct tag value



struct field  repeats json tag isavailable also at 



struct field tag jsonstatus omitempty dbstatus not compatible with reflectstructtagget suspicious space in struct tag value



struct field tag json u not compatible with reflectstructtagget bad syntax for struct tag value



struct field tag jsonid omitempty dbid not compatible with reflectstructtagget suspicious space in struct tag value



struct field tag jsonendtime omitempty dbendtime not compatible with reflectstructtagget suspicious space in struct tag value



struct field  repeats json tag isavailable also at 



struct field tag jsonmessage omitempty dbmessage not compatible with reflectstructtagget suspicious space in struct tag value





 expected behavior

go vet structtag  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet structtag 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
264,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic monitor

 current behavior

go vet tests  finds  issues

messageline of code

exampleaddinterfacefromrawline refers to unknown identifier addinterfacefromrawline





 expected behavior

go vet tests  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet tests 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
265,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops gotc library

 current behavior

go vet unmarshal  finds  issues

messageline of code

call of unmarshal passes nonpointer as second argument





 expected behavior

go vet unmarshal  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet unmarshal 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
266,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic ops ort

 current behavior

go vet unreachable  finds  issues

messageline of code

unreachable code






 expected behavior

go vet unreachable  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet unreachable 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
267,"when the to ui was formally decommissioned the bulk of the ui routes were disabled



the following ui routes are still enabled


  gendbdump  get db dump
rgetdbdumpover authenticated   notldap   to gendbdumpdbdump namespace  namespace 

  health  parameters for rascal
rgethealthto healthhealthprofile namespace  namespace 
rgethealthfullto healthhealthfull namespace  namespace 
rgethealthcdnnameto healthrascalconfig namespace  namespace 

  options
roptionsto cdnoptions namespace  namespace 
roptionsto cdnoptions namespace  namespace 

  ort
 authenticated   notldap   to  namespace  namespace 
rrouteorthostnamepackagesviagetover authenticated   notldap   to ortgetpackageversions namespace  namespace 
rrouteorthostnamechkconfigviagetover authenticated   notldap   to ortgetchkconfig namespace  namespace 

 select available profile ds or server
rgetavailableprofileparamidover authenticated   notldap   to profileavailableprofile namespace  namespace 
rrouteprofileidexportviagetover authenticated   notldap   to profileexport namespace  namespace 

 flashandclose is a helper for the trafficopsgolang migration to allow go handlers to intercept gui routes do their work then redirect to this to perform the gui operation
rgettoolsflashandclosemsgover authenticated   notldap   to toolsflashandclose namespace  namespace 

  topology  ccr config rewrote in json
rroutegenfilesmodebycdnnamecdnnamecrconfigviagetover authenticated   notldap   to topologyccrconfig namespace  namespace 
rgetcrconfigsnapshotscdnnamecrconfigjsonover authenticated   notldap   to snapshotgetcdnsnapshot namespace  namespace 

  update bit  process updates  legacy stuff
rgetupdatehostnameover authenticated   notldap   to serverreadupdate namespace  namespace 
rpostupdatehostnameover authenticated   notldap   to serverpostupdate namespace  namespace 
rpostpostupdatequeueidover authenticated   notldap   to serverpostupdatequeue namespace  namespace 
rpostpostupdatequeuecdncachegroupover authenticated   notldap   to serverpostupdatequeue namespace  namespace 

  utils
rgetutilsclosefancyboxover authenticated   notldap   to utilsclosefancybox namespace  namespace 

 deprecated  see apiversionservers and 
 duplicate route
rgethealthdataserverover authenticated   notldap   to serverindexresponse namespace  namespace 

 select  from table where idid
rgetserverbyididover authenticated   notldap   to serverserverbyid namespace  namespace 


for many of these ie getupdatehostname there are api alternatives and any tc component ie ort that is using these routes needs to switch to the api alternative so the ui route can be disabled and eventually deleted

im also guessing that many of these are simply not used at all

and for the ones that are being used but no api alternative exists an api alternative should be create in routesgo












",TD,TD
268,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic router tester go

 current behavior

go vet httpresponse  finds  issues

messageline of code

using resp before checking for errors






 expected behavior

go vet httpresponse  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet httpresponse 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
269,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops gotc library

 current behavior

go vet unmarshal  finds  issues

messageline of code

call of unmarshal passes nonpointer as second argument





 expected behavior

go vet unmarshal  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet unmarshal 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
270,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops api tests
  traffic ops ort

 current behavior

go vet loopclosure  finds  issues

messageline of code

loop variable pl captured by func literal






loop variable pp captured by func literal







 expected behavior

go vet loopclosure  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet loopclosure 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
271,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic monitor
  traffic router tester go

 current behavior

go vet structtag  finds  issues

messageline of code

struct field asn has json tag but is not exported



struct field tag jsonstarttime omitempty dbstarttime not compatible with reflectstructtagget suspicious space in struct tag value



struct field  repeats json tag isavailable also at 



struct field tag jsonstatus omitempty dbstatus not compatible with reflectstructtagget suspicious space in struct tag value



struct field tag json u not compatible with reflectstructtagget bad syntax for struct tag value



struct field tag jsonid omitempty dbid not compatible with reflectstructtagget suspicious space in struct tag value



struct field tag jsonendtime omitempty dbendtime not compatible with reflectstructtagget suspicious space in struct tag value



struct field  repeats json tag isavailable also at 



struct field tag jsonmessage omitempty dbmessage not compatible with reflectstructtagget suspicious space in struct tag value





 expected behavior

go vet structtag  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet structtag 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
272,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic ops ort

 current behavior

go vet unreachable  finds  issues

messageline of code

unreachable code






 expected behavior

go vet unreachable  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet unreachable 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
273,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops unit tests

 current behavior

go vet lostcancel  finds  issues

messageline of code

this return statement may be reached without using the canceltx var defined on line 



the cancel function returned by contextwithtimeout should be called not discarded to avoid a context leak
click to expand  lines






























the canceltx function is not used on all paths possible context leak



the cancel function returned by contextwithdeadline should be called not discarded to avoid a context leak





 expected behavior

go vet lostcancel  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet lostcancel 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
274,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic monitor

 current behavior

go vet tests  finds  issue

messageline of code

exampleaddinterfacefromrawline refers to unknown identifier addinterfacefromrawline





 expected behavior

go vet tests  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet tests 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
275,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box enroller
  experimental traffic ops service for auth
  traffic ops ort

 current behavior

go vet printf  finds  issues

messageline of code

println arg list ends with redundant newline



infof format s has arg pid of wrong type int



printf format s has arg cfgtoinsecure of wrong type bool



printf call has arguments but no formatting directives



printf format s reads arg  but call has  arg



infof format s has arg sname of wrong type string





 expected behavior

go vet printf  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet printf 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
276,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  grove

 current behavior

go vet copylocks  finds  issue

messageline of code

assignment copies lock value to newtransport nethttptransport contains syncmutex





 expected behavior

go vet copylocks  should find  issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go vet copylocks 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
277,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box

 current behavior

cdn in a box runs the python implementation of ort on its caches

 new behavior

cdn in a box should run  the go implementation of ort version of ort on its caches  will be the default ort implementation when  is merged

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section





 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section

the main challenge to overcome for  is that  as well as trafficopsortpl relies on systemd in order to start and check the status of trafficserver systemd is relatively straightforward to use in a centos  docker container but not in centos  example of an error in a centos  docker container without systemd support

go
error   error verifying system services unable to enable service trafficserver error executing binsystemctl failed to get dbus connection no such file or directory


ideally we wouldnt need to use systemd in docker containers see  without a  flag to avoid systemd though the edge  and  services would need to  when built for either centos  or centos 

    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",TD,Not_TD
278,"traffic ops golang riaksvc is currently hardcoded there are a very small number of functions we do on riak 

by moving riak to a plugin tc users will be able to use any secure database making it easy to move away from riak if it doesnt suit their use case 

it will also allow us to provide multiple secure db implementations in tc itself 

it will also allow us to implement a trivial file or memory db so users developing and testing tc could run without the additional work of setting up riak making developing debugging and trying out tc easier

i suggest implementing the plugin hook as a hook which runs on initialization and plugins return a securedb interface which implements the necessary functions to load and store keys",TD,TD
279,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  tc cache config integration tests

 current behavior

currently the orttest container in the the  integration tests uses a systemctl shim that returns exit code  if the service provided is trafficserver without printing anything or startingstopping trafficserver

if the  integration tests are made to use  which passes the command given to the trafficserver initscript and returns the exit code as follows

systemctl command  trafficserver initscript command
  
systemctl start trafficserver  trafficserver start
systemctl stop trafficserver  trafficserver stop
systemctl status trafficserver  trafficserver status
systemctl enable trafficserver  echo created symlink etcsystemdsystemsocketstargetwantsbasename servicefile  servicefile

then the integration tests will fail when trying to check the status of trafficserver

go

debug   setting change applied for 
       stdout set tshome from the rpm config file  list opttrafficserver
        tshome opttrafficserver tsconfigdir opttrafficserveretctrafficserver
        
        info    calling with mode syncds pluginpackagesinstalled  changedconfigfiles 
        info    returned reload
        info   ispackageinstalled trafficserver found  in cache returning true
        error   failed to start services getting trafficserver service status could not get status for service trafficserver
        
        
info   configuration initialized
info   url  user admin pass len 
info   to url string 
info   to url 
info   toreqnewnew logged into in to traffic ops 
info   getting data updatestatus
info   getretry  retries  took 
     expected updatepending false after syncds run
      deletetesttypes 
user trafficops password len  hostname db db trafficops
 end of  tests 
 fail  
fail
exit status 
fail	githubcomapachetrafficcontrolcacheconfigtestingorttests	
error ort tests failure



 expected behavior

the  integration tests should successfully start apache traffic server

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

  shell
    cp infrastructurecdninaboxcachesystemctlsh cacheconfigtestingdockerorttestsystemctlsh
    

 place the rpms and build the docker images for the  integration tests

 run the  integration tests


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",TD,Not_TD
280," im submitting a 
  other

 traffic control components affected 
  traffic ops
  unknown

 current behavior
traffic ops api responses frequently return our custom format for datetimes yyyymmdd hhmmsszz   is the actual go format string

 expected behavior
the traffic ops api in the latest api version where the behavior is breakable should respond with  date strings

 minimal reproduction of the problem with instructions
make most any to api request",TD,Not_TD
281,"many to client objects are missing nullable objects and missing returning reqinf

we need to go through and add all of these and mark functions missing either as  deprecated

nullable objects are necessary to distinguish missing from empty values and reqinf is necessary for clients to get the ip which is important to users if theres an error or unexpected behavior and to is behind a gslb",TD,TD
282,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box

 current behavior

accompanying the june  centos  release hwloclibs and other libraries updated breaking compatibility with the   rpm that we use for the caches in the cdn in a box attempting to run trafficserver manually results in a shared library error being logged to varlogtrafficservertrafficserverstderr


usrbintrafficcop error while loading shared libraries  cannot open shared object file no such file or directory


this breaks the cdninabox ci github actions workflow

 expected behavior

traffic server should run without any shared library issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run trafficcop to see the shared library error
shell
dockercompose build nocache parallel edge
dockercompose run rm edge trafficcop


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section

   installing  previous version instead of  current version is not an option the package is not found
    
     docker run rm  dnf install 
    centos linux   appstream                       mbs   mb     
    centos linux   baseos                          mbs   mb     
    centos linux   extras                           kbs   kb     
    no match for argument 
    error unable to find a match 
    

   the dockerfile already  for libtcl libncursesw and libtinfo if  is symlinked to  and trafficcop is started

    shell
    ln s  
    trafficcop stdout
    

    then trafficserver crashes lets not pursue the centos  ats  rpm on centos  any further

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
283,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box

 current behavior

cdn in a box caches run  even on centos 

 new behavior

cdn in a box should run traffic server 

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

shell
 dockercompose run rm edge rpm q trafficserver
creating cdninaboxedgerun  done




    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",TD,TD
284," im submitting a 
  other

 traffic control components affected 
  traffic ops

 current behavior
the deliveryservicesrequest endpoint exists

 expected behavior
it doesnt existt

 minimal reproduction of the problem with instructions
make a request to deliveryservicesrequest at the latest api version notice that a  response is not returned

 anything else
this endpoint was used internally at comcast as a part of a process that is no longer used it represents a point of confusion with actual delivery service requests and some additional testing and usage complexity",TD,Not_TD
285,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box

 current behavior

accompanying the june  centos  release hwloclibs and other libraries updated breaking compatibility with the   rpm that we use for the caches in the cdn in a box attempting to run trafficserver manually results in a shared library error being logged to varlogtrafficservertrafficserverstderr


usrbintrafficcop error while loading shared libraries  cannot open shared object file no such file or directory


this breaks the cdninabox ci github actions workflow

 expected behavior

traffic server should run without any shared library issues

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run trafficcop to see the shared library error
shell
dockercompose build nocache parallel edge
dockercompose run rm edge trafficcop


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section

   installing  previous version instead of  current version is not an option the package is not found
    
     docker run rm  dnf install 
    centos linux   appstream                       mbs   mb     
    centos linux   baseos                          mbs   mb     
    centos linux   extras                           kbs   kb     
    no match for argument 
    error unable to find a match 
    

   the dockerfile already  for libtcl libncursesw and libtinfo if  is symlinked to  and trafficcop is started

    shell
    ln s  
    trafficcop stdout
    

    then trafficserver crashes lets not pursue the centos  ats  rpm on centos  any further

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
286,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box

 current behavior

cdn in a box caches run  even on centos 

 new behavior

cdn in a box should run traffic server 

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

shell
 dockercompose run rm edge rpm q trafficserver
creating cdninaboxedgerun  done




    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",TD,Not_TD
287," im submitting a 
  other

 traffic control components affected 
  traffic ops

 current behavior
the deliveryservicesrequest endpoint exists

 expected behavior
it doesnt existt

 minimal reproduction of the problem with instructions
make a request to deliveryservicesrequest at the latest api version notice that a  response is not returned

 anything else
this endpoint was used internally at comcast as a part of a process that is no longer used it represents a point of confusion with actual delivery service requests and some additional testing and usage complexity",TD,Not_TD
288,currently trafficops uses postgresql   right now the current major release is postgresql   the final update for postgresql  will be  under the current versioning plan,TD,Not_TD
289," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic stats

 current behavior
traffic stats currently uses this logging library which hasnt had a commit since jan    

 new behavior
since all of our other go components use the inrepo  library it might make sense for ts to use that logging library as well
",TD,TD
290,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  github actions

 current behavior

a number of our github actions shell scripts include code to check the go version in goversion and download that version 

 new behavior

go version should be be set in the workflow files by
  checking the version in the goversion file
    
    note that id also needs to be set for this step see 
  using the  action with that version
    

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section












    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license
",TD,Not_TD
291,"this parameter is now unused and removed in patchessql which is run after seedssql so this seed should be cleaned up and removed from seedssql otherwise db upgrades will continue to add the parameter and remove the parameter every time

",TD,TD
292,traffic routers package structure is currently comcomcastcdntrafficcontroltrafficrouter since we have moved to apache it should be orgapachetrafficcontroltrafficrouterauthor david neumanjira link a href,TD,Not_TD
293,"the question is is the deliveryservicemultisiteoriginalgorithm  even used anymore or was it abandoned when delivery service profiles were introduced 

if it is fact used it needs to be added to the to ui and the tp ui and im guessing it only pertains to dns and http delivery services

if it is not used the column should be deleted from the database in my opinion",TD,TD
294,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior


the apicapability table references  endpoints that the traffic ops api does not support in any version

http method  to api endpoint
  
delete  apicapabilities
get  apicapabilities
post  apicapabilities
put  apicapabilities
get  asns
delete  cachegroupfallbacks
get  cachegroupfallbacks
post  cachegroupfallbacks
put  cachegroupfallbacks
get  cachegroupparameter
get  cachegroups
get  cachegroupsparameteravailable
get  cachegroupstrimmed
get  cachegroupsunassignedparameters
delete  capabilities
get  capabilities
post  capabilities
put  capabilities
get  cdnsconfigfilesats
get  cdnsconfigs
get  cdnsconfigsrouting
get  cdnsfederations
get  cdns
get  cdnsnamednsseckeysdelete
get  cdnsname
put  cdnssnapshot
get  cdnsusageoverview
get  deliveryservicematches
delete  deliveryserviceserver
get  deliveryservices
get  deliveryserviceshostnamehostnamesslkeys
get  deliveryservicesregexes
get  deliveryservicesstate
get  deliveryservicesunassignedservers
get  deliveryservicesxmlidsslkeysdelete
delete  deliveryserviceuser
post  deliveryserviceuser
get  divisions
delete  divisionsname
get  divisionsname
post  divisionsregions
delete  federationresolvers
get  hwinfo
get  jobs
get  keysping
get  logsdays
get  parameters
get  parametersprofile
get  parametersprofiles
get  parametersunassignedprofiles
post  parametersvalidate
get  physlocations
get  physlocationstrimmed
get  profilesconfigfilesats
get  profiles
get  profilestrimmed
get  profilesunassignedparameters
delete  regions
get  regions
delete  regionsname
get  regionsname
post  regionsphyslocations
get  riakbucketkeyvalues
get  riakping
get  riakstats
get  serverschecks
get  serversconfigfilesats
get  serversconfigfilesats
get  servers
get  servershostnamedetails
get  serversstatus
get  serverstotals
post  serversupdatestatus
put  snapshot
post  statssummarycreate
get  statuses
get  steeringtargets
get  tenants
post  toextensionsdelete
get  toextensions
post  toextensions
get  trafficmonitorstats
get  types
get  typestrimmed
get  usercurrentjobs
post  usercurrentjobs
post  usercurrentupdate
get  usersdeliveryservicesavailable
get  usersdeliveryservices

the traffic ops api supports  endpoints not registered in the apicapability table

http method  to api endpoint
  
get  about
delete  acmeaccounts
get  acmeaccounts
post  acmeaccounts
get  acmeaccountsproviders
put  acmeaccounts
post  acmeautorenew
delete  asns
put  asns
get  asyncstatus
get  cachestats
delete  cdnlocks
get  cdnlocks
post  cdnlocks
delete  cdnnotifications
get  cdnnotifications
post  cdnnotifications
post  cdnsdnsseckeyskskgenerate
get  cdnsdnsseckeysrefresh
get  currentstats
get  deliveryservicerequestsassign
get  deliveryservicerequestsstatus
delete  deliveryserviceserver
post  deliveryservicessslkeysgenerateacme
post  deliveryservicessslkeysgenerateletsencrypt
delete  deliveryservicesurlkeys
delete  deliveryservicesxmlidsslkeys
post  deliveryservicesxmlidsslkeysrenew
delete  deliveryservicesxmlidurlkeys
delete  federationresolvers
get  federationsall
post  letsencryptautorenew
get  letsencryptdnsrecords
get  ping
get  plugins
delete  regions
put  servercapabilities
delete  servercheckextensions
get  servercheckextensions
post  servercheckextensions
get  servercheck
get  serversdeliveryservices
post  serversdeliveryservices
post  serversupdate
get  serversupdatestatus
put  snapshot
post  statssummary
get  steering
delete  topologies
get  topologies
post  topologies
put  topologies
post  topologiesqueueupdate

 expected behavior

supported endpoints and endpoints registered in the apicapability table should be in onetoone correspondence we should also consider including an additional column specifying which api version is supported although get apicapabilities would not return this info since the api is already versioned in the url

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
apicapabilitylinestrafficopsappdbseedssql sed e into apicapabilityid sgetpostputdelete   s    sort
routeslinestrafficopstrafficopsgolangroutingroutesgo sed e apiversiond smethodgetpostputdelete   sgetpostputdeleteu s sg s    sort  uniq
template cat
registered in apicapabilities table but unsupported
comm  echo apicapabilitylines echo routeslines

supported endpoints that are not registered in apicapabilities table
comm  echo apicapabilitylines echo routeslines
template


 anything else
we should have a test to verify that the apicapability table is uptodate


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",TD,Not_TD
295,if an actionable query string is present in the incoming url strip it to prevent duplication of object storage in case the delivery services setting is to consider the qstring at the edge if it is leaving the qstring in place will potentially cause the same object to be stored twice one object with the actionable tr query parameters and one without if there are clients that make both types of requestsspecific query strings are formatjson trredfalse and fakeclientipaddressfooauthor jeff elsloojira link a hreffound version ,TD,Not_TD
296,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache software foundation security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure



 for support questions use the
 or 
 before submitting please search github for a similar issue or pr 

 im submitting a 


  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior

the following code needs to be updated to use 











 expected  new behavior


 minimal reproduction of the problem with instructions

if the current behavior is a bug or you can illustrate your feature request better with an example
please provide the steps to reproduce and include the applicable tc version


 anything else



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,Not_TD
297,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  github actions

 current behavior

a number of our github actions shell scripts include code to check the go version in goversion and download that version 

 new behavior

go version should be be set in the workflow files by
  checking the version in the goversion file
    
    note that id also needs to be set for this step see 
  using the  action with that version
    

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

all of this code should be removed















    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license
",TD,Not_TD
298,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic ops database

 current behavior

our database migrations have not been collapsed since  first included in 

 new behavior

we should squash database migrations in each major release including the upcoming  release

all migrations included in the  branch should be collapsed but migrations that will be new to the  branch should remain uncollapsed


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license
",TD,TD
299,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

 ansible playbooks

 current behavior

the following references to the traffic ops api in our ansible playbooks need to be updated

 http method  endpoint  line of code 
     
 post     
 get     
      
 get     
 get     
 post     
 get     
 post     
 get     
 put     
 get     
 get     
      

 new behavior

those lines of code should reference api  reference api  or be removed

see  for which traffic ops api  endpoint to update each api  endpoint to


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",TD,Not_TD
300,"traffic ops uses goose for database migration goose is unmaintained and has been for years we need to move to a maintained db migration tool for security bug fixes ease of use etc

the most difficult part of this will be removing the  go migration we have which wont be supported by a generic sql migration tool it will need to be converted to real sql alternatively if we squash the migrations into the default seeds in a release including that migration that may solve the problem or it may be equally difficult to squash",TD,TD
301,"i wrote a test a while ago that compares nullable structs vs nonnullable using reflection  the test is not run by default yet protected by nullable tag  but running it manually reveals a number of inconsistencies that should be fixed   note that one line must be removed from the test because the struct it compares  had been removed


 cd libgotc go test tags nullable
 fail testnullstructs 
     tcasnlastupdated string and tcasnnullablelastupdated tctimenomod have mismatched types
     tcdeliveryservice has  fields but tcdeliveryservicenullable has 
     field consistenthashregex found on tcdeliveryservice but not tcdeliveryservicenullable
      has  fields but  has 
     field deepcachingtype found on  but not 
     field dnsbypasscname found on  but not 
       and  int have mismatched types
     field trresponseheaders found on  but not 
     field dnsbypasscname found on  but not 
     field geolimitcountries found on  but not 
     field geolimitredirecturl found on  but not 
     field originshield found on  but not 
     field sslkeyversion found on  but not 
     tcprofile has  fields but tcprofilenullable has 
     field parameter found on tcprofile but not tcprofilenullable
     tcsteeringtargetdeliveryserviceid int and tcsteeringtargetnullabledeliveryserviceid  have mismatched types
     tcsteeringtargettargetid int and tcsteeringtargetnullabletargetid  have mismatched types
fail
exit status 
fail	githubcomapachetrafficcontrollibgotc	",TD,TD
302,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior


the apicapability table references  endpoints that the traffic ops api does not support in any version

http method  to api endpoint
  
delete  apicapabilities
get  apicapabilities
post  apicapabilities
put  apicapabilities
get  asns
delete  cachegroupfallbacks
get  cachegroupfallbacks
post  cachegroupfallbacks
put  cachegroupfallbacks
get  cachegroupparameter
get  cachegroups
get  cachegroupsparameteravailable
get  cachegroupstrimmed
get  cachegroupsunassignedparameters
delete  capabilities
get  capabilities
post  capabilities
put  capabilities
get  cdnsconfigfilesats
get  cdnsconfigs
get  cdnsconfigsrouting
get  cdnsfederations
get  cdns
get  cdnsnamednsseckeysdelete
get  cdnsname
put  cdnssnapshot
get  cdnsusageoverview
get  deliveryservicematches
delete  deliveryserviceserver
get  deliveryservices
get  deliveryserviceshostnamehostnamesslkeys
get  deliveryservicesregexes
get  deliveryservicesstate
get  deliveryservicesunassignedservers
get  deliveryservicesxmlidsslkeysdelete
delete  deliveryserviceuser
post  deliveryserviceuser
get  divisions
delete  divisionsname
get  divisionsname
post  divisionsregions
delete  federationresolvers
get  hwinfo
get  jobs
get  keysping
get  logsdays
get  parameters
get  parametersprofile
get  parametersprofiles
get  parametersunassignedprofiles
post  parametersvalidate
get  physlocations
get  physlocationstrimmed
get  profilesconfigfilesats
get  profiles
get  profilestrimmed
get  profilesunassignedparameters
delete  regions
get  regions
delete  regionsname
get  regionsname
post  regionsphyslocations
get  riakbucketkeyvalues
get  riakping
get  riakstats
get  serverschecks
get  serversconfigfilesats
get  serversconfigfilesats
get  servers
get  servershostnamedetails
get  serversstatus
get  serverstotals
post  serversupdatestatus
put  snapshot
post  statssummarycreate
get  statuses
get  steeringtargets
get  tenants
post  toextensionsdelete
get  toextensions
post  toextensions
get  trafficmonitorstats
get  types
get  typestrimmed
get  usercurrentjobs
post  usercurrentjobs
post  usercurrentupdate
get  usersdeliveryservicesavailable
get  usersdeliveryservices

the traffic ops api supports  endpoints not registered in the apicapability table

http method  to api endpoint
  
get  about
delete  acmeaccounts
get  acmeaccounts
post  acmeaccounts
get  acmeaccountsproviders
put  acmeaccounts
post  acmeautorenew
delete  asns
put  asns
get  asyncstatus
get  cachestats
delete  cdnlocks
get  cdnlocks
post  cdnlocks
delete  cdnnotifications
get  cdnnotifications
post  cdnnotifications
post  cdnsdnsseckeyskskgenerate
get  cdnsdnsseckeysrefresh
get  currentstats
get  deliveryservicerequestsassign
get  deliveryservicerequestsstatus
delete  deliveryserviceserver
post  deliveryservicessslkeysgenerateacme
post  deliveryservicessslkeysgenerateletsencrypt
delete  deliveryservicesurlkeys
delete  deliveryservicesxmlidsslkeys
post  deliveryservicesxmlidsslkeysrenew
delete  deliveryservicesxmlidurlkeys
delete  federationresolvers
get  federationsall
post  letsencryptautorenew
get  letsencryptdnsrecords
get  ping
get  plugins
delete  regions
put  servercapabilities
delete  servercheckextensions
get  servercheckextensions
post  servercheckextensions
get  servercheck
get  serversdeliveryservices
post  serversdeliveryservices
post  serversupdate
get  serversupdatestatus
put  snapshot
post  statssummary
get  steering
delete  topologies
get  topologies
post  topologies
put  topologies
post  topologiesqueueupdate

 expected behavior

supported endpoints and endpoints registered in the apicapability table should be in onetoone correspondence we should also consider including an additional column specifying which api version is supported although get apicapabilities would not return this info since the api is already versioned in the url

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
apicapabilitylinestrafficopsappdbseedssql sed e into apicapabilityid sgetpostputdelete   s    sort
routeslinestrafficopstrafficopsgolangroutingroutesgo sed e apiversiond smethodgetpostputdelete   sgetpostputdeleteu s sg s    sort  uniq
template cat
registered in apicapabilities table but unsupported
comm  echo apicapabilitylines echo routeslines

supported endpoints that are not registered in apicapabilities table
comm  echo apicapabilitylines echo routeslines
template


 anything else
we should have a test to verify that the apicapability table is uptodate


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",TD,Not_TD
303,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic router

 current behavior

in order to avoid  traffic router integration tests require an actual traffic monitor in order to run
 
 
 
 

 new behavior

the tr integration tests should use a mock traffic monitor server and mock traffic ops server like the external tests use


 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

 remove trafficroutercoresrctestconftrafficmonitorproperties if it exists
 run the integration tests watch them fail
    java
    mvn  verify
    


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",TD,Not_TD
304,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic ops

 current behavior
the traffic ops rpm requires the  package to be installed as a dependency

 new behavior
the traffic ops rpm should not require the  package to be installed as a dependency the package description contains the following
 the postgresqldevel package contains the header files and libraries
needed to compile c or c applications which will directly interact
with a postgresql database management server

traffic ops is not a c or c application  it is a go application now this package mightve been necessary for toperl but it should no longer be necessary for togo removing this as a package dependency makes the install more easy and lightweight

",TD,TD
305," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
each changelog entry currently includes the following fields
typescript
export interface log 
	id number
	lastupdated date
	level apichange
	message string
	ticketnum null
	user string



 new behavior
ids have no purpose for changelog entries because they are immutable by nature level used to have meaning when changes could be made through either the nowremoved traffic ops ui or the api where it would show that distinction but that no distinction no longer exists and was always of questionable merit at any rate imo so im not sure historical preservation is a good reason to keep it around ticketnum has not only no known purpose but also theres no way to populate it so its just always null theres no reasonable way i can think of to make use of that field finally lastupdated is not necessarily useless its just a bad name imo a changelog entry is never updated it is only created

with all this in mind i propose a new format for logs output
typescript
export interface log 
	
	  this should be an  timestamp instead
	  of the custom format used today for lastupdated
	 
	date date
	message string
	user string



this isnt a big enough change to merit a blueprint imo but i could do that too",TD,TD
306,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic monitor

 current behavior


tm first requests the monitoring config snapshot then requests the crconfig snapshot in order to create its internal trafficmonitorconfigmap representation it currently overwrites the traffic monitor data in the monitoring snapshot with data from the crconfig snapshot most likely due to the monitoring config missing traffic monitor  and  addresses it will also fall back to using crconfig delivery service data if not present in the monitoring snapshot although this should no longer be an issue as of  since the monitoring config and crconfig are now snapshotted together this is entirely unnecessary

 new behavior

 traffic ops should populate the ip and  fields in the trafficmonitors array of the monitoring config snapshot instead of leaving them blank

      
        profile mytmprofile
        status online
        port 
        cachegroup foo
        hostname 
        fqdn examplecom
        ip 
         
      

 traffic ops should exclude delivery service data from the monitoring config snapshot that does not belong to the given cdn being snapshotted it currently includes all delivery services across all cdns
 tm should be updated to only overwrite the traffic monitor data in its monitoring config snapshot in the code linked above with crconfig data if the monitoring snapshot is still missing  and  data otherwise it should never have to overwrite the monitoring config data eventually we can remove that fallback code entirely once its assumed that tm config snapshots will always have ip data going forward
",TD,TD
307," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
shortname exists

 new behavior
shortname is removed im just not sure what its for

",TD,TD
308," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
currently its a string that represents an array of strings separated by commas eg usca

 new behavior
arrays should be arrays eg  if the parser is smart enough and if we care to do it this way that could be done in a backwardcompatible manner such that if the field is a string its parsed as a commadelimited array and if its an array its parsed as such with the right validation currently it has none but country codes cant for example legally contain commas the storage format could even be kept the same which not only obviates the need for a migration but trivializes supporting old api versions

",TD,TD
309,ive noticed that many api endpoints support query parameters that are undocumented for example  mention that a possible parameter to pass to get   is tenant to filter by tenant but that endpoint actually supports other parameters like eg username to filter by a specific username those parameters ought to be documented,TD,TD
310," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
if a user requests a password reset a login token is generated for them the token is never removed until the user actually changes his or her password but successfully authenticating with a token grants a valid mojolicious cookie which is refreshed on every subsequent successful request so users choose to take advantage of this token and never change their password so it sticks around for years this is dangerous for two reasons

 tokens are not encrypted at rest in the database unlike passwords yet they are as powerful as passwords so if a password needs to be encrypted at rest then so does a token imo
 unlike a password which is only ever presented by the client to the server a login token is sent out from the server over smtp as a part of a link in an email because the token is not singleuse and because the only way to remove it is by updating the users password this is exactly equivalent to sending the users unencrypted password via email which youd never do

 new behavior
tokens should be singleuse i know this feature is being used in productiontestingdevdemo environments eg cdninaboxs extension user but we now have oauth support in to as of a couple years ago if memory serves so if tokenbased authentication is desired it can still be done its possibly difficult to switch but i think its worth it

",TD,TD
311,"it seems out of place to allow  to satisfy our  java  requirements


sudo yum deplist trafficrouter
loaded plugins fastestmirror
loading mirror speeds from cached hostfile
package  
  dependency binsh
   provider  
  dependency apr  
   provider  
   provider  
  dependency java  
   provider  
   provider  
   provider  
   provider  
   provider  
   provider  
  dependency tomcat  
   provider  
  dependency tomcatnative  
   provider  
",TD,Not_TD
312,"most of the client implementations for endpoints do not take a nullable struct as input and dont return a nullable struct as output this means that a client is forced to provide a value for optional fields of the struct if the input struct was nullable the client would be able to set optional fields to nil rather than setting an optional value they dont wantneed this would also make it possible to test passing nil values for optional fields in the go api integration tests which is a current limitation that greatly reduces possible test coverage

also most of the client methods return tcalerts rather than the corresponding nullable struct response for that endpoint which means that the full json response returned via the api is not decoded this means on a post or put request that the client is forced to make a followup get request in order the get the newly createdupdated resource which is very inefficient and also reduces our ability to test api responses in the go api integration tests

additionally some client methods dont return a reqinf struct but all the client methods should

this issue was discussed on the mailing list ",TD,TD
313,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic ops

 current behavior
the traffic ops rpm requires the  package to be installed as a dependency

 new behavior
the traffic ops rpm should not require the  package to be installed as a dependency the package description contains the following
 the postgresqldevel package contains the header files and libraries
needed to compile c or c applications which will directly interact
with a postgresql database management server

traffic ops is not a c or c application  it is a go application now this package mightve been necessary for toperl but it should no longer be necessary for togo removing this as a package dependency makes the install more easy and lightweight

",TD,Not_TD
314,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic monitor

 current behavior


tm first requests the monitoring config snapshot then requests the crconfig snapshot in order to create its internal trafficmonitorconfigmap representation it currently overwrites the traffic monitor data in the monitoring snapshot with data from the crconfig snapshot most likely due to the monitoring config missing traffic monitor  and  addresses it will also fall back to using crconfig delivery service data if not present in the monitoring snapshot although this should no longer be an issue as of  since the monitoring config and crconfig are now snapshotted together this is entirely unnecessary

 new behavior

 traffic ops should populate the ip and  fields in the trafficmonitors array of the monitoring config snapshot instead of leaving them blank

      
        profile mytmprofile
        status online
        port 
        cachegroup foo
        hostname 
        fqdn examplecom
        ip 
         
      

 traffic ops should exclude delivery service data from the monitoring config snapshot that does not belong to the given cdn being snapshotted it currently includes all delivery services across all cdns
 tm should be updated to only overwrite the traffic monitor data in its monitoring config snapshot in the code linked above with crconfig data if the monitoring snapshot is still missing  and  data otherwise it should never have to overwrite the monitoring config data eventually we can remove that fallback code entirely once its assumed that tm config snapshots will always have ip data going forward
",TD,TD
315," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableasnstableasnscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableasnstableasnscontrollerjs table uses the faster actively maintained aggrid component
",TD,Not_TD
316," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecachegroupasnstablecachegroupasnscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecachegroupasnstablecachegroupasnscontrollerjs table uses the faster actively maintained aggrid component
",TD,Not_TD
317," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecachegroupstaticdnsentriestablecachegroupstaticdnsentriescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecachegroupstaticdnsentriestablecachegroupstaticdnsentriescontrollerjs table uses the faster actively maintained aggrid component
",TD,Not_TD
318," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecapabilitiestablecapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecapabilitiestablecapabilitiescontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
319," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecapabilityendpointstablecapabilityendpointscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecapabilityendpointstablecapabilityendpointscontrollerjs table uses the faster actively maintained aggrid component
",TD,Not_TD
320," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnfederationdeliveryservicestableassignfederationdeliveryservicescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnfederationdeliveryservicestableassignfederationdeliveryservicescontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
321," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnfederationdeliveryservicestablecdnfederationdeliveryservicescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnfederationdeliveryservicestablecdnfederationdeliveryservicescontrollerjs table uses the faster actively maintained aggrid component
",TD,Not_TD
322," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnfederationstablecdnfederationscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnfederationstablecdnfederationscontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
323," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnfederationuserstableassignfederationuserscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnfederationuserstableassignfederationuserscontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
324," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnfederationuserstablecdnfederationuserscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnfederationuserstablecdnfederationuserscontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
325," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecdnstablecdnscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecdnstablecdnscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
326," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablecoordinatestablecoordinatescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablecoordinatestablecoordinatescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
327," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryservicecapabilitiestabledeliveryservicecapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryservicecapabilitiestabledeliveryservicecapabilitiescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
328," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryserviceoriginstabledeliveryserviceoriginscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryserviceoriginstabledeliveryserviceoriginscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
329," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryserviceregexestabledeliveryserviceregexescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryserviceregexestabledeliveryserviceregexescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
330," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryservicestaticdnsentriestabledeliveryservicestaticdnsentriescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryservicestaticdnsentriestabledeliveryservicestaticdnsentriescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
331," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryservicetargetstabledeliveryservicetargetscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryservicetargetstabledeliveryservicetargetscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
332," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledeliveryserviceuserstabledeliveryserviceuserscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledeliveryserviceuserstabledeliveryserviceuserscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
333," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledivisionregionstabledivisionregionscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledivisionregionstabledivisionregionscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
334," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabledivisionstabledivisionscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabledivisionstabledivisionscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
335," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableendpointstableendpointscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableendpointstableendpointscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
336," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablefederationresolverstableassignfedresolverscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablefederationresolverstableassignfedresolverscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
337," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableoriginstableoriginscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableoriginstableoriginscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
338," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableparameterprofilestableparamprofilesunassignedcontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableparameterprofilestableparamprofilesunassignedcontrollerjs table uses the faster actively maintained aggrid component",TD,TD
339," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablephyslocationstablephyslocationscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablephyslocationstablephyslocationscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
340," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableprofileparameterstableprofileparamsunassignedcontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableprofileparameterstableprofileparamsunassignedcontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
341," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableprofilesparamscomparetableprofilesparamscomparecontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableprofilesparamscomparetableprofilesparamscomparecontrollerjs table uses the faster actively maintained aggrid component",TD,TD
342," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableregionphyslocationstableregionphyslocationscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableregionphyslocationstableregionphyslocationscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
343," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableregionstableregionscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableregionstableregionscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
344," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablerolecapabilitiestableassigncapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablerolecapabilitiestableassigncapabilitiescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
345," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablerolecapabilitiestablerolecapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablerolecapabilitiestablerolecapabilitiescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
346," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablerolestablerolescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablerolestablerolescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
347," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableservercapabilitiestableservercapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableservercapabilitiestableservercapabilitiescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
348," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableservercapabilitydeliveryservicestableservercapabilitydeliveryservicescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableservercapabilitydeliveryservicestableservercapabilitydeliveryservicescontrollerjs table uses the faster actively maintained aggrid component
",TD,TD
349," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableservercapabilityserverstableservercapabilityserverscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableservercapabilityserverstableservercapabilityserverscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
350," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableserverdeliveryservicestableassigndeliveryservicescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableserverdeliveryservicestableassigndeliveryservicescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
351," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableserverservercapabilitiestableserverservercapabilitiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableserverservercapabilitiestableserverservercapabilitiescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
352," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestableservicecategoriestableservicecategoriescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestableservicecategoriestableservicecategoriescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
353," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestablestatusestablestatusescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestablestatusestablestatusescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
354," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabletopologiestabletopologiescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabletopologiestabletopologiescontrollerjs table uses the faster actively maintained aggrid component",TD,TD
355," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabletopologycachegroupserverstabletopologycachegroupserverscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabletopologycachegroupserverstabletopologycachegroupserverscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
356," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrccommonmodulestabletypestaticdnsentriestabletypestaticdnsentriescontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrccommonmodulestabletypestaticdnsentriestabletypestaticdnsentriescontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
357," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrcmodulesprivatecachestatscachestatscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrcmodulesprivatecachestatscachestatscontrollerjs table uses the faster actively maintained aggrid component",TD,Not_TD
358," this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
the trafficportalappsrcmodulesprivatedeliveryservicesurlsigkeysdeliveryserviceurlsigkeyscontrollerjs table uses the jquery datatables plugin

 new behavior
the trafficportalappsrcmodulesprivatedeliveryservicesurlsigkeysdeliveryserviceurlsigkeyscontrollerjs table uses the faster actively maintained aggrid component",TD,TD
359," this improvement request usability performance tech debt etc affects these traffic control components
 traffic control client python
 traffic ops client go
 traffic ops
 traffic portal
 documentation

 current behavior
with roles and permissions being implemented capabilities have no plans for future use so they should be deprecated in api versions earlier than  and removed from  and later since they are not enforced anywhere removing the endpoint from  wont break any permissions checking even though that version still supports the old privlevel method of permissions checking

if done before permissions are fully integrated into tp the tp services can just be downgraded to use the stable api in lieu of stripping the functionality out entirely were going to need to rework that for permissions soon anyway so theres no need to make bigger changes than are necessary


 new behavior
capabilities is deprecated in api 

",TD,TD
360,"the tr api has docs 

but theyre incomplete and not in a very visible place

we should add explanations and examples of what they return

we should also probably put the router api docs in a more visible place maybe create a unified root apis doc page with links to the apis of every component",TD,TD
361," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops

 current behavior
currently its a string that represents an array of strings separated by commas eg usca

 new behavior
arrays should be arrays eg  if the parser is smart enough and if we care to do it this way that could be done in a backwardcompatible manner such that if the field is a string its parsed as a commadelimited array and if its an array its parsed as such with the right validation currently it has none but country codes cant for example legally contain commas the storage format could even be kept the same which not only obviates the need for a migration but trivializes supporting old api versions

",TD,TD
362,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box
  traffic ops

 current behavior

try making an api call to put update a delivery service that doesnt exist
you will get back an internal server error status code 
if you tail the logs youll see that this happens because the error is sql no rows in result set which is expected
 expected behavior

this action should return a  not found if the ds was not found or maybe a  bad request
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

same as mentioned above
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

i havent checked if the other resources show a similar kind of behavior maybe we need to check everything for this

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
363,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic router


 current behavior
traffic router requires a restart after the creation of very first https delivery service

 expected behavior
ssl endpoints should be set in the next csconfig polling interval  certificates polling interval with out a restart

 minimal reproduction of the problem with instructions
 create a cdn
 create a http delivery service 
 make sure tr is able to serve  
 create a https delivery service 
 request  curl vk 
 request hangs 

 workaround
 restart the tr after the creation of 
 this is required only once after the creation of the very first https ds 


",Not_TD,TD
364,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

steps
 cache group mycachegroup has a nontopology parent cache group of type orgloc
 queue updates cdnwide

get  incorrectly reports servers in cache group mycachegroup as having parentpending  true

atc versions
 master 
 

 expected behavior

get  should report servers in cache group mycachegroup as having parentpending  false because mycachegroups parent cache group is not edgeloctype or midloctype

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

this probably does not cause any problems but should still be fixed


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
365,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 


  traffic portal


 current behavior
any version of nodejs is accepted as a dependency to tp


 expected behavior
the nodejs version should either be pinned or restricted to prevent major updates to nodejs which might break tp currently the documentation says nodejs  or above is required



if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
366," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
when updating a delivery service a changelog entry is created that says ds foo id  action updated primary origin foo even if the dss orgserverfqdn wasnt changed

 new behavior
the aforementioned changelog entry should only be created if the dss orgserverfqdn is changed 

 minimal reproduction of the problem with instructions
create a delivery service then make any update it see the changelog entries
",Not_TD,Not_TD
367," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
every time a ds is created or updated the following change log entry is created when no consistent hash query params are created


ds mydsxmlid id  action created  consistent hash query params


doesnt make much sense to me

 new behavior
dont do that if nothing changed with regards to a delivery services consistent hash query params if it went from  to  or  to  or  to  then the change log makes sense otherwise nobody cares 

 minimal reproduction of the problem with instructions
create or update a delivery service notice the consistent hash query params change log entry


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
368,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops db
  ci tests

 current behavior

the  does not run our existing 

 expected behavior

the todbtests github action should run our traffic ops db tests

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section


the tests in the github action itself look valuable consider including them in the traffic ops db tests


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
369," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
i dont believe there is a way currently via tp andor the to api to see how many change log entries have been created by a particular user imo this information would be helpful when evaluating user activity

 new behavior
do one of  things or maybe both
 add changelogcount to the response payload of the user to api endpoints this would require a join to the log table
 add query param support such as get usersusername

 anything else
if this is added to the api then it needs to be added to tp as well ie 
  should show the changelogcount in the grid
  should have a new button called view change logs or something


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
370," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
in traffic control  actions are global to a cdn

 snapshotting a cdn
 queuing servers updates for a cdn

because of this incomplete changes ie delivery service changes can accidentally be pushed to the tmtr via a cdn snapshot or to caches via a cdn queue updates

 new behavior
provide a mechanism to create a cdnlevel alert to prevent users from unknowingly committing incomplete changes via a snapshot  queue updates this alert should show who created it and why and should be displayed in tp

 anything else
the alert should not lock the cdn in any way but rather provide a way to create an alert for each cdn that gets displayed in tp


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
371," im submitting a 
  bug report

 traffic control components affected 
  traffic ops
  traffic router

 current behavior
currently the output of apixsteering is unsorted this causes the response to be different each time its requested which causes tr to reload the steering data even though the steering data has not actually changed this leads to a lot of unnecessarymisleading log output in tr

 expected behavior
responses from apixsteering should be sorted by xmlid so that they only change if the actual steering data has changed

 minimal reproduction of the problem with instructions
request  multiple times observe that the ordering changes with each request",Not_TD,TD
372,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  fake origin testing tool
  grove
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic server
  traffic stats

 current behavior

we dont include the apache traffic control license in any of the rpms built from our rpm spec files

the tomcat rpm already includes the tomcat license along with all of the sources however our transitive source buildtsb apache traffic server rpm does not include the ats license

 new behavior

 the rpms build from atc componts should include the atc license
 the apache tomcat rpm should include the apache tomcat license
 the apache traffic server rpm should include the ats license

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

 build rpms
 extract the rpms using bsdtar included in 
 run find  name license to find license files


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
373," im submitting an 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
the only way to get serverchecks is to fetch all of them for all servers at once if you only wantneed them for one server you must request potentially huge amounts of garbage data and then manually sift through it for the information of interest

 new behavior
the servercheck api route supports the id query parameter to get the checks for a single server
",Not_TD,Not_TD
374,"traffic ops does not update dnssec keys on delivery service update

as far as i can tell this has been a bug forever the old perl endpoint doesnt update them either and it appears it never has

this means updating anything in a ds which changes the served fqdns eg routing name regexes will break dnssec",Not_TD,TD
375,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  fake origin testing tool
  grove
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic server
  traffic stats

 current behavior

we dont include the apache traffic control license in any of the rpms built from our rpm spec files

the tomcat rpm already includes the tomcat license along with all of the sources however our transitive source buildtsb apache traffic server rpm does not include the ats license

 new behavior

 the rpms build from atc componts should include the atc license
 the apache tomcat rpm should include the apache tomcat license
 the apache traffic server rpm should include the ats license

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

 build rpms
 run rpm ql rpm  grep license  grep v nodemodules  sort to find license files that are already included in any of our rpms


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
376," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
put usersid sets tmuserregistrationsent date to null

 expected behavior
put usersid should not touch tmuserregistrationsent date in any way if it has a value leave it if it has no value leave it 

tmuserregistrationsent is set if a user is created via post usersregister and should never be nulled once it is set it can however be updated if post usersregister is called again with the same email but it should never be nulled

 minimal reproduction of the problem with instructions
 create a user via post usersregister and provide email tenant and role
 check the database for the newly created user see that registrationsent is set to current datetime
 note the id of the newly created user
 update the newly created user via put userid and notice that registrationsent is set to null this is wrong


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
377,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  documentation
  traffic ops
  traffic portal

 current behavior

traffic portal docs shows cdn can be updated in a server

 expected behavior

the server should not allow the user to update the cdn

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

document shows cdn can be updated in a server


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
378,"hi guys

hope you are all well 

i create all my subdomains for deploying the cdninabox version changed the envariables but i have the following error when running dockercompose up build

img  altscreenshot  at    src

how can i sort that  is there a workaround 

btw wouldnt be easier to use certbotletsencrypt for generating ssl certificates 

thanks for any insights or inputs on that deployment isssue

cheers
luc michalski
",Not_TD,Not_TD
379," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops ort

 current behavior
currently ort uses a delivery services maxoriginconnections field to configureoverride the ats recordsconfig setting proxyconfighttporiginmaxconnections in ats  this setting was removed and replaced 

 new behavior
when generating configs for ats   ort should use the new settings instead",Not_TD,Not_TD
380,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report


 traffic control components affected 

  traffic ops

 current behavior

 create a ds
 generate ssl keys
 using put api  update dss cdnname using cdnid
 it updates the ds

 expected behavior

given a ds which has ssl keys assigned the cdn value shouldnt update it should give a  error response

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
381," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
currently you cannot change the name of a server capability in tp and the to api




 new behavior
allow users to edit the name

 minimal reproduction of the problem with instructions
navigate to  and create a server capability and then try to change the name

 anything else
users make mistakes or change their mind they should be able to make changes


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,TD
382,"
  improvement request usability performance tech debt etc


  traffic ops
  traffic portal

 current behavior
when creating a second third etc interface in to  only a single router hostname and router port exists

 new behavior
adding more interfaces require more routers ports tp should reflect this

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,TD
383," im submitting a 
  bug report

 traffic control components affected 
  traffic ops
  traffic router

 current behavior
currently the output of apixsteering is unsorted this causes the response to be different each time its requested which causes tr to reload the steering data even though the steering data has not actually changed this leads to a lot of unnecessarymisleading log output in tr

 expected behavior
responses from apixsteering should be sorted by xmlid so that they only change if the actual steering data has changed

 minimal reproduction of the problem with instructions
request  multiple times observe that the ordering changes with each request",Not_TD,TD
384," im submitting a 
  improvement request

 traffic control components affected 
  traffic portal

 current behavior
currently you can send a user registration in tp at  this requires an email role and tenant for the new user the result is a new user is created with

 usernewuser  true
 userusername  registration
 useremail  
 userrole  
 usertenant  

and an email is sent to the user with a link to complete the registrationie change the username and specify a desired password note once the user is updated usernewuser is set to false the newuser flag is basically used to determine if registration is complete or not

however these registrations tend to never get completed maybe the email found its way into the users spam folder or something

 new behavior
on the user page ie 

 if usernewuser  true add a field to tp to display the userregistrationsent value
 if usernewuser  true add a button to resend registration which will send the existing email role and tenant to the post apiusersregister endpointwhich will resend the registration email and reset the registrationsent value


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
385,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report


 traffic control components affected 


  traffic portal
  traffic ops


 current behavior

user can update parent tenant to have their child tenant as a new parent and the result is it will delete all the tenant from parent to the child
 expected behavior

system should not let user update parent tenant to have their child tenant as a new parent tenant
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 create a tenant with few child tenant
 update parent tenant to have child tenant and it will wipe out all the tenant
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
386,"test setup
edge group  one  and its parent group has two mids  and 
assign this  to a delivery service 

test case 
admindown or preprod one of the mids  execute ort in 
ort run fails complaining that its parent is pending
 
reason
during ort run  uses  to deduce whether its parent has executed ort successfully updpending  falsethis api trafficopsgolangs getserverupdatestatus function in serversupdatestatusgo uses a db query which ignores only the offline mids and not the admindown mids and hence ort run in edge fails saying 
 
fix
rewrite the db query to ignore admindown mids ",Not_TD,TD
387," im submitting a 
  bug report

 traffic control components affected 
  cdn in a box
  documentation
  traffic ops
  traffic portal

 current behavior
midloc cg is able to map on edge servers

 expected behavior
actually the edgeloc cache group should be mapped to servers of type edge and the midloc cache group should be mapped to servers of type mid

 minimal reproduction of the problem with instructions
   create servers with mismatch type
",Not_TD,Not_TD
388," im submitting an 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
the only way to get serverchecks is to fetch all of them for all servers at once if you only wantneed them for one server you must request potentially huge amounts of garbage data and then manually sift through it for the information of interest

 new behavior
the servercheck api route supports the id query parameter to get the checks for a single server
",Not_TD,Not_TD
389," im submitting a 
  bug report

 traffic control components affected 
  traffic portal

 current behavior
when editing a server from the servers page changeing the cdn from one to another used to automatically remove all the delivery services associated with that server to avoid accidentally adding dses to the incorrect cdn type while there is sitll a safeguard changing cdns will not allow you to save until you delete all the existing delivery services it is sitll and extra step this is a minor issue but when you flip cdns on a lto of servers regularly for projected capacity changes it is more of an effort

 expected behavior
changing cdns on a server should automatically wipe all current ds assignments

 minimal reproduction of the problem with instructions
change cdn from one to another a pop up will show stating that there are dses already assigned workaroudn is to delete the dses from the server and saving prior to changing cdns


 anything else
this is a very minor issue and more of an annoyance than an actual bug

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
390," im submitting a 
  bug report

 traffic control components affected 
  traffic portal

 current behavior
creating a filter in server list utilizing field offline reason does not persist until removed when making other changes

 expected behavior
filter should remain like the other server sort tabs do

 minimal reproduction of the problem with instructions
create any filter for offlinereason
ie broken server
create any filter for any other column ie cdn
navigate away from that page or right click any change
filter created for offlinereason goes away


 anything else
version 

build date  


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
391," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
adding an ssl certificate for a delivery service with a potentially bad cert chain gives back a warning alert like
json

	alerts 
		text warning ssl keys were successfully added for  but the input certificate may be invalid certificate verification produced a different chain
		levelwarning
	



 expected behavior
the alert is warninglevel so it doesnt need the warning  prefix alert should look like
json

	alerts 
		text ssl keys were successfully added for  but the input certificate may be invalid certificate verification produced a different chain
		levelwarning
	




 minimal reproduction of the problem with instructions
you can actually just check the logs for the trafficops service in cdninabox it occurs in there when uploading certs for the  delivery service",Not_TD,TD
392,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report


 traffic control components affected 


  traffic ops
  traffic portal


 current behavior

 create a topology that contain a edgeloc cache group
 go to topology  cache groups and change that cache group type from edgeloc to something else like midloc for example
 notice that now the topology will have the midloc cache group as a leaf node
 expected behavior

should have a validate that doesnt let user change the type of the cache group if it already assigned to the topology
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
393," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
get serversdsiddsid is returning mids that do not have the dss required server capabilities

 expected behavior
if a delivery service requires one or more server capabilities the results of get serversdsiddsid should never include cache servers edges or mids that do not have all of the dss required server capabilities org servers are different thanks to mso and are returned regardless

 minimal reproduction of the problem with instructions
 create a ds that employs both the edge and mid tier ie a dns delivery service
 add a required server capability to the ds
 add the same server capability to a handful of edge servers ensure those edge servers are in a cache group that is parented by a mid cache group
 get serversdsiddsid and notice that the mids are returned when the mids were never assigned the server capability

 anything else
note this does not seem to affect the behavior of server capabilities which was designed to includeexclude cache servers edgesmids from the crconfig snapshot and relevant ats config files parentconfig


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
394," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic portal

 current behavior
on many occasions a new ds should have the same server assignments as an existing ds there is no way to do this in tp you can clone delivery service assignments from one server to another but you cant clone server assignments from one ds to another 

 new behavior
when viewing the servers of a ds provide the ability to clone those server assignments to another ds

 anything else
replicating the server assignments is easy if the dss choose to use topology instead of direct server assignments but im guessing tc will support both topology and direct server assignments for quite a while


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,TD
395,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  ci tests

 current behavior

some of our actions are failing at the point where it builds the dockerfile due to the docker hub saying authentication required

dockerfile
step   from 
 pulling from libraryalpine
 pulling fs layer
 downloading
unauthorized authentication required


this implies that the runners are hitting the docker hubs  which restricts each ip address to  unauthenticated pulls per  hours

to get around this limitation we can cache common base images like alpine in github actions so that building our own dockerfiles does not require pulls that count towards the docker hubs limit

 expected behavior

our dockerfiles should build without requiring docker hub authentication

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

since each gha run where this has happened has been rerun i am unable to find any run to link to that shows this problem

see the usercontentcurrentbehavior section for what the docker build log shows when it does occur


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
396,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  ci tests

 current behavior

some of our actions are failing at the point where it builds the dockerfile due to the docker hub saying authentication required

dockerfile
step   from 
 pulling from libraryalpine
 pulling fs layer
 downloading
unauthorized authentication required


this implies that the runners are hitting the docker hubs  which restricts each ip address to  unauthenticated pulls per  hours

to get around this limitation we can cache common base images like alpine in github actions so that building our own dockerfiles does not require pulls that count towards the docker hubs limit

 expected behavior

our dockerfiles should build without requiring docker hub authentication

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

since each gha run where this has happened has been rerun i am unable to find any run to link to that shows this problem

see the usercontentcurrentbehavior section for what the docker build log shows when it does occur


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
397," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
currently you cannot change the name of a topology

 new behavior
allow the user to change the name of a topology thru the api and cascade that change to all appropriate areas ie dstoplogy

 minimal reproduction of the problem with instructions
in tp navigate to an existing topology and notice that the name field is disabled

 anything else
changing a topology name will probably dirty the snapshot for that cdn in  places the topology section and the delivery service section if the topology is assigned to a ds


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
398,"traffic monitor is accessing reqinfremoteaddr without checking for nil here



the trafficopsclient returned reqinfremoteaddr is guaranteed nonnil if errnil but if err  nil it may be nil depending how far the client got before it errored it must be checked for nil before accessing 

this causes panics and applications crashes when certain types of errors happen

 im submitting a 
  bug report

 traffic control components affected 
  traffic monitor

 current behavior
traffic monitor crashes on certain traffic ops request errors

 expected behavior
traffic monitor does not crash

 minimal reproduction of the problem with instructions
induce particular types of traffic ops connection errors this was observed after downgrading a traffic ops from  to  but that may or may not be consistently reproducible and is certainly not the only case which will cause a crash

 anything else",Not_TD,TD
399," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops client go

 current behavior
when the traffic ops api response to a request made by the go client is   and   the body of the response is read into the content of a returned error  and behind the scenes the body is also closed this makes it difficult to write client methods that actually return error alerts since the normally used methods employed by writers of a new client method will all exhibit this behavior

its not that its impossible its just not possible using the common rawrequest makerequestwithhdr postputgetetc methods

 new behavior
the client should return an error like traffic ops responded with  bad request and leave the alerts to the actual returned alerts

im not sure if this can actually be done in the  clients since the tests check for alert text in the errors which might mean that its expected behavior on which clients depend but it can safely be done in the new  client since nobodys using that

 minimal reproduction of the problem with instructions
use a client method that results in an error notice that no alerts are returned",Not_TD,TD
400," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic portal

 current behavior
a servers  addresses are referred to as


network ip
network gateway
network subnet


they might have been named this way before  was commonly used 

 new behavior
rename them to


 address
 gateway
 subnet


so it is more clear what they represent 

 minimal reproduction of the problem with instructions
navigate to  and observe the  addresses mentioned above


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,TD
401," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
if you create a server having an interface with an mtu of exactly  you get back a  internal server error response this is because the validation in the api checks for mtu   but the database check is strictly mtu   or null

 expected behavior
the api and database constraints should be consistent  i think the intended behavior is for  to be a legal value

 minimal reproduction of the problem with instructions
create a server having an interface with an mtu of exactly ",Not_TD,Not_TD
402,see the hostingconfig has an entry for the origin created in the delivery service ui for a live server  which is ram the problem comes when we use a regex to set an origin dynamicallyexample origin url  then the regex is the following   the result in the hostingconfig is      the remap ends up with  then disks are used instead of ram smalenfant smalenfant added bug traffic ops labels on jun   smalenfant     membersmalenfant commented on jun   is also another side effect with the parentconfig knutsel     memberknutsel commented on jun   could add hostingoverride and parentoverride columns to the delveryservice table but that seems a bit too ats specific or an overrides table that is linked to the ds table that has file gt override   you had similar use cases recently i think any thoughts on this       commented on jun    editedperhaps rather than cluttering up regex remap with more overrides for that specific use case we remove regex remap in favor of adding more manual options to anymap then we could directly write the configs entries we want ive given some rough thought to how wed do that though i havent applied it to the hostingconfig so wed need to add that in there as well note that these would all be for advanced users who fully comprehend how traffic server works in my opinion this is already the case for anymap and regex remap anywaydatabase changesadd table anymap deliveryserviceanymapid remap text edgeheader midheader type edge mid etc last updatedadd table anyparent deliveryserviceedgeparentid parent text type edge mid etc last updatedautogenerated by cachegroup for edge types fully manual for midadd table includes deliveryserviceincludesid filename filecontent this would need to be a large field type edge mid etc last updateduiorigin server base url  remove thisuse mso feature  remove thisremap entries  create entries the same way we create them for regex entries  add one or a whole bunch probably dont need order group of the following for eachraw remap textedge header rewritemid header rewritetier assignment edge mid etc checkboxesnote that in order to include header rewrite entries for each the header name would need to be something like   etc not sure of the best answer yet maybe the best way would be to place a line under each header saying what the user would need to add to the remap line in order to include it or maybe the best way would be to have the system automatically append itparent entries  same as remap entries add as many as neededmid parent texttier assignment edge mid etc checkboxesmanual includes  files we want to reference on the map lines like header rewrites etc that dont exist wed add each one and the user would include the filename and contentsauthor jan van doornjira link a href,Not_TD,Not_TD
403," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box
  traffic portal
  ci tests

 current behavior
currently the  runs the  tp tests found here 

 new behavior
the  should run the  tp tests found here 


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
404," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
if you have two cdns a and b and a mid in cdn a cachegroup  parentcg with revalpending  true all child caches of cachegroup parentcg in both cdn a and b have parentrevalpending  true

 expected behavior
in the above example only child caches of cachegroup parentcg that are in cdn a would have parentrevalpending  true 

 minimal reproduction of the problem with instructions
using the above example ensure that cdn b has no pending revalidations then submit an invalidation for a delivery service in cdn a observe that child caches in cdn b now have parentrevalpending  true
",Not_TD,TD
405,"theres a new  the fallback logic in  needs added to it in order to support one traffic control release prior in apps that use the client like tm and ort to make upgrading possible

 im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic control client

 current behavior
 doesnt fall back

 new behavior
 falls back to previous minors

 minimal reproduction of the problem with instructions
make a request with  to the previous minor traffic ops observe failure

 anything else
",Not_TD,Not_TD
406,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report
 

 traffic control components affected 

  traffic ops

 current behavior

when you make a post request to regions endpoint in api  if you pass in the body with id from one division division  for eastern division and name from another division divisionname western you get a successful response 

 expected behavior

request with mismatch id and name would fail or divisionname could be dynamically named based on id i believe we do this already

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

all existing divisions


    response 
        
            id 
            lastupdated  
            name ashtest
        
        
            id 
            lastupdated  
            name eastern
        
        
            id 
            lastupdated  
            name western
        
    


post body  request made to regions with western id and divisionname  eastern


    name testabc
    division 
    divisionname eastern


response


    alerts 
        
            text region was created
            level success
        
    
    response 
        divisionname eastern
        division 
        id 
        lastupdated  
        name testabc
    



 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

when checked the region that we created with mismatch the divisionname was correct in the db so i also tried the request without the divisionname in body and that was successful notice the divisionname is empty in response will validate that the db shows the right divisionname



req body

    name 
    division 

response 

    alerts 
        
            text region was created
            level success
        
    
    response 
        divisionname 
        division 
        id 
        lastupdated  
        name 
    




licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
407," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
the following error is logged when a user without a localpasswd logs in

error   checking local user password sql scan error on column index  name localpasswd converting null to string is unsupported


 expected behavior
since localpasswd is a nullable field and not required this query should handle the null case and not print an error


 minimal reproduction of the problem with instructions
log into to as a user without a localpasswd eg ldaponly observe the error in the to errorlog

 anything else
note this doesnt fail the login attempt since the login then attempts to login via ldap after logging the error
",Not_TD,Not_TD
408," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
to panics in the get apixcachesstats route doing an unchecked type assertion

error    panic err interface conversion interface  is string not  stacktrace
goroutine  
  
	 
  
	 
 
	 
          
	 
     
	 
  
	 
  
	 
  
	 
  
	 
   
	 
    
	 
created by nethttptimeouthandlerservehttp
	 


 expected behavior
to should properly convert the string into a  rather than doing an unchecked type assertion

 minimal reproduction of the problem with instructions
request get  observe the above  internal server error and stacktrace in the to logs",Not_TD,TD
409," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic portal

 current behavior
when assigning servers to a delivery service you typically use the search bar to narrow down your choices however with a high number of servers for instance  the search bar is not responsive to user input you type something into the bar then your input shows up a second later with the search results



 new behavior
when typing into the search bar user input should be displayed immediately even if the search hasnt completed yet

 minimal reproduction of the problem with instructions
in an environment with a high number of edgeorg servers go to a ds  more  manage servers  assign servers then type into the search bar

 anything else
note this would no longer be an issue if deliveryserviceserver assignments go away in favor of topology assignments moving forward so if that happens before this issue is addressed feel free to close it out",Not_TD,TD
410," im submitting a 
  bug report

 traffic control components affected 
  traffic monitor

 current behavior
in the tm ui bandwidth is reported as  unless the server has interfaces with monitor  true


the apicachestatuses api also has the same issue

   
    type mid
    loadaverage 
    querytimems 
    healthtimems 
    stattimems 
    statspanms 
    healthspanms 
    status reported  available
    statuspoller health
    bandwidthkbps 
    bandwidthcapacitykbps 
    connectioncount 
     true
     true
    combinedavailable true
    interfaces 
       
        status available
        statuspoller health
        bandwidthkbps 
        available true
      
    
  

as you can see this host is doing  kbps but its not showing in the ui or in the bandwidthkbps field the aggregate of all interfaces in this api

 expected behavior
the ui and apicachestatuses api should report the aggregate bandwidth of a servers interfaces even if monitor  false

 minimal reproduction of the problem with instructions
open the tm ui and observe what ive described for servers with no monitored interfaces then make one or more of those interfaces monitored and observe that the bandwidth starts reporting correctly
",Not_TD,Not_TD
411," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
get serversdsiddsid is returning mids that do not have the dss required server capabilities

 expected behavior
if a delivery service requires one or more server capabilities the results of get serversdsiddsid should never include cache servers edges or mids that do not have all of the dss required server capabilities org servers are different thanks to mso and are returned regardless

 minimal reproduction of the problem with instructions
 create a ds that employs both the edge and mid tier ie a dns delivery service
 add a required server capability to the ds
 add the same server capability to a handful of edge servers ensure those edge servers are in a cache group that is parented by a mid cache group and assign those edges to the ds
 get serversdsiddsid and notice that mids are returned when mids were never assigned the server capability

 anything else
note this does not seem to affect the behavior of server capabilities which was designed to includeexclude cache servers edgesmids from the crconfig snapshot and relevant ats config files parentconfig


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
412,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior

the traffic ops api tests attempt to run perl tests when noperl is set to false

 expected behavior

the traffic ops api tests should not attempt to run perl tests because they no longer exist

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 set noperl to true in trafficopstestingapiconftrafficopstestconf
 run the  api tests
    shell
    go test  testv cfgconftrafficopstestconf
    
 notice that testuserdeliveryservices fails
   go
    failed to set delivery service users  not found  error requesting traffic ops  alerts
   


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
413,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  

 current behavior

the ansible dataset loader uses post divisionsnameregions to create regions


because that was a perlonly endpoint it has been gone since  removed traffic ops perl

 expected behavior

the ansible dataset loader should use post regions to create regions

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 run dataset loader
 see it fail due to
    json
    
        alerts 
            
                level error 
                text the requested path  does not exist
            
        
    
    


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
414,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior

the traffic ops  api tests attempt to run perl tests when noperl is set to false

 expected behavior

the traffic ops  api tests should not attempt to run perl tests because they no longer exist

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 set noperl to false in trafficopstestingapiconftrafficopstestconf
 run the  api tests
    shell
    go test  testv cfgconftrafficopstestconf
    
 notice that testuserdeliveryservices fails
   go
    failed to set delivery service users  not found  error requesting traffic ops  alerts
   


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
415,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior

get toolswritecrconfigcdn endpoint includes no api version redirects to toolsflashandclosemessage also includes no api version

 expected behavior

because toolsflashandclosemessage was only implemented in traffic ops perl and  removed traffic ops perl get toolswritecrconfigcdn should instead redirect to 



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
416," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
trying to assign a delivery service request which does not exist to any user will result in an internal server error

 expected  new behavior
if a resource is not found the api should communicate that with the  not found http status code

 minimal reproduction of the problem with instructions
given that no delivery service request exists with the id  attempt to assign delivery service request  to any existing user i used my own user who had the id  in the following example and it looks like this

 request
http
put  
useragent 
acceptencoding gzip deflate
accept 
connection keepalive
cookie mojolicious
contentlength 

assigneeid 


note also that the documentation specifies a required id property of the request body  that is not correct the dsr to be assigned is fully identified by the request uri

 response
http
  internal server error
contentencoding gzip
contenttype applicationjson
setcookie mojolicious
vary acceptencoding
xservername trafficopsgolang
date tue  sep   gmt
contentlength 


	alerts 
		
			text internal server error
			level error
		
	


 anything else
from the stack trace i found

info   put  handling reqid 
debug   debug pluginsonrequest calling  plugins
error    dsr assignment querying existing sql no rows in result set
debug   internal server error
  admin  put        nonims
info   put  handled reqid  in 

which suggests that a databasesqlerrnorows isnt being handled somewhere",Not_TD,TD
417," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
when submitting a post request to deliveryservicerequests if the request bodys deliveryservice object has no tenantid property or probably also null but i havent checked the handler will return a  internal server error to the client

also the tenant id checked for user access is whatever the user submitted  not the actual tenant of the delivery service in this way a change or delete request can be submitted by a user who does not have permission to modify that delivery service so a user with a tenant id of  which is a child of tenant  can legally submit a request for any delivery service accessible to  by simply replacing the tentantid property of the deliveryservice object with their own tenants id

 expected  new behavior
if a property is required then omitting it should cause a  bad request response with an appropriate alerts entry describing the problem

a resources actual tenancy should be checked  returning a  forbidden response in the event that access is not allowed  instead of whatever the client asks to be checked

 minimal reproduction of the problem with instructions
make a post request to deliveryservicerequests containing a syntactically valid dsr but one wherein the tenantid of the deliveryservice object is undefined

make a post request to deliveryservicerequests containing a deliveryservice inaccessible to the requesting tenant but with the deliveryservices tentantid modified to an accessible value
",Not_TD,TD
418," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
because of the way workflow transitions are verified creating a dsr with any nonnull value in the id property will cause the request to fail if id was an integer though it will give back the errorlevel alert sql no rows in result set which is both cryptic and  looking at the code  unnecessary

 expected  new behavior
if ids have special meaning to requests they should be documented  but its more likely that the intended behaviour is just to ignore the id since it cant reasonably be known before the object is created

 minimal reproduction of the problem with instructions
submit a post request to deliveryservicerequests with an integral id value the simplest request body to reproduce the error is just id  which should work regardless of extant data
 anything else

full http stack

http
post  
useragent 
acceptencoding gzip deflate
accept 
connection keepalive
cookie 
contentlength 

id 

http
  bad request
accesscontrolallowcredentials true
accesscontrolallowheaders origin xrequestedwith contenttype accept setcookie cookie
accesscontrolallowmethods postgetoptionsputdelete
accesscontrolalloworigin 
contentencoding gzip
contenttype applicationjson
setcookie  path expiresthu  sep   gmt  httponly
vary acceptencoding
 
xservername trafficopsgolang
date thu  sep   gmt
contentlength 


	alerts 
		
			text sql no rows in result set
			level error
		
	



",Not_TD,TD
419," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
when passing a request thats missing the deliveryservice property to deliveryservicerequests post handler the requests goroutine will segfault and panic

 expected  new behavior
invalid requests should not be capable of causing a serverside segfault

 minimal reproduction of the problem with instructions
post to deliveryservicerequest with a request body not containing a deliveryservice property probably deliveryservice null works too but i havent checked simplest body to reproduce the error is just 

 anything else

full http stack

http
post  
useragent 
acceptencoding gzip deflate
accept 
connection keepalive
cookie 
contentlength 




http
  internal server error
accesscontrolallowcredentials true
accesscontrolallowheaders origin xrequestedwith contenttype accept setcookie cookie
accesscontrolallowmethods postgetoptionsputdelete
accesscontrolalloworigin 
contentencoding gzip
contenttype applicationjson
setcookie  path expiresthu  sep   gmt  httponly
vary acceptencoding
 
xservername trafficopsgolang
date thu  sep   gmt
contentlength 


	alerts 
		
			text internal server error
			level error
		
	






traffic ops logs


info   post  handling reqid 
debug   debug pluginsonrequest calling  plugins
error    panic err runtime error invalid memory address or nil pointer dereference stacktrace
goroutine  
  
	 
  
	 
 
	 
   
	 
  
	 
    
	 
  
	 
  
	 
  
	 
  
	 
   
	 
    
	 
created by nethttptimeouthandlerservehttp
	 


",Not_TD,TD
420," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
traffic ops logs a warning when generating snapshots for topologybased delivery services

warning   creating crconfig deliveryservice rawlhttp has no regexes skipping
 

 expected behavior
traffic ops should not log this warning when generating snapshots for topologybased delivery services

 minimal reproduction of the problem with instructions
create a topology assign it to a delivery service snapshot the delivery services cdn 

",Not_TD,Not_TD
421," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
traffic ops logs a warning when generating snapshots for topologybased delivery services

warning   creating crconfig deliveryservice rawlhttp has no regexes skipping
 

 expected behavior
traffic ops should not log this warning when generating snapshots for topologybased delivery services

 minimal reproduction of the problem with instructions
create a topology assign it to a delivery service snapshot the delivery services cdn 

",Not_TD,Not_TD
422," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior

traffic ops validates that delivery service names xmlid dont contain spaces or periods



but it doesnt verify its a valid fqdn component 

traffic portal does but traffic ops doesnt

there is specifically an interest in prohibiting underscores which we use in header rewrite files eg hdrrwmidfooconfig asis if an untrusted person were allowed to make delivery services they could create a delivery service named midfoo in order to attack and manipulate a different delivery service this isnt a huge issue today without self service but it will be if and when we ever get there adding the validation now prevents the future security issue

 new behavior

traffic ops is changed to validate delivery service names to only contain alphanumeric and hyphen characters

 minimal reproduction of the problem with instructions
post a new delivery service to traffic ops with underscores in the xmlid

 anything else",Not_TD,TD
423,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report
  other 

 traffic control components affected 

  traffic ops
  traffic portal

 current behavior

if you visit any page on traffic portal we see an  internal sever error on further inspection the rest api cdnnotifications is the one that is giving this error

 expected behavior

one shouldnt see this error

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

login to traffic portal and you will see the error go to inspect element and check the network tab for http status code 

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
424," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops ort

 current behavior
currently ort uses a delivery services maxoriginconnections field to configureoverride the ats recordsconfig setting proxyconfighttporiginmaxconnections in ats  this setting was removed and replaced 

 new behavior
when generating configs for ats   ort should use the new settings instead",Not_TD,TD
425,the xmlid by default is part of the delivery service example urlsregex  we should add a constraint to disallow any characters forbidden in urls such as   trafficops currently allows you do do this but you will get back a  error back from tr whenever you use the example url generated by default  tangentially this also helps  ,Not_TD,TD
426," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic portal

 current behavior
in tp if you use an  cidr w a masklen   you get the following warning


 new behavior
since  is an extremely common  masklen tp should really only warn if the  masklen is   also the wording should be changed from large cidr detected  with cidr   or  with cidr   can be problematic to large cidr block detected  masklen   or  masklen   it shouldnt really say that it can be problematic when there may be valid reasons for a server to be on a network w a large cidr block network addressing is not really within the scope of the cdn

 minimal reproduction of the problem with instructions
in tp assign a server ip address with an  masklen  
",Not_TD,Not_TD
427," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box
  traffic portal
  ci tests

 current behavior
currently the  runs the  tp tests found here 

 new behavior
the  should run the  tp tests found here 


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
428,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box
  traffic ops postinstall

 current behavior

cdn in a box does not generate its configs using the postinstall script

 new behavior

cdn in a box should generate its configs using the postinstall script

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section





 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section

there is a python rewrite of the postinstall script  instead of relying on perl dependencies for the old postinstall script we should consider having cdn in a box use the python version of postinstall

    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",Not_TD,Not_TD
429," im submitting a 
  bug report

 traffic control components affected 
  traffic ops postinstall

 current behavior


postinstall will attempt to install both of these broken urls





 expected behavior
since maxmind moved to a licensebased model requiring an account we should probably just remove the option to download a maxmind database from postinstall and add it to the documentation as an installation step instead if not already

 minimal reproduction of the problem with instructions
run both versions of postinstall and choose the option to download a maxmind database
",Not_TD,Not_TD
430,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box
  traffic ops postinstall

 current behavior

cdn in a box does not generate its configs using the postinstall script

 new behavior

cdn in a box should generate its configs using the postinstall script

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section





 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section

there is a python rewrite of the postinstall script  instead of relying on perl dependencies for the old postinstall script we should consider having cdn in a box use the python version of postinstall

    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",Not_TD,TD
431," im submitting a 
  bug report

 traffic control components affected 
  traffic monitor

 current behavior
traffic monitor indiscrimantly sums up bandwidth calculations from all reported interfaces whether the interface is marked as monitor this interface or not when more than  interface is returned for a cache server and it is assumed to be part of the calculations this results in inaccurate numbers as some interfaces are nested  children interfaces or loopback which result in  calculations at a minimum

 expected behavior
only the interfaces marked with monitor this interface should be included in the calculations

 minimal reproduction of the problem with instructions

todo add clarity

 anything else


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
432,hi,Not_TD,Not_TD
433,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic portal

 current behavior

recently we issued a large scale invalidation request against one of our delivery services  unfortunately we didnt realize that the origin was not configured to handle ifmodifiedsince or ifnonematch headers and always sent back  instead of   this resulted in a storm of requests going to the origin and a new mini storm starting every time an edge cache ats was restarted

perhaps some message or some documentation should be added to ensure that whoever uses invalidations realizes that they are designed to be used with origins that properly handle ims requests

 new behavior


 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
434,"hi guys

hope you are all well 

i create all my subdomains for deploying the cdninabox version changed the envariables but i have the following error when running dockercompose up build

img  altscreenshot  at    src

how can i sort that  is there a workaround 

btw wouldnt be easier to use certbotletsencrypt for generating ssl certificates 

thanks for any insights or inputs on that deployment isssue

cheers
luc michalski
",Not_TD,Not_TD
435,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache software foundation security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the
 or 
 before submitting please search github for a similar issue or pr 

 im submitting a 


  bug report


 traffic control components affected 

  traffic control client
  traffic monitor
  traffic ops

 current behavior

when you make a commit or create a pr github actions will run a set of tests on your code the golang unit tests task sometimes fails due to a couple of known culprits look here 
i havent been able to reproduce this locally but maybe if you run the test multiple times it will eventually fail because it seems like a race condition atm
 expected  new behavior

all github action tasks pass consistently
 minimal reproduction of the problem with instructions

if the current behavior is a bug or you can illustrate your feature request better with an example
please provide the steps to reproduce and include the applicable tc version

this happens intermittently this is one example 
 anything else

the failing test is
 run   testgetimportprofileparametersfailstorageerrorselectingparam
    testgetimportprofileparametersfailstorageerrorselectingparam  starting test scenario  fail storage error selecting param

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
436," im submitting a 
  bug report

 traffic control components affected 
none

 current behavior
if the releasepl script fails to edit the version file it will plow ahead anyway or presumably if any step fails it will continue to do things possibly incorrectly

 expected behavior
if part of the process of creating a release or candidate fails the script should exit immediately printing what went wrong ideally to stderr and use a nonzero exit code

 minimal reproduction of the problem with instructions
i think if you try to create an existing release it wont have any negative side effects so checkout eg the  tag and do miscreleasepl gpgkeysome key  cut

 anything else
you can see it happening in the scripts output

failed to rungit commit m release syncing version file version
updating version file
everything uptodate
signing new tag based upon your gpg key
",Not_TD,TD
437," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic portal

 current behavior


 these numbers are populated from the api call


get 


therefore the labels online caches reported caches etc is misleading

 new behavior
labels should be
 online edge caches
 reported edge caches
 offline edge caches
 admin down edge caches

or an even better solution would be to aggregate the numbers for all caches edges and mids which would require either making a few calls like


get 
get 


and summing the results or making an api change to support something like


get 


which pulls numbers for any server of type edge or mid

 minimal reproduction of the problem with instructions
launch tp view the cache status in the top right of the tp dashboard


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
438,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic stats

 current behavior

when a  ts is run with a  to tm the cachestats table is populated with only 
 expected behavior

the cachestats table should be populated with valid numeric values
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run your local  ts connected with a  to and check the data in the cachestats database you will see all  in there
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
439,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic stats

 current behavior

when a  ts is run with a  to tm the cachestats table is populated with only 
 expected behavior

the cachestats table should be populated with valid numeric values
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run your local  ts connected with a  to and check the data in the cachestats database you will see all  in there
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
440,"json

        name manchester
        division 
        divisionname england



the old perl api accepts both integers and strings since it is a dynamic language in most go endpoints only an integer is accepted

for instance the regions endpoint documentation says that the post supports strings 
but actually posting an integer string yields an error message 

the go endpoints should be able to accept either integer or string integers to reduce the likelihood of breaking things that were once supported 
",Not_TD,TD
441,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request

 traffic control components affected 

  traffic ops db
  ci tests

 current behavior

the  does not run our existing 

 expected behavior

the todbtests github action should run our traffic ops db tests

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section


the tests in the github action itself look valuable consider including them in the traffic ops db tests


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
442,"pkggodev replaces the old godocorg go autodocumentation site it requires license files in certain places or wont display documentation for libraries for legal reasons

it looks like its broken for all atc libraries 

we should fix it it looks like it might just be a matter of putting license files in the right places for it to detect

labelling bug even though its not our fault because having the canonical go docs fail really is an issue we should fix

 im submitting a 
  bug report
 
 traffic control components affected 
  documentation

 current behavior
pkggodev fails for all go libraries in atc

 expected behavior
pkggodev succeeds for all go libraries in atc

 minimal reproduction of the problem with instructions
go to  or any other atc library path observe failure

 anything else
",Not_TD,TD
443,"hi when i install  according to the documentslatest releasethere is an error during db migration

goose migrating db environment production current version  target 
  fail  pq constraint ipaddressinterfacefkey of relation ipaddress does not exist quitting migration
cant run goose exit status 

any suggestion",Not_TD,Not_TD
444,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  new feature  enhancement request

 traffic control components affected 

  traffic ops ort

 new behavior

we should create a github action that runs the traffic ops ort integration test that was added in 

options for getting an apache traffic server rpm
 building it using pkg o added in 
 from epel once  is resolved


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
445," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
put  with no xmppid hashid results in an internal server error


error    original server had no xmppid


 expected behavior
no ise you cant change xmppid after server create so im not even sure why the api is checking for one

 minimal reproduction of the problem with instructions
create a server in the db delete the xmppid

put  and you should get a  internal server error

 anything else
workaround add an xmppid to the db for that server and the error goes away

also i see lots of instances of xmppid defined like this in the documentation which is not accurate


xmppid
an identifier to be used in xmpp communications with the server  in nearly all cases this will be the same as hostname



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
446," im submitting a 
  bug report

 traffic control components affected 
  traffic ops
  traffic vault

 current behavior
with a large number of delivery services eg  the post cdnsdnsseckeysgenerate route times out and returns a  because the operation exceeds  minute

 expected behavior
the operation should succeed in less than  minute instead of timing out

 minimal reproduction of the problem with instructions
in a cdn with a large number of delivery services eg  call this api and observe that it times out after  minute and returns a 

 anything else
this was observed on a vm w  cpus at  mhz so the results might be different on baremetal or more powerful vms however we should be able to run to on lowperformance vms i would propose that we parallelize this cpuintensive operation so that we can take advantage of multicore servers
",Not_TD,TD
447,technical debtcurrently dsstats and cachestats have separate but very similar filter interfaces these should be combined if possible if it isnt possible at least their duplicate logic should be combined to a single functionauthor robert buttsjira link a href,Not_TD,TD
448,when dses and servers are already configured in trafficops crconfig can be generatedhowever tm and therefore the tr ignores the crconfig if there is no dsserver assignment monitorconfigpoller skipping this iteration session is nilas the crconfig hold much more than this mapping i would like to suggest the configuration would not be ignoredauthor nir sopherjira link a hreffound version ,Not_TD,Not_TD
449,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box

 current behavior

get  only returns results for hostname all

json

  response 
    
      hostname all
      cachegroup all
      status all
      profile all
      ip null
      healthy true
      kbps 
      connections 
    
  



 expected behavior

get  and other api versions should incnlude an entry for each cache

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

get 

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

possibly related to this query returning now rows in cdn in a box



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",Not_TD,Not_TD
450,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box
  traffic portal

 current behavior

when running in cdn in a box the traffic portal integration tests print a deprecation warning

javascript
      deprecationwarning buffer is deprecated due to security and usability issues please use the bufferalloc bufferallocunsafe or bufferfrom methods instead


and then time out  minutes later

 expected behavior

the traffic portal integration tests should succeed and exit when running in cdn in a box

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
dockercompose f dockercomposeyml f dockercomposetrafficportaltestyml up d db edge trafficportal trafficops trafficvault portalintegrationtest 
dockercompose f dockercomposeyml f dockercomposetrafficportaltestyml logs nocolor timestamps f portalintegrationtest


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


 dockercompose f dockercomposeyml f dockercomposetrafficportaltestyml up d db edge trafficportal trafficops trafficvault portalintegrationtest 
dockercompose f dockercomposeyml f dockercomposetrafficportaltestyml logs nocolor timestamps f portalintegrationtest

    waiting for traffic ops at  fqdn trafficopsinfraciabtest host trafficops
    waiting for traffic ops at  fqdn trafficopsinfraciabtest host trafficops
    pingpong
    waiting for traffic ops to finish seeding the traffic ops data so traffic portal will start
    waiting for traffic ops to finish seeding the traffic ops data so traffic portal will start
    waiting for traffic ops to finish seeding the traffic ops data so traffic portal will start
    waiting for traffic portal at  fqdn trafficportalinfraciabtest host trafficportal
    waiting for traffic portal at  fqdn trafficportalinfraciabtest host trafficportal
    pingpong
    waiting for selenium server to start on 
    webdrivermanager using local installed version 
     istart  java djavasecurityegdfiledevurandom   jar  port 
     istart  seleniumprocesspid 
    waiting for selenium server to start on 
     info   selenium server version  revision 
     info   launching a standalone selenium server on port 
      logging initialized  to 
     info   initialising webdriverservlet
     info   selenium server is up and running on port 
    
      seleniumaddress 
      allscriptstimeout 
      capabilities 
        browsername chrome
        shardtestfiles false
        maxinstances 
        marionette true
        acceptinsecurecerts true
        acceptsslcerts true
        chromeoptions 
          args 
            headless
            nosandbox
            ignorecertificateerrors
          
          prefs 
            download 
              promptfordownload false
            
          
        
      
      specs 
        specsspecjs
      
      framework jasmine
      getpagetimeout 
      jasminenodeopts 
        showcolors true
        defaulttimeoutinterval 
        random false
        stopspeconexpectationfailure true
      
      params 
        apiurl 
        baseurl 
        login 
          username admin
          password 
        
        junitreporter true
      
    
     ilauncher  running  instances of webdriver
     ihosted  using the selenium server at 
     info   capabilities are 
      acceptinsecurecerts true
      acceptsslcerts true
      browsername chrome
      chromeoptions 
        args 
          headless
          nosandbox
          ignorecertificateerrors
        
        prefs 
          download 
            promptfordownload false
            defaultdirectory 
          
        
      
      count 
      marionette true
      maxinstances 
      shardtestfiles false
    
     info   matched factory orgopenqaseleniumgridsessionremoteservicedsessionfactory provider orgopenqaseleniumchromechromedriverservice
    starting chromedriver   on port 
    only local connections are allowed
    please see  for suggestions on keeping chromedriver safe
     bind failed cannot assign requested adchdrroemsesd 
     was started successfully
     info   detected dialect 
     info   started new session  orgopenqaseleniumchromechromedriverservice
    null
    started
      deprecationwarning buffer is deprecated due to security and usability issues please use the bufferalloc bufferallocunsafe or bufferfrom methods instead
     
    data  route  
     divisions
    data  name  
     servers
    data 
      route servers
      getrequest 
        
          route servers
          querykey hostname
          queryvalue 
          replace route
        
      
    
    
    
    failures
     traffic portal  asns  admin role can open asns page
      message
        failed wait timed out after 
      stack
        timeouterror wait timed out after 
            at 
            at managedpromiseinvokecallback 
            at taskqueueexecute 
            at taskqueueexecutenext 
            at 
            at 
            at runmicrotasks 
            at processticksandrejections 
        from task 
            at schedulewait 
            at controlflowwait 
            at thenablewebdriverproxywait 
            at run 
            at protractorbrowserto  
            at sidenavigationpage 
            at generatornext 
            at 
            at new promise 
            at awaiter 
        from task run itcan open asns page in control flow
            at usercontext 
        from asynchronous test 
        error
            at suite 
            at 
            at arrayforeach 
            at 
            at generatornext 
            at 
    
     traffic portal  asns  admin role create an asn
      message
        failed wait timed out after 

",Not_TD,TD
451," im submitting a 
  bug report

 traffic control components affected 
  traffic portal

 current behavior



 expected behavior
font should scale down

 minimal reproduction of the problem with instructions
open tp and shrink the window and watch the dashboard stats squish into each other


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
452,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic monitor
  traffic ops

 current behavior

the  and  return profiles with health threshold parameters structured differently than atc  and before had them in what they look like at 

json
          healththreshold 
            availablebandwidthinkbps 
              comparator 
              val 
            
            loadavg 
              comparator 
              val 
            
            querytime 
              comparator 
              val 
            


 expected behavior

the  and  should use the same format as previous releases used
   

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 get 
 notice the health threshold paramters are not in the expected format given above


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

 this issue first appeared at  

 attached
     
      at 


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
453,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic portal

 current behavior


if you are logged in to the tp and then log out youll notice that traffic ops continues to report  on the cdnsnotifications endpoint

 expected behavior

once the user logs out of tp to should not report any more 

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run to and tp locally
tail the access logs for to
log in to tp and then log out of it
youll notice that the to access logs keep reporting  even after the user has logged out of tp
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

logs
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims
    get       macintosh intel mac os x   khtml like gecko    nonims

licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
454," im submitting a 
  bug report

 traffic control components affected 
  traffic ops ort

 current behavior
when a delivery service has a service category ort will output a header rewrite file inner or mid as appropriate for whether the ds uses a topology that is missing the directive to add the cdnsvc http header this behavior occurs in  and the latest  release candidatethe head of the  branch but not at the head of master at the time of this writing

 expected behavior
when a delivery service has a service category ort should populate the appropriate header rewrite file for that delivery service on midtier inner cache servers with a directive to add the cdnsvc header

 minimal reproduction of the problem with instructions
in cdninabox you can observe this bug by adding a service category to the demo  delivery service then queuing updates on either  or  or both or their respective cache groups or the entire cdninabox cdn then connecting to the affected hosts container with docker exec and observing that  is written with a single line containing only the standard header comment be sure to give ort a minute or to to run",Not_TD,Not_TD
455,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  ansible roles
  tests

 current behavior

after  there are still references to trafficopsort



 expected behavior

the rpm name is now trafficcontrolcacheconfig
the directory name is now cacheconfig


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
456,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  documentation

 current behavior

after  there are still references to trafficopsort in the documentation mostly just filenames










 expected behavior

 trafficopsortbuild is now cacheconfigbuild
 those rst files should be renamed
     
     
     
     
     
     


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",Not_TD,Not_TD
457,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  astats

 current behavior

currently astats depends on plugin apis that have changed across major ats versions
tscontschedulefreecont freetmout tsthreadpooltask
no longer takes a thread pool argument

 new behavior

we should see if there is a compile time switch we can use to for the tscontschedule to flip it between
tscontschedulefreecont freetmout tsthreadpooltask and
tscontschedulefreecont freetmout
 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
458,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache software foundation security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the
 or 
 before submitting please search github for a similar issue or pr 

 im submitting a 
  bug report

 traffic control components affected 

  traffic ops ort

 current behavior

observed in   built from 

for testing purposes i will remove trafficserver and trafficserverdebuginfo and blow away opttrafficserver then run ort badass as root
with trafficopsortpl sub directories in opttrafficserveretc such as ssl and dscp end up as rootroot permission set to   this is consistent and part of my clean install involves chowning these subdirs
i tested with  and it will create these same directories with permissions  but still rootroot which allows ats to start with no complaints

 expected  new behavior
likely these subdirs should be created as atsats so they can be picked up when ats starts
it might be that we want to keep the ssl directory as  owned by ats for security purposes but possibly keep others like dscp at 

 minimal reproduction of the problem with instructions
rpm remove trafficserver and trafficserverdebuginfo  rm rf opttrafficserver
set up server for these cases ill use the to api to inject my test machine then tp to clone delivery services
run trafficopsortpl wipe again run 
observe ownership and permissions of opttrafficserveretc  dscp ssl etc

 anything else



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


directories like  etctrafficserverbodyfactory are created by the ats install package  for those directories either they should be ownership changed or at least created to ensure they and their child directories are readable by the ats user",Not_TD,Not_TD
459,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic router

 current behavior

when running the traffic router tests in externaltestsuite steeringtest fails with


expected a value greater than 
     but  was equal to 
	at 


 expected behavior

the tests in steeringtest should pass

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run the external tests for convenience i have made a branch that runs steeringtest only in cdninabox


you can use it to run the traffic router tests including external tests as follows
shell
dockercompose up d
dockercompose f dockercomposereadinessyml up readiness  waits for traffic monitor to be usable by traffic routers
dockercompose f dockercomposetrafficroutertestyml up trintegrationtest


 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

steeringtest has failed since  and snuck into  the only  assertions that fail are 
java
		assertthatrehashedpathsgetsmallertargetsize greaterthanhashedpathsgetsmallertargetsize
		assertthatrehashedpathsgetlargertargetsize lessthanhashedpathsgetlargertargetsize


i think this is because steeringwatcher doesnt get to update 

the reason i dont think steeringwatcher updates after that point is that letsencryptdnschallengewatchers scheduledexecutorservice hangs when trying to update letsencryptdnschallengewatchers database 

for whatever reason fetchers request for letsencryptdnschallengewatcher never makes it to httpdataserver the mock to server even though the host and port seem to line up but if you make fetcher return for letsencryptdnschallengewatcher requests right before 
java
			if urlcontainsletsencrypt 
				return http
			


then steeringtest succeeds if you dont the request doesnt seem to ever complete



other notes
 changing defaultlednschallengeurl to  so it doesnt end in a slash then  does not keep letsencryptdnschallengewatchers fetcher request from hanging
 one abstractresourcewatcher hanging should not make another abstractresourcewatcher hang if traffic router does this outside of tests its a serious bug that we should fix


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
460,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic router

 current behavior

the routertest integration test fails on my  branch

java
failed tests 
   
expected one of   
     but was 


code block


 expected behavior

all tests should succeed

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 checkout 
 in the cdn in a box directory
    shell
    dockercompose up d
    dockercompose f dockercomposetrafficroutertestyml up trintegrationtest
    


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",Not_TD,Not_TD
461,the coveragezonepollingurl variable in the trafficrouter default profile published at  is set to tohostnamecdnczfcurrentczfcurrentjsonhowever this path does not exists in my traffic opshowever the path routingcoveragezonejson does existsauthor nir sopherjira link a hreffound version ,Not_TD,Not_TD
462,few variables in the trafficrouter default profile published at  uses the pattern tohostname however at least till commit   traffic router does not replace this pattern with the ops hostnamei would suggest to add a readme besides the default profile with instructions to replace this pattern manually until tr supports itauthor nir sopherjira link a hreffound version ,Not_TD,Not_TD
463,few variables in the trafficrouter default profile published at  use the pattern tohostname however at least till commit   traffic router does not replace this pattern with the ops hostnameauthor nir sopherjira link a hreffound version ,Not_TD,Not_TD
464,"currently if traffic router has a geo miss and then uses the delivery services miss location its logged as rtypegeo this makes it impossible to determine from the logs which ips were geo misses

the code looks like its here 

if clientlocation  null 
	clientlocation  dsgetmisslocation



id like to propose a new rtype log geods when a geo miss occurs 

i havent tested but i believe it may simply be a matter of adding tracksetresultresulttypegeods to the above if statement

this would allow operators to find geo misses in the logs

also note ds miss location may currently be broken due to a maxmind change to always return the center of the us on a miss the fix for that shouldnt conflict with this feature

 im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic router

 current behavior
geo miss ds miss location is  indistinguishable from geo hit in the logs

 expected  new behavior
traffic router logs a unique rtype for geo miss ds miss location usage

 minimal reproduction of the problem with instructions
run a tc cdn ensure requests are made to traffic router from an ip not in maxmind or the czf to a ds with a miss location set observe rtypegeo log with no way to distinguish from geo hit

 anything else",Not_TD,TD
465,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache software foundation security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure



 for support questions use the
 or 
 before submitting please search github for a similar issue or pr 

 im submitting a 


  bug report
  new feature  enhancement request
  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  cdn in a box
  documentation
  grove
  traffic control client
  traffic monitor
  traffic ops
  traffic ops ort
  traffic portal
  traffic router
  traffic stats
  traffic vault
  unknown

 current behavior

the following endpoints are deprecated and not supported in  they are missing deprecation notices in their documentation pages

 cdnscdnconfigfilesatsfilename
 profilesprofileconfigfilesatsfilename
 serversserverconfigfilesats
 serversserverconfigfilesatsfilename

 expected  new behavior

they should have deprecation notices like other deprecated endpoints
 minimal reproduction of the problem with instructions

if the current behavior is a bug or you can illustrate your feature request better with an example
please provide the steps to reproduce and include the applicable tc version


 anything else











licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
466," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
making a put request to deliveryservicesidsafe will return a different structure from a request made to deliveryservices for the same api version as these are not the same endpoint theres technically no reason they need to return the same structural representation for the same delivery service at the same api version but based on the way the deliveryservicesidsafe endpoint is documented and my own strong desire to see the two endpoints use a consistent representation ive decided to label this a bug

the various api versions requested for deliveryservicesidsafe compared to the api version of deliveryservices that would yield the same structure as deliveryservicesidsafe are given below

deliveryservicesidsafe version  deliveryservices version

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            


 expected behavior
the structure of a response from deliveryservicesidsafe should be the same as that of a response from deliveryservices for the same api version in other words instead of the behavior described by the above table what id expect to see is something more like

deliveryservicesidsafe version  deliveryservices version

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            

                                                                                            


 minimal reproduction of the problem with instructions
make requests to deliveryservicesidsafe note the presence or absence of fields introduced or removed in various api versions of deliveryservices and their presence or absence from deliveryservicesidsafe",Not_TD,Not_TD
467,"currently if magic parameters for urlsig dont exist urlsigso and remapconfig will fail to reload at least errorurl possibly also exclregex and siganchor  urlsig 

we should make the cache config generation for urlsig insert these necessary strings if they dont exist and log a warning

one ds should never be able to cause the cdn to fail or fail to load new config we could also remove the ds line from remapconfig but most users probably dont care about the parameters its easy enough to add them to make the ds succeed

generation code is here 

 im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops ort

 current behavior
creating a delivery service with urlsig without magic parameters will cause remapconfig to fail to load

 new behavior
creating a delivery service with urlsig without magic parameters will cause config generation to insert necessary parameters in urlsigdsnameconfig so remapconfig loads and the delivery service works

 minimal reproduction of the problem with instructions
create a delivery service with urlsig without magic parameters

 anything else",Not_TD,TD
468," im submitting a 
  bug report

 traffic control components affected 
  traffic ops
  traffic router

 current behavior
tr will not load a snapshot that has an https delivery service with a missing cert therefore tr will be stuck with an old snapshot until the problem is resolved and a cert is created for the https ds or the https ds is switched to http

 expected behavior
prevent the creation of an invalid snapshot or handle invalid snapshots more gracefully 

 minimal reproduction of the problem with instructions
 create a delivery service with protocolhttps do not add a cert to the delivery service
 snapshot the cdn for the delivery service
 tr will not reload the new snapshot due to the missing cert

 anything else
possible solutions
 when snapshotting a cdn via the api return  if any of the cdns https delivery services are missing a cert
 autogenerate a selfsigned cert when creating an https ds or updating an http ds to an https ds
 tr could somehow filter out the bad dss and consume the rest of the snapshot


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
469," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
making a put request to serversiddeliveryservices will return a different structure from a request made to deliveryservices for the same api version as these are not the same endpoint theres technically no reason they need to return the same structural representation for the same delivery service at the same api version but because released api versions were retroactively changed to return extra fields this is a regression bug in fixing it i suggest we define the response structure to be isomorphic to deliveryservices

the various api versions requested for serversiddeliveryservices compared to the api version of deliveryservices that would yield the same structure as serversiddeliveryservices are given below

 serversiddeliveryservices version deliveryservices version
 
  
  
  
  
  
  
  
  
  


 expected behavior
the structure of a response from serversiddeliveryservices should be the same as that of a response from deliveryservices for the same api version in other words instead of the behavior described by the above table what id expect to see is something more like

 serversiddeliveryservices version deliveryservices version
 
  
  
  
  
  
  
  
  
  

 minimal reproduction of the problem with instructions
make requests to serversiddeliveryservices note the presence or absence of fields introduced or removed in various api versions of deliveryservices and their presence or absence from serversiddeliveryservices",Not_TD,TD
470,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc
  other 

 traffic control components affected 

  astats

 current behavior

currently astats depends on plugin apis that have changed across major ats versions
tscontschedulefreecont freetmout tsthreadpooltask
no longer takes a thread pool argument

 new behavior

we should see if there is a compile time switch we can use to for the tscontschedule to flip it between
tscontschedulefreecont freetmout tsthreadpooltask and
tscontschedulefreecont freetmout
 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
471,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic control cache config  rpm spec file

 current behavior

unless the rpm build distribution is rhel  rhel  or rhel  an rpm from  will have no dependencies

 expected behavior

trafficcontrolcacheconfig should depend on git and perl


 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 go through the steps to 

 build the tc cache config rpm outside of docker assuming you are not on centos  centos  or centos 
    shell
    cd infrastructurecdninabox
    make native cachetrafficcontrolcacheconfigrpm
    rpm q requires cachetrafficcontrolcacheconfigrpm
    

    output of rpm q requires cachetrafficcontrolcacheconfigrpm that reproduces the bug
    
    binsh
    binsh
    usrbinperl
    configtrafficcontrolcacheconfig  
    perlgetoptlong
    perlstrict
    perlwarnings
    rpmlibcompressedfilenames  
    rpmlibfiledigests  
    rpmlibpayloadfileshaveprefix  
    rpmlibpayloadisxz  
    


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",Not_TD,Not_TD
472,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box makefile

 current behavior

the recipe for makefile target trafficmonitortrafficmonitorrpm in the cdn in a box directory will fail to build if trafficmonitorbuildsh is newer than trafficmonitorbuild or its contents

 expected behavior

all makefile recipes should succeed

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

failure when trafficmonitorbuildsh is newer
shell
 touch trafficmonitorbuildsh  make trafficmonitortrafficmonitorrpm
cat trafficmonitorbuildsh trafficmonitorbuild
binsh line  trafficmonitorbuild is a directory
make   error 


success when trafficmonitorbuild is newer
shell
 touch trafficmonitorbuild  make trafficmonitortrafficmonitorrpm
pkg v  trafficmonitorbuild
building trafficmonitorbuild
pulling trafficmonitorbuild  done
creating buildtrafficmonitorbuildrun  done
 readlink trafficcontrolbuildcleanbuildsh



 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

printing debugging information gives some more info on the buildbuildsh relationship click to expand

makefile
 make d trafficmonitortrafficmonitorrpm
gnu make 
built for 
copyright c  free software foundation inc
license  gnu gpl version  or later 
this is free software you are free to change and redistribute it
there is no warranty to the extent permitted by law
reading makefiles
reading makefile makefile
updating makefiles
 considering target file makefile
 
 no need to remake target makefile
updating goal targets
considering target file trafficmonitortrafficmonitorrpm
  considering target file 
    considering target file trafficmonitorbuild
     looking for an implicit rule for trafficmonitorbuild
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildo
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildcc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildcpp
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildp
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildf
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildf
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildm
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildr
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuilds
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuilds
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildmod
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildsh
     found an implicit rule for trafficmonitorbuild
      considering target file trafficmonitorbuildsh
       looking for an implicit rule for trafficmonitorbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorbuildshv
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorrcsbuildshv
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorrcsbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorsbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorsccssbuildsh
       no implicit rule found for trafficmonitorbuildsh
       finished prerequisites of target file trafficmonitorbuildsh
      no need to remake target trafficmonitorbuildsh
     finished prerequisites of target file trafficmonitorbuild
     prerequisite trafficmonitorbuildsh is newer than target trafficmonitorbuild
    must remake target trafficmonitorbuild
cat trafficmonitorbuildsh trafficmonitorbuild 
putting child  trafficmonitorbuild pid  on the chain
live child  trafficmonitorbuild pid  
binsh line  trafficmonitorbuild is a directory
reaping losing child  pid  
make   error 
removing child  pid  from chain




licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
473,the ort timeout is hardcoded to  seconds and should be set by a command line variable or similar,Not_TD,TD
474,"while i was looking through the testing logs on the apache jenkins instance i saw that docker is very aggressively caching layers of the docker files default behavior  you can see when this happens by searching the log for the phrase  using cache  this means that the line of the dockerfile didnt change and it already had run so it just layers appends filesystem changes from a previous run to your image  for many instructions this is ok but in any case where your doing something like installing packages without a version explicitly or running any kind of scripts you may get unexpected results  

docker best practices are to try and move these kinds of commands to later in the dockerfile to prevent a cascade rebuild and to dynamically generate an id as part of any script names to intentionally break the cache  alternatively you can completely disable the layer caching of docker by splitting your dockercompose up build up into two separate steps with the nocache argument on the build",Not_TD,TD
475,"
  cdnsnamenamesslkeys
  cdnsnamenamednsseckeys
  federations
  steeringidtargets",Not_TD,Not_TD
476,traffic monitor splitbrain scenario can have a violent recovery path  potentially taking marking all caches unhealthyauthor zhilin huangjira link a hreffound version ,Not_TD,Not_TD
477,"while i was looking through the testing logs on the apache jenkins instance i saw that docker is very aggressively caching layers of the docker files default behavior  you can see when this happens by searching the log for the phrase  using cache  this means that the line of the dockerfile didnt change and it already had run so it just layers appends filesystem changes from a previous run to your image  for many instructions this is ok but in any case where your doing something like installing packages without a version explicitly or running any kind of scripts you may get unexpected results  

docker best practices are to try and move these kinds of commands to later in the dockerfile to prevent a cascade rebuild and to dynamically generate an id as part of any script names to intentionally break the cache  alternatively you can completely disable the layer caching of docker by splitting your dockercompose up build up into two separate steps with the nocache argument on the build",Not_TD,TD
478,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic vault

 current behavior
when using the  feature of riak the user has to pass a maximum number of rows that can be turned in a single query this is 

the endpoints using this search query are
get cdnsnamenamesslkeys  gets all sslkeys for dss on a cdn
delete snapshot  deletes old sslkeys on a ds for a cdn

in effect this means that if you have a cdn with over  thousand dss with sslkeys the client will be unable to get all of the sslkeys
in terms of deleting if any change is made to a cdn with over  keys then only the first  sslkey records for that cdn will be correctly cleaned up




 expected behavior
cdn works as expected regardless of the number of sslkeys specifically get cdnsnamenamesslkeys should be able to return more than  records and delete snapshot should cleanup all sslkeys regardless of total count


 minimal reproduction of the problem with instructions
create a cdn with over a thousand ds that have sslkeys 

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
479,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  cdn in a box makefile

 current behavior

the recipe for makefile target trafficmonitortrafficmonitorrpm in the cdn in a box directory will fail to build if trafficmonitorbuildsh is newer than trafficmonitorbuild or its contents

 expected behavior

all makefile recipes should succeed

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

failure when trafficmonitorbuildsh is newer
shell
 touch trafficmonitorbuildsh  make trafficmonitortrafficmonitorrpm
cat trafficmonitorbuildsh trafficmonitorbuild
binsh line  trafficmonitorbuild is a directory
make   error 


success when trafficmonitorbuild is newer
shell
 touch trafficmonitorbuild  make trafficmonitortrafficmonitorrpm
pkg v  trafficmonitorbuild
building trafficmonitorbuild
pulling trafficmonitorbuild  done
creating buildtrafficmonitorbuildrun  done
 readlink trafficcontrolbuildcleanbuildsh



 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

printing debugging information gives some more info on the buildbuildsh relationship click to expand

makefile
 make d trafficmonitortrafficmonitorrpm
gnu make 
built for 
copyright c  free software foundation inc
license  gnu gpl version  or later 
this is free software you are free to change and redistribute it
there is no warranty to the extent permitted by law
reading makefiles
reading makefile makefile
updating makefiles
 considering target file makefile
 
 no need to remake target makefile
updating goal targets
considering target file trafficmonitortrafficmonitorrpm
  considering target file 
    considering target file trafficmonitorbuild
     looking for an implicit rule for trafficmonitorbuild
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildo
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildcc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildc
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildcpp
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildp
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildf
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildf
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildm
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildr
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuilds
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuilds
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildmod
     trying pattern rule with stem build
     trying implicit prerequisite trafficmonitorbuildsh
     found an implicit rule for trafficmonitorbuild
      considering target file trafficmonitorbuildsh
       looking for an implicit rule for trafficmonitorbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorbuildshv
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorrcsbuildshv
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorrcsbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorsbuildsh
       trying pattern rule with stem buildsh
       trying implicit prerequisite trafficmonitorsccssbuildsh
       no implicit rule found for trafficmonitorbuildsh
       finished prerequisites of target file trafficmonitorbuildsh
      no need to remake target trafficmonitorbuildsh
     finished prerequisites of target file trafficmonitorbuild
     prerequisite trafficmonitorbuildsh is newer than target trafficmonitorbuild
    must remake target trafficmonitorbuild
cat trafficmonitorbuildsh trafficmonitorbuild 
putting child  trafficmonitorbuild pid  on the chain
live child  trafficmonitorbuild pid  
binsh line  trafficmonitorbuild is a directory
reaping losing child  pid  
make   error 
removing child  pid  from chain




licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,TD
480," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic router
  ci tests

 current behavior
currently the scope of the trtests github action is a bit unclear yes you can read the readme but you know

 new behavior
renaming to trunittests clarifies the scope of the gha


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
481,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  cdn in a box

 current behavior

the riak trafficvault container is a default service in cdn in a box

 new behavior

the trafficvault service should not be included in cdn in a box by default it and the trafficvault directory should be moved to the optional directory

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

  start cdn in a box
  see that the riak trafficvault container is running
    shell
    dockercompose ps trafficvault
    


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",Not_TD,TD
482,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic control cache config  rpm spec file

 current behavior

unless the rpm build distribution is rhel  rhel  or rhel  an rpm from  will have no dependencies

 expected behavior

trafficcontrolcacheconfig should depend on git and perl


 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 go through the steps to 

 build the tc cache config rpm outside of docker assuming you are not on centos  centos  or centos 
    shell
    cd infrastructurecdninabox
    make native cachetrafficcontrolcacheconfigrpm
    rpm q requires cachetrafficcontrolcacheconfigrpm
    

    output of rpm q requires cachetrafficcontrolcacheconfigrpm that reproduces the bug
    
    binsh
    binsh
    usrbinperl
    configtrafficcontrolcacheconfig  
    perlgetoptlong
    perlstrict
    perlwarnings
    rpmlibcompressedfilenames  
    rpmlibfiledigests  
    rpmlibpayloadfileshaveprefix  
    rpmlibpayloadisxz  
    


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license


",Not_TD,Not_TD
483,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior

testcdns fails for api 

go
info   using config values
                           to config file       conftrafficopstestconf
                           to fixtures          tcfixturesjson
                           to url               
                           to session timeout in secs  
                           db server            localhost
                           db user              trafficops
                           db name              trafficops
                           db ssl               false
               useims               true
 run   testcdns
     expected only one cdn response  
 fail testcdns 
fail
fail         
fail


 expected behavior

testcdns should pass

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go test  cfgconftrafficopstestconf testv testrun testcdns



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
484,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  github actions

 current behavior

when the traffic ops api tests fail or setup fails the tointegrationtests will still succeed

 expected behavior

the traffic ops api tests github action should fail when the api tests fail or if setup fails

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
485,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  github actions

 current behavior

when the traffic ops api tests fail or setup fails the tointegrationtests will still succeed

 expected behavior

the traffic ops api tests github action should fail when the api tests fail or if setup fails

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
486," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
most of the functions that write http responses in to ignore write errors  this means that if there are any errors writing http responses due to eg hitting timeouts we are mostly blind to them currently

 expected behavior
to should log warnings if any errors occur when writing http responses

 minimal reproduction of the problem with instructions
since the current behavior is invisible youre just going to have to look at the code and trust me on this
",Not_TD,Not_TD
487,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior

testcdns fails for api 

go
info   using config values
                           to config file       conftrafficopstestconf
                           to fixtures          tcfixturesjson
                           to url               
                           to session timeout in secs  
                           db server            localhost
                           db user              trafficops
                           db name              trafficops
                           db ssl               false
               useims               true
 run   testcdns
     expected only one cdn response  
 fail testcdns 
fail
fail         
fail


 expected behavior

testcdns should pass

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
go test  cfgconftrafficopstestconf testv testrun testcdns



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
488," im submitting a 
  bug report

 traffic control components affected 
  traffic ops ort

 current behavior

when running ort on a mid cache server it creates a urlsig file that is not needed

 expected behavior

that this file would not be created

 minimal reproduction of the problem with instructions

using tc  create a ds that has url sig keys and set the signing algorithm type to url signature keys assign some cache servers ssh to a mid cache run ort in report mode it doesnt create the file in report mode but one can see that it will



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
489,"when creating or updating a server you cant assign the server to cdn  and to profile a which belongs to cdn  this will result in an api error because of the cdn mismatch

therefore it would be nice when you select cdn  if it would filter the list of profiles to only show those that belong to cdn ",Not_TD,TD
490," im submitting a 
  bug report

 traffic control components affected 
  documentation

 current behavior
incorrect role specified for the jobs endpoints putpostdelete   

 expected behavior
according to routesgo the portal role or above is required

 minimal reproduction of the problem with instructions
view the docs for   and  to ensure the role is correct


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
491,"for example following this link

 

would auto apply a filter to the servers table like



essentially this provides deep linking capabilities to tp that controls table filtering
",Not_TD,Not_TD
492,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  github actions

 current behavior

the go vet github actions workflow uses a step named goversion to set an output named value to the value of the  file


but because the id of that step is not set to goversion when the next step tries to set the goversion input to the value of stepsgoversionoutputsvalue

that value is an empty string 

 expected behavior

the id of the goversion step needs to be set to goversion instead of the name and name can be changed to something more readable

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 in the github web ui for the apachetrafficcontrol repo go to actions  go vet  the latest run in the list  govet
 expand the run  step and see that the goversion input is not set
  


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license
",Not_TD,Not_TD
493,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic router

 current behavior

the traffic router integration tests require an actual traffic monitor in order to run
 
 
 
 

 new behavior

the tr integration tests should use a mock traffic monitor server and mock traffic ops server like the external tests use


 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section

 remove trafficroutercoresrctestconftrafficmonitorproperties if it exists
 run the integration tests watch them fail
    java
    mvn  verify
    


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license


",Not_TD,TD
494," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
i dont believe there is a way currently via tp andor the to api to see how many change log entries have been created by a particular user imo this information would be helpful when evaluating user activity along with  

 new behavior
do one of  things or maybe both
 add changelogcount to the response payload of the user to api endpoints this would require a join to the log table
 add query param support such as get logsusername

 anything else
if this is added to the api then it needs to be added to tp as well ie 
  should show the changelogcount in the grid
  should have a new button called view change logs or something


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,TD
495," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
making a put request to deliveryservicesidsafe will return a different structure from a request made to deliveryservices for the same api version as these are not the same endpoint theres technically no reason they need to return the same structural representation for the same delivery service at the same api version but because released api versions were retroactively changed to return extra fields this is a regression bug in fixing it i suggest we define the response structure to be isomorphic to deliveryservices

the various api versions requested for deliveryservicesidsafe compared to the api version of deliveryservices that would yield the same structure as deliveryservicesidsafe are given below

 deliveryservicesidsafe version deliveryservices version
 
  
  
  
  
  
  
  
  
  


 expected behavior
the structure of a response from deliveryservicesidsafe should be the same as that of a response from deliveryservices for the same api version in other words instead of the behavior described by the above table what id expect to see is something more like

 deliveryservicesidsafe version deliveryservices version
 
  
  
  
  
  
  
  
  
  

 minimal reproduction of the problem with instructions
make requests to deliveryservicesidsafe note the presence or absence of fields introduced or removed in various api versions of deliveryservices and their presence or absence from deliveryservicesidsafe",Not_TD,Not_TD
496," im submitting a 
  bug report

 traffic control components affected 
  traffic ops

 current behavior
making a request to serversiddeliveryservices will return a different structure from a request made to deliveryservices for the same api version as these are not the same endpoint theres technically no reason they need to return the same structural representation for the same delivery service at the same api version but because released api versions were retroactively changed to return extra fields this is a regression bug in fixing it i suggest we define the response structure to be isomorphic to deliveryservices

the various api versions requested for serversiddeliveryservices compared to the api version of deliveryservices that would yield the same structure as serversiddeliveryservices are given below

 serversiddeliveryservices version deliveryservices version
 
  
  
  
  
  
  
  
  
  


 expected behavior
the structure of a response from serversiddeliveryservices should be the same as that of a response from deliveryservices for the same api version in other words instead of the behavior described by the above table what id expect to see is something more like

 serversiddeliveryservices version deliveryservices version
 
  
  
  
  
  
  
  
  
  

 minimal reproduction of the problem with instructions
make requests to serversiddeliveryservices note the presence or absence of fields introduced or removed in various api versions of deliveryservices and their presence or absence from serversiddeliveryservices",Not_TD,TD
497,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops
  traffic vault

 current behavior
when using the  feature of riak the client has to pass a maximum number of rows that can be turned in a single query this is 

the endpoints using this search query are
get cdnsnamenamesslkeys  gets all sslkeys for dss on a cdn
put snapshot  deletes old sslkeys on a ds for a cdn

in effect this means that if you have a cdn with over  dss with sslkeys the client will be unable to get all of the sslkeys
in terms of deleting if any change is made to a cdn with over  keys then only the first  sslkey records for that cdn will be correctly cleaned up




 expected behavior
cdn works as expected regardless of the number of sslkeys specifically get cdnsnamenamesslkeys should be able to return more than  records and delete snapshot should cleanup all sslkeys regardless of total count


 minimal reproduction of the problem with instructions
create a cdn with over a thousand ds that have sslkeys 

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
498," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic portal

 current behavior
in tp if you use an  cidr w a masklen   you get the following warning


 new behavior
since  is an extremely common  masklen tp should really only warn if the  masklen is   also the wording should be changed from large cidr detected  with cidr   or  with cidr   can be problematic to large cidr block detected  masklen   or  masklen   it shouldnt really say that it can be problematic when there may be valid reasons for a server to be on a network w a large cidr block network addressing is not really within the scope of the cdn

 minimal reproduction of the problem with instructions
in tp assign a server ip address with an  masklen  
",Not_TD,Not_TD
499,"hello maintainers

i am a pmc member of apache airflow and i wanted to give you a bit of headsup with rather important migration to the upcoming version of requests library in your python release

since you are using requests library in your project you are affected

as discussed at length in  we found out that the chardet library used by requests library was a mandatory dependency to requests and since it has lgpl licence we should not release any apache software with it

since then and since in airflow we rely on requests heavily we have been working with the requests maintainers and charsetnormalizer maintainer to make it possible to replace chardet with mitlicensed charsetnormalizer instead so that requests library can be used in python releases by apache projects

this was a bumpy road but finally the pr by ashbhas been merged and we hope soon a new version of requests library will be released

this is just a headsup i will let you know when it is released but i have a kind requests as well  i might ask the maintainers to release a release candidate of requests and maybe you could help to test it before it is released that would be some reassurance for the maintainers of requests who are very concerned about stability of their releases

let me know if you need any more information and whether you would like to help in testing the candidate when it is out",Not_TD,Not_TD
500,"hello maintainers

i am a pmc member of apache airflow and i wanted to give you a bit of headsup with rather important migration to the upcoming version of requests library in your python release

since you are using requests library in your project you are affected

as discussed at length in  we found out that the chardet library used by requests library was a mandatory dependency to requests and since it has lgpl licence we should not release any apache software with it

since then and since in airflow we rely on requests heavily we have been working with the requests maintainers and charsetnormalizer maintainer to make it possible to replace chardet with mitlicensed charsetnormalizer instead so that requests library can be used in python releases by apache projects

this was a bumpy road but finally the pr by ashbhas been merged and we hope soon a new version of requests library will be released

this is just a headsup i will let you know when it is released but i have a kind requests as well  i might ask the maintainers to release a release candidate of requests and maybe you could help to test it before it is released that would be some reassurance for the maintainers of requests who are very concerned about stability of their releases

let me know if you need any more information and whether you would like to help in testing the candidate when it is out",Not_TD,TD
501," im submitting a 
  enhancement request

 traffic control components affected 
  traffic portal

 current behavior
when viewing the change log table page eg  long messages are difficult to read and you cannot click on the entry to open it up to view it in its entirety

 new behavior
id like to be able to click on a change log entry in the table in order to open it up eg modal or a new page to be able to easily read the log message in its entirety

 minimal reproduction of the problem with instructions
go to change log table page eg  and try clicking on an entry

 anything else
personally i dont really care if it opens a modal or a new page i just want to be able to easily read long change log messages i think tp used to open the log entry in a new page before the table was converted to aggrid
",Not_TD,Not_TD
502," im submitting a 
  bug report
 
 traffic control components affected 
  traffic server

 current behavior
i am using a mid cache server above an edge cache server and created two delivery service

 delivery service url    origin url   not https
 delivery service url    origin url   https

now i am able to access  first delivery service url   but when i try to access second  delivery service url   its returning following error




  note failure threshold met    http parent proxy  marked down


edge cache server configs  

remapconfig


map	      

map	      


parentconfig


destdomainexampleorg   schemehttp  roundrobinconsistenthash godirectfalse qstringconsider

destdomainexamplecom   schemehttps  roundrobinconsistenthash godirectfalse qstringconsider




mid cache server configs

remapconfig


map   

map   


parentconfig 


destdomainexampleorg   schemehttp  roundrobinconsistenthash godirecttrue qstringignore parentisproxyfalse

destdomainexamplecom   schemhttps  roundrobinconsistenthash godirecttrue qstringignore parentisproxyfalse



 expected behavior
able to access second delivery service


 minimal reproduction of the problem with instructions

 use a mid cache server above the edge cache server
 create a delivery service with https enabled origin url
 and try to access the delivery service


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
503," im submitting a 
  bug report

 traffic control components affected 
  traffic ops client go tests

 current behavior
the tests for the profileparameter endpoint methods of the client are checking that responses are by default sorted by parameter name which is impossible because the endpoint doesnt return parameter names  it succeeds only because a list of empty strings is trivially sorted both ascending and descending

the specific test content is
go
func sorttestprofileparameterst testingt 
	var header httpheader
	var sortedlist string
	resp  err  tosessiongetprofileparametersnil header
	if err  nil 
		tfatalfexpected no error but got v errerror
	
	for i  range resp 
		sortedlist  appendsortedlist respparameter
	

	res  sortsliceissortedsortedlist funcp q int bool 
		return sortedlist  sortedlist
	
	if res  true 
		terrorflist is not sorted by their names v sortedlist
	



now the endpoint does return objects with a parameter property but that is actually the parameters id not its name the objects returned from the client have their profilename and parameterid set but not lastupdated by a coercion process in the client itself that unmarshals the response as an array of profileparameternullable and then broadens the data to profileparameter which contains many extraneous fields

 expected behavior
tests should only test expected behavior and client methods should use appropriate data types in their call signatures

 minimal reproduction of the problem with instructions
add a tlogf to that test to print out the list then run it and observe that the list contains only empty strings

 anything else
im mostly just opening this issue to justify deleting the test from the  tests in  and so i dont forget that justification come review time but  and earlier presumably also suffer from it",Not_TD,TD
504," im submitting a 
  new feature  enhancement request

 traffic control components affected 
  traffic ops
  traffic portal

 current behavior
tp and the to api will not provide you with any information regarding the last timedate a user successfully authenticated this information can be helpful when disabling users that no longer use the system ie data cleanup

 new behavior
when a user successfully authenticates post userlogin capture the timedate and provide this information via the to api and tp similar to the way userlastupdated is captured this info should be added to

to api

 get usercurrent
 get users
 get userid

tp

 
 
 


    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
505," im submitting a 
  bug report

 traffic control components affected 
  traffic monitor

 current behavior
tm sometimes appears to add cachegroups to the disabledlocations array in its publishcrstates api when all caches are set to online in the following example all caches are online yet disabledlocations contain cachegroups


    caches 
         
             true
             false
            isavailable true
        
         
             true
             false
            isavailable true
        
         
             true
             false
            isavailable true
        
         
             true
             false
            isavailable true
        
    
    deliveryservices 
         
            disabledlocations 
            isavailable false
        
         
            disabledlocations 
                
            
            isavailable true
        
         
            disabledlocations 
                
            
            isavailable true
        
         
            disabledlocations 
            isavailable false
        
         
            disabledlocations 
                
            
            isavailable true
        
         
            disabledlocations 
                
            
            isavailable true
        
    



 expected behavior
since all the caches are online the above example should have no cachegroups in disabledlocations when a cachegroup is in disabledlocations that essentially tells tr that all caches in that cachegroup are unavailable

 minimal reproduction of the problem with instructions
set all caches to online in a cdn with one or more delivery services snapshot and request tms publishcrstates api

 anything else
ive tried to reproduce this in ciab but in ciab tm doesnt populate the disabledlocations array the same as it does in the environment in which this was observed honestly as this is basically just a premature optimization for traffic router we might just want to change tm to never populate the disabledlocations traffic router will still quickly find that all caches are unavailable in a given cachegroup and try the next closest checking disabledlocations probably only saves tr a handful of nanoseconds when routing a request and only if entire cachegroups are unavailable so i think wed be fine if tm never populated it
",Not_TD,TD
506," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  traffic ops

 current behavior
you can unassign all online org servers from an active msoenabled delivery service

 new behavior
to should prevent this from happening if you really intend to remove all online org servers from an msoenabled delivery service you should have to deactivate it first or disable mso

 minimal reproduction of the problem with instructions
for an msoenabled delivery service unassign all of its online org servers
",Not_TD,Not_TD
507,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  bug report

 traffic control components affected 

  traffic ops

 current behavior


the delete cdnsnamefederationsid expects the cdn name as a parameter but actually takes in the cdn id this is misleading and confusing to anyone who uses that api endpoint 
 expected behavior


the endpoint should take in the cdn name for the name parameter as do all the other federation endpoints
 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

run to and tp locally
open the network tab of the inspect console in tp so that you can see the requests 
create a federation for one of the cdns and then try to delete it
note how the delete endpoint takes in the cdn id for the name parameter
 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section



licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
508,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 
  bug report

 traffic control components affected 
  traffic router

 current behavior


 sometimes traffic router doesnt load latest configuration

traffic router loads the config file from  traffic monitor based on a timestamp of snapshot config files in json format but sometime it rejects the snapshot due to older timestamp
therefore traffic router does not create dns records for the new services 


 error logs


info    comcomcastcdntrafficcontroltrafficroutercoreconfigconfighandler  exiting processconfig incoming trconfig snapshot timestamp  is older or equal to the loaded timestamp  unable to process
warn    comcomcastcdntrafficcontroltrafficroutercoreutilperiodicresourceupdater  file rejected opttrafficrouterdbcrconfigjson



 expected behavior

 the traffic router instance should be in sync with traffic ops instance
 always pull lates crconfigjson from traffic monitor for any new snapshot

 minimal reproduction of the problem with instructions

if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

 create multiple delivery services one by one at same time and take snapshot after creation of every delivery service

 anything else

eg stacktraces related issues suggestions how to fix feel free to delete
this section

 no


licensed to the apache software foundation asf under one
or more contributor license agreements  see the notice file
distributed with this work for additional information
regarding copyright ownership  the asf licenses this file
to you under the apache license version  the
license you may not use this file except in compliance
with the license  you may obtain a copy of the license at

    

unless required by applicable law or agreed to in writing
software distributed under the license is distributed on an
as is basis without warranties or conditions of any
kind either express or implied  see the license for the
specific language governing permissions and limitations
under the license

",Not_TD,Not_TD
509," im submitting a 
  bug report

 traffic control components affected 
  traffic vault

 current behavior
when attempting to run the reencrypt tool it fails with the following error

 reencrypt newkey gosrcgithubcomapachetrafficcontroltrafficopsappconfnewkey previouskey gosrcgithubcomapachetrafficcontroltrafficopsappconfaeskey
reencrypting ssl keys querying pq column id does not exist


 expected behavior
running the tool should successfully reencrypt the contents of the tv postgres db instead of failing",Not_TD,Not_TD
510," im submitting a 

  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic portal

 current behavior
last authenticated value only shows on the users table but not on the user form

 new behavior
display last authenticated value in readonly mode on user form maybe above registration sent




    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
511,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc
  other 

 traffic control components affected 


  traffic ops ort


 current behavior


with the recent sni changes it seems that the only way to block tls versions  and  is to ensure every ds has a profile and associate a parameter with the tls version subset
having a global default for disabling versions or not generating sniyaml entries for default configuration which would pick up recordsconfig settings would be a preferred behavior

 new behavior


allows old deprecated tls versions to be disabled more easily

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
512,"
 this bug report affects these traffic control components
 traffic ops

 current behavior
a request to put  with a request body like



  
    
    mappings
    
       
       
    
  
  
    
    mappings
    
       
       
    
  



will wipe out all federation to federation resolver mappings associated with a users delivery services and replace them with only the first one in the request payload so if you have  mappings and try to add one you will end up with  instead of 

 expected behavior
the federation to federation resolver mappings associated with a users delivery services should be replaced with all entries sent in the request payload not just the first obviously

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version



post  with


  
    
    mappings
    
       
       
    
  
  
    
    mappings
    
       
       
    
  



to create  federation mappings for your user verify that  were created by calling get  now try the put  endpoint with the same payload as the post verify that only  mapping exists by calling get 

side note what is the difference between the post and put  besides one apparently has a bug and the other does not",Not_TD,Not_TD
513,"
 this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
search for any instances of





example



 new behavior
add noreferrer or noreferrer to the anchor

",Not_TD,Not_TD
514," this improvement request usability performance tech debt etc affects these traffic control components

 traffic ops

 current behavior
postinstallpy logs certpath as well as conffile

 new behavior
remove any potentially sensitive info from logs
",Not_TD,Not_TD
515,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic portal

 current behavior

traffic portal has an inefficient regular expression



this part in particular runs in exponential time

regex



 new behavior

the regex should be rewritten to be more efficient
",Not_TD,TD
516,"
 this improvement request usability performance tech debt etc affects these traffic control components
 traffic portal

 current behavior
search for any instances of





example



 new behavior
add noreferrer or noreferrer to the anchor

",Not_TD,Not_TD
517," this bug report affects these traffic control components
 traffic monitor

 current behavior

when traffic ops is offline and traffic monitor is restarted the following happens

 doesnt use a back crconfig by design probably
 it doesnt recover when traffic ops comes back
 manual traffic monitor restart needs to occur

logs


error   opsconfigmanager error getting traffic ops data error getting crconfig from traffic ops nil session
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil


 expected behavior

traffic monitor should recover from traffic ops coming back

 steps to reproduce

 systemctl stop trafficops  stop traffic ops
 systemctl stop  trafficmonitor  restart traffic monitor while traffic ops is unavailable
 systemctl start trafficops  start traffic ops
 observe the traffic monitor logs

",Not_TD,TD
518," this bug report affects these traffic control components
 traffic monitor

 current behavior

when traffic ops is offline and traffic monitor is restarted the following happens

 doesnt use a back crconfig by design probably
 it doesnt recover when traffic ops comes back
 manual traffic monitor restart needs to occur

logs


error   opsconfigmanager error getting traffic ops data error getting crconfig from traffic ops nil session
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil
warning   monitorconfigpoller skipping this iteration session is nil


 expected behavior

traffic monitor should recover from traffic ops coming back

 steps to reproduce
bash
systemctl stop trafficops  stop traffic ops
systemctl restart  trafficmonitor  restart traffic monitor while traffic ops is unavailable
systemctl start trafficops  start traffic ops

 observe the traffic monitor logs

",Not_TD,TD
519,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

 github actions

 current behavior

the tointegrationtests github action starts but does not use a riak docker container

 new behavior

the riak container should be removed

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section




    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license
",Not_TD,Not_TD
520,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 cdn in a box


 current behavior
when trying to build enroller in ciab with debugging the following error occurs

  bustermain  linuxlibcdev  
    not found 
  bustermain     
  bustermain     
fetched  mb in   mbs
e failed to fetch     not found 
e unable to fetch some archives maybe run aptget update or try with fixmissing

this appears to be because  is no longer in the debian repo



 expected behavior
enroller should build without issue



 steps to reproduce
occurs when running dockercompose f dockercomposeyml f dockercomposeexposeportsyml f optionaldockercomposedebuggingyml f dockercomposereadinessyml build
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,Not_TD
521,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 cdn in a box


 current behavior
when trying to build enroller in ciab with debugging the following error occurs

  bustermain  linuxlibcdev  
    not found 
  bustermain     
  bustermain     
fetched  mb in   mbs
e failed to fetch     not found 
e unable to fetch some archives maybe run aptget update or try with fixmissing

this appears to be because  is no longer in the debian repo



 expected behavior
enroller should build without issue



 steps to reproduce
occurs when running dockercompose f dockercomposeyml f dockercomposeexposeportsyml f optionaldockercomposedebuggingyml f dockercomposereadinessyml build
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,Not_TD
522," this bug report affects these traffic control components
 traffic control cache config  formerly ort

 current behavior
every time  apply makes a request to to i assume its outputting a warning line because the response from the client is written to stderr this makes it think that there was a possible problem even though the exit code of the external call was   which would be fair except that the response is  ok and doesnt seem to merit an actual warning example

warning    returned code  but stderr error   debug toreqnew reqinf cachehitstatusmiss   respheaders

looks like maybe a debug print statement got left in somewhere  which should be debuglevel not errorlevel which might resolve the issue

 expected behavior
 should only warn me about warnings

 steps to reproduce
run  apply
",Not_TD,Not_TD
523," this bug report affects these traffic control components

 traffic router

 current behavior

exception when ds regexp doesnt match the xmlid certificate not created


warn    comcomcastcdntrafficcontroltrafficroutercoredsletsencryptdnschallengewatcher  failed updating dns challenge txt record with data from 
javalangnullpointerexception
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 
	at 


 expected behavior

lets encrypt certificate created


 steps to reproduce

 create a new ds
 change the regexp so it doesnt match the xmlid
 snapshot verify ds is working
 add a lets encrypt ssl certificate
 watch for exceptions in the log

",Not_TD,TD
524," im submitting a 
  bug report

 traffic control components affected 
  traffic ops
  traffic ops client go

 current behavior
the documentation mentions a query parameter param which is the id of a parameter and it fetches all profiles to which the thereby identified parameter is assigned this parameters type is unverified by the api no checker specified in the wherecolumninfo and if you use it with an unsupported value

http
get  
useragent 
acceptencoding gzip deflate
accept 
connection keepalive
cookie mojolicious

it causes an internal server error
http
  internal server error
accesscontrolallowcredentials true
accesscontrolallowheaders origin xrequestedwith contenttype accept setcookie cookie
accesscontrolallowmethods postgetoptionsputdelete
accesscontrolalloworigin 
contentencoding gzip
contenttype applicationjson
setcookie mojolicious
vary 
xservername trafficopsgolang
date wed  feb   gmt
contentlength 


        alerts 
                
                        text internal server error
                        level error
                
        



whats strange is that the client also has methods that utilize this parameter and request input as a string not an integral type and there are tests that are passing that use those methods

the profile structure in libgotc has a parameter field and the tests appear to be using this field to provide the input for the query parameter i can only assume that the tests are passing merely by virtue of the request returning a  ok response and that profileparameter property is always an empty string because it has no purpose or meaning and is never populated

 expected behavior
the client should test that query parameters behave in their intended way data structures should not have fields that serve no purpose requires  and passing a bad query parameter should result not in a  internal server error response but a  bad request response with an alert that explains why the request failed

 minimal reproduction of the problem with instructions
make the request as shown above",Not_TD,TD
525," opttrafficopsinstallbinpostinstall a cfile opttrafficopsinstallbininputjson
inforootstarting postinstall
inforootdebug is on
inforootrunning in automatic mode
inforootusing input file opttrafficopsinstallbininputjson
inforootadding question port to serve on with default answer 
inforootadding question ldapconf location with default answer opttrafficopsappconfldapconf
inforootadding question ldap server hostname with default answer
inforootadding question ldap admin password with default answer
inforootadding question ldap search query with default answer
inforootadding question ldap skip tls verify with default answer
inforootadding question ldap timeout seconds with default answer
inforootfile sanity check complete  found  differences
inforootopttrafficopsappconfproductiondatabaseconf
inforootdatabase configuration has been saved
inforootopttrafficopsappconfproductiontvconf
inforootdatabase configuration has been saved
inforootnot setting up ldap
inforootopttrafficopsinstalldatajsonusersjson
traceback most recent call last
  file opttrafficopsinstallbinpostinstallpy line  in 
    argsnodatabase
  file opttrafficopsinstallbinpostinstallpy line  in main
    rootdir
  file opttrafficopsinstallbinpostinstallpy line  in generateusersconf
    hashedpass  hashpassconfig
  file opttrafficopsinstallbinpostinstallpy line  in hashpass
    hashed  hashlibscryptpasswdencode saltsalt nn rrval ppval dklendklen
attributeerror module hashlib has no attribute scrypt
error on line  of opttrafficopsinstallbinpostinstall

i have installed all the dependencies and still getting this error i am using centos ",Not_TD,TD
526,"hi all

i tried to postinstall opttrafficopsinstallbinpostinstall and got the below error


r
unning goose up
goose migrating db environment production current version  target 
  fail  pq constraint ipaddressinterfacefkey of relation ipaddress does not exist quitting migration
cant run goose exit status 
database migrate failed
died at opttrafficopsinstalllibinstallutilspm line 
error on line  of opttrafficopsinstallbinpostinstall



 w",Not_TD,Not_TD
527,"could not able to create a build using  using buildcleanbuildsh


 buildcleanbuildsh
 readlink buildcleanbuildsh
 scriptpath
 scriptpathbuildcleanbuildsh
 dirname buildcleanbuildsh
 cd build
 git revparse showtoplevel
 tcvolume
 tcvolumetrafficcontrol
 export gopathtmpgo gooslinux
 gopathtmpgo
 gooslinux
 tcdirtmpgosrcgithubcomapachetrafficcontrol
 which cygpath
 mkdir p tmpgo
 cd tmpgo
 dirname tmpgosrcgithubcomapachetrafficcontrol
 mkdir p src pkg bin tmpgosrcgithubcomapache
 rsync a excludedist  trafficcontrol tmpgosrcgithubcomapachetrafficcontrol
rsync changedir trafficcontrol failed no such file or directory 
rsync error some filesattrs were not transferred see previous errors code  at  
 
 
 echo error on line  of buildcleanbuildsh
error on line  of buildcleanbuildsh
 cleanup
 setowner trafficcontrol trafficcontroldist
 stat cug trafficcontrol
 stat fug trafficcontrol
stat invalid option  
try stat help for more information
 own




where as if i clone   the same is working and version  is getting built",Not_TD,Not_TD
528,"hi all

i tried to postinstall opttrafficopsinstallbinpostinstall and got the below error



running goose up
goose migrating db environment production current version  target 
  fail  pq constraint ipaddressinterfacefkey of relation ipaddress does not exist quitting migration
cant run goose exit status 
database migrate failed
died at opttrafficopsinstalllibinstallutilspm line 
error on line  of opttrafficopsinstallbinpostinstall


we do got the same error when dbadmin env production migrate i am not sure why a fresh setup require migration and it is being called in postinstall


goose migrating db environment production current version  target 
  fail  pq constraint ipaddressinterfacefkey of relation ipaddress does not exist quitting migration
cant run goose exit status 

",Not_TD,Not_TD
529,"from discussions
while doing some testing this morning i notice that the max origin connection handling can produce some unexpected results for example we put a mid cache in admindown and the max connection goes up after a syncds the problem is that when you change a server back to reported those max connection dont get back to normal and requires a syncds to be triggered again

i wonder if it would be better to keep the max origin connection intact while a mid cache server is brought into admindown

this mostly doesnt affect anything but it keeps the max origin connection flipping up and down in the configuration

the admindown state is usually short lived 

proposal create a new  parameter to ignore max origin connection instead of changing to current behavior  

 this improvement request usability performance tech debt etc affects these traffic control components

 traffic control cache config  formerly ort

 current behavior
when a mid cache is set to admindown all the max origin connections are changed across the cdn that mostly requires a manual queue update and syncds 

 new behavior
when servers are set to admindown do not change the max origin connection calculation
",Not_TD,Not_TD
530," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops
 documentation

 current behavior
currently federations are among the most convoluted and difficult to comprehend conceptsobjects in traffic control the process to create a federation  and what one even does  is poorly understood by many and thats reflected by the fact that  thats  for posterity but latest has the same page at the time of this writing still has steps for and screenshots of the traffic ops ui that was removed years ago

part of this is undoubtedly caused by the myriad of api endpoints used to manipulate federations currently these exist

 cdnsnamefederations
 cdnsnamefederationsid
 federationsall
 federations
 federationsiddeliveryservices
 federationsiddeliveryservicesdsid
 federationresolvers
 federationsidfederationresolvers
 federationsidusers
 federationsidusersuserid

and i cant say with certainty whether anyone actually knows offhand what all of these do

this is related to  but that seems to be primarily concerned with adding a new feature for specifyingaddingupdating ranges of resolver ip addresses it could be done at the same time as this maybe even should be but doesnt represent the same concept as i understand it

 new behavior
ideally there would be exactly one endpoint to access federations federations im not sure that user assignmentassociation is still relevant since that was created in the days of delivery servicetouser assignmentsassociations which no longer exist if so though the federationsidusers endpoint and federationsidusersuserid may also need to exist separately in some form although that would depend on the design chosen

im not going to propose a design here since i am one of the many who does not understand federations or their usecases and daytoday maintenance concerns people who have been working with these systems  apparently without the need for a guide  should be consulted on what information constitutes a federation and how its used and a design can be drafted from there

the documentation should be updated from the glossary to the quick howto guide and probably an overview section added",Not_TD,TD
531," this bug report affects these traffic control components
 traffic portal

 current behavior
the ds charts view in tp has an error if the api returns no values example

  this view calls get 

if the api endpoint returns no values seriesvalues it will throw this error 


cannot read property foreach of null


 expected behavior
handle the empty value without throwing an error


 steps to reproduce
see current behavior

",Not_TD,TD
532," im submitting a 
  improvement request usability performance tech debt etc

 traffic control components affected 
  documentation
  traffic router

 current behavior
the  are no longer relevant as the current supported versions are  and  soon to be  and  however there is some good examples there for running mvn with the djavalibrarypath argument to load the tomcatnative library which is required

 new behavior
the aforementioned docs should be removed but the example commands for running mvnjava with the djavalibrarypath argument should be added to the 

 minimal reproduction of the problem with instructions
read the linked docs",Not_TD,TD
533," this bug report affects these traffic control components
 traffic ops

 current behavior
get apiversiondeliveryservicesidhealth returns no info if the delivery service uses a topology



response 
totaloffline 
totalonline 
cachegroups 




 expected behavior
when a delivery service uses a topology it still should have a total for all online and offline caches as well as totals for each cache group employed by the topology such as this


response 
totaloffline 
totalonline 
cachegroups 

offline 
online 
name usflsarasota


offline 
online 
name usilchicago




 steps to reproduce
 assign servers directly to a delivery service
 get apiversiondeliveryservicesidhealth and observe the onlineoffline counts total and per cache group
 assign a topology to the delivery service
 get apiversiondeliveryservicesidhealth and observe no onlineoffline counts total and per cache group

",Not_TD,TD
534," this bug report affects these traffic control components
noneall depending on your point of view this bug only affects pkg

 current behavior
the pkg script when given no arguments will build every project listed by l

 expected behavior
previously the default build list was not the same as the output of l which just listed all projects that could be built in particular docs weasel and grovetccfgbuild used to be skipped when building without listing specific projects weasel takes a while so this does represent a significant increase in build time

however this behavior does seem more consistent i may even like it better than the old behavior but for convenience id want to at least be able to explicitly exclude projects from the build because i almost never want to build docs source grove both regular grove and grovetccfg or weasel

so in conclusion im not sure we want to consider this a regression bug or an intended feature change but the bottom line is that things that used to not happen are now happening so thats why its labeled like this feel free to change it

 steps to reproduce
run pkg from the repo root notice what it builds

",Not_TD,Not_TD
535," im submitting a
 bug report

 this bug report affects these traffic control components
 traffic ops

 current behavior
when you make a get request to the federationresolvers endpoint with query param invalid offset and page returns bad request with status code  

 expected behavior
request with an invalid query param should return valid error message

 minimal reproduction of the problem with instructions
get 
respone
 
    alerts 
        
            text bad request
            level error
        
    



",Not_TD,Not_TD
536,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops  postinstall

 current behavior

python postinstall fails on centos  if python  is installed but succeeds if python  is not installed because it will use python 

originally reported by rsidhaarth in the first draft of 

 expected behavior

the python postinstall script should succeed on centos  with or without python 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
dockercommands docker run rm ivpwdopt wopt  bash
yum y install  
pythoncommands pythonpathtrafficopsinstallbin 
import postinstall
printpostinstallhashpassmysecretpassword
pythoncommands
dockercommands

output
python

traceback most recent call last
  file  line  in 
  file opttrafficopsinstallbinpostinstallpy line  in hashpass
    hashed  hashlibscryptpasswdencode saltsalt nn rrval ppval dklendklen
attributeerror module hashlib has no attribute scrypt
",Not_TD,TD
537,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 automation 
 unknown

 current behavior

the chromium service fails to start in the traffic portal integration tests github action

  info success seleniumnode entered running state process has stayed up for  than  seconds startsecs
seeventbushost not set exiting
  info exited seleniumnode exit status  not expected


 expected behavior

the chromium service should start successfully

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

using the environment variables set in githubworkflowstpintegrationtestsyml
yaml
dockercompose dockercompose f up
version 
services
  hub
    image seleniumhub
  chromium
    image seleniumnodechrome
    environment
      hubhost hub
      hubport 
    volumes
       devshmdevshm
dockercompose
",Not_TD,Not_TD
538,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 automation 
 unknown

 current behavior

the chromium service fails to start in the traffic portal integration tests github action

  info success seleniumnode entered running state process has stayed up for  than  seconds startsecs
seeventbushost not set exiting
  info exited seleniumnode exit status  not expected


 expected behavior

the chromium service should start successfully

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

using the environment variables set in githubworkflowstpintegrationtestsyml
yaml
dockercompose dockercompose f up
version 
services
  hub
    image seleniumhub
  chromium
    image seleniumnodechrome
    environment
      hubhost hub
      hubport 
    volumes
       devshmdevshm
dockercompose
",Not_TD,Not_TD
539,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 cdn in a box

 current behavior

running cdn in a box with dockercompose version  fails

error the compose file dockercomposeyml is invalid because
servicesedgebuild contains unsupported option target
 contains unsupported option target
 contains unsupported option target


according to the  the target option should only be supported in compose file versions  and higher


 expected behavior

cdn in a box should work for all dockercompose versions supporting the compose file version used by cdn in a box currently 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
cd infrastructurecdninabox
curl lo 
chmod x 
 ps
",Not_TD,Not_TD
540,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops  postinstall

 current behavior

python postinstall fails on centos  if python  is installed but succeeds if python  is not installed because it will use python 

originally reported by rsidhaarth in the first draft of 

 expected behavior

the python postinstall script should succeed on centos  with or without python 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
dockercommands docker run rm ivpwdopt wopt  bash
yum y install  
pythoncommands pythonpathtrafficopsinstallbin 
import postinstall
printpostinstallhashpassmysecretpassword
pythoncommands
dockercommands

output
python

traceback most recent call last
  file  line  in 
  file opttrafficopsinstallbinpostinstallpy line  in hashpass
    hashed  hashlibscryptpasswdencode saltsalt nn rrval ppval dklendklen
attributeerror module hashlib has no attribute scrypt
",Not_TD,Not_TD
541,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 users and  clients

 current behavior

go packages that are new in atc  cannot be imported unless you use a specific commit hash

related 

 expected behavior

packages existing only in atc  should be importable

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

try to get a package that only exists in atc  not atc 

shell
 go mod init mymodule
go creating new gomod module mymodule
 go get 
go module githubcomapachetrafficcontrolupgrade found  but does not contain package 
",Not_TD,Not_TD
542," this bug report affects these traffic control components
 documentation

 current behavior
the docs say that theres a field containing the name of the users role called rolename


 expected behavior
the docs should accurately document the apis output


 steps to reproduce
toget kp   jq response  returns
json

        rolename admin
        username admin
        registrationsent null
         null
         null
        city null
        company null
        country null
        email null
        fullname null
        gid null
        id 
        newuser false
        phonenumber null
        postalcode null
        publicsshkey null
        role 
        stateorprovince null
        tenant root
        tenantid 
        uid null
        lastupdated  



note the field name is rolename not rolename

its unclear whether this is a regression without digging further into git history than i feel like doing right now but i think thats unlikely and its probably just that the docs have been copied with each successive major api version release from the previous version since  was added and the godoc for the field on the libgotc struct related to api user representations mentions a difference between api versions in the name of that property interestingly though the api docs for  get the name right while  and  both use the incorrect camelcase form

",Not_TD,TD
543,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic portal

 current behavior

when viewing either the servers or delivery services that a certain server capability is associated to see screenshots below when clicking on the name of the server capability in the breadcrumb it takes you back to the tp home page





 expected behavior

clicking the name of the server capability in the breadcrumb should take you back to that server capabilitys edit page

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

configure  server capabilities  click on a server capability row  view delivery services or view servers  click on the name of the server capability in the breadcrumb 

affects 
",Not_TD,Not_TD
544,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  improvement request usability performance tech debt etc

 traffic control components affected 

  traffic portal

 current behavior

recently we issued a large scale invalidation request against one of our delivery services  unfortunately we didnt realize that the origin was not configured to handle ifmodifiedsince or ifnonematch headers and always sent back  instead of   this resulted in a storm of requests going to the origin and a new mini storm starting every time an edge cache ats was restarted

perhaps some message or some documentation should be added to ensure that whoever uses invalidations realizes that they are designed to be used with origins that properly handle ims requests

 new behavior


 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
545,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 tools

 current behavior
if a cdn has a  in its name the ssl key version will be incorrectly extracted from the riak database which will then insert it into the destination db without error excluding duplicates which is a very common case




 expected behavior
all valid cdnds names should be supported without issue



 steps to reproduce
while using riak create cdn with a  in the name create a corresponding ds with ssl keys run the trafficvaultmigrate tool which will then insert the bad version data into postgres if there are no duplicates
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,Not_TD
546," this bug report affects these traffic control components
 traffic ops

 current behavior
submitting a post request to cachegroups with a null or omitted name causes a runtime memory violation in traffic ops whereupon it will respond to the request with a  internal server error and matching alert this happens because topology validation dereferences the cache groups name before checking if its nil for this reason i suspect its also an issue for put requests though ive not checked

 expected behavior
an improper request should return a  error and an alert that describes what properties are missing from the request when that is the case

 steps to reproduce
topost k cachegroups typeid  replace  with the id of any type that has a useintable value of cachegroup
",Not_TD,Not_TD
547,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops

 current behavior

running go build with dependency  fails


 undefined jwkessentialheader


 expected behavior

getting the traffic ops  client should succeed

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

go
 go mod init mymodule
go creating new gomod module mymodule
 echo package mymoduleimport  var myvariable clientsession  mypackagego
 go mod tidy
go finding module for package 
go found  in githubcomapachetrafficcontrol 
go finding module for package githubcomjmoironsqlx
go finding module for package 
go finding module for package githubcomjsoniteratorgo
go finding module for package golangorgxnetpublicsuffix
go finding module for package githubcomlibpq
go finding module for package githubcomgoozzoozzovalidation
go finding module for package githubcomlestrratgojwxjwk
go finding module for package githubcomgoozzoozzovalidationis
go found githubcomgoozzoozzovalidation in githubcomgoozzoozzovalidation 
go found githubcomgoozzoozzovalidationis in githubcomgoozzoozzovalidation 
go found  in githubcominfluxdatainfluxdb 
go found githubcomjsoniteratorgo in githubcomjsoniteratorgo 
go found githubcomlestrratgojwxjwk in githubcomlestrratgojwx 
go found githubcomlibpq in githubcomlibpq 
go found golangorgxnetpublicsuffix in golangorgxnet 
go found githubcomjmoironsqlx in githubcomjmoironsqlx 
go finding module for package githubcomlestrratgopdebug
go found githubcomlestrratgopdebug in githubcomlestrratgopdebug 
 go build
 githubcomapachetrafficcontrollibgotc
 undefined jwkessentialheader

",Not_TD,TD
548," this bug report affects these traffic control components
 traffic ops

 current behavior
a put request usercurrent is incapable of modifying anything about the current user  except that it does update lastupdated

 expected behavior
you should be able to update your user using a put request to usercurrent as this was possible in previous traffic ops versions

 steps to reproduce
 get usercurrent eg
json

	response 
		username quest
		localuser true
		rolename admin
		 null
		 null
		city null
		company null
		country null
		email emailaddrcom
		fullname test
		gid null
		id 
		newuser false
		phonenumber null
		postalcode null
		publicsshkey null
		role 
		stateorprovince null
		tenant root
		tenantid 
		uid null
		lastupdated  
	


 change anything or even everything if you want and submit it in a put request to usercurrent eg
json

        username queste
        registrationsent  
        rolename admin
         
         
        city city
        company company
        country country
        email addressmailcom
        fullname testquest
        gid 
        id 
        newuser true
        phonenumber phonenumber
        postalcode postalcode
        publicsshkey ssh
        role 
        stateorprovince state
        tenant roote
        tenantid 
        uid 
        lastupdated  
        token token
        localuser false


 notice the response changed nothing eg
json

	alerts 
		
			text user profile was successfully updated
			level success
		
	
	response 
		username quest
		registrationsent null
		rolename admin
		 null
		 null
		city null
		company null
		country null
		email emailaddrcom
		fullname test
		gid null
		id 
		newuser false
		phonenumber null
		postalcode null
		publicsshkey null
		role 
		stateorprovince null
		tenant root
		tenantid 
		uid null
		lastupdated  
	



note that subsequent get requests to usercurrent or users will confirm that nothing changed
",Not_TD,TD
549,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic control health client 

 current behavior

the tc health client uses tms apicachestatuses api for getting cache availability states in order to mark caches updown this is very dangerous because this api returns the tms local cache states rather than the combined cache states of itself and its peers using the optimistic health protocol using this api the tc health client will set caches down when only the single requested tm thinks theyre down however if that singular tm is on a network partition and cant reach those caches because of it it will mark those caches down even though they might be perfectly reachable by its peers and the broader client base

 expected behavior

the tc health client should use tms publishcrstates api for getting cache availability states this api returns the combined cache states of itself and its peers participating in the optimistic health protocol and this api is what traffic router actually uses for routing clients to available caches

in addition to the dangers of using tms local cache states apicachestatuses includes a lot of unnecessary data that the tchealthclient doesnt really need whereas publishcrstates is simply just cache availability we also shouldnt have traffic router and the tchealthclient using different apis for getting cache states from tm

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

disconnect a tm from the cache network or otherwise make it unable to reach one or more caches request apicachestatuses and publishcrstates and compare the results as long as a cache is reachable and otherwise healthy the other peers will consider it available so the caches will be available in publishcrstates but not in apicachestatuses",Not_TD,Not_TD
550,"

 this bug report affects these traffic control components

 traffic router

 current behavior

recently an upgrade to the  dependency introduced a rolling log configuration that was not there previously this functionality needs to be removed and reverted


 expected behavior

 will not perform log rotation
",Not_TD,Not_TD
551,"
 this bug report affects these traffic control components

 traffic router

 current behavior

recently an upgrade to the  dependency introduced a rolling log configuration that was not there previously this functionality needs to be removed and reverted


 expected behavior

 will not perform log rotation


 versions impacted

master

",Not_TD,Not_TD
552,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops
 traffic portal

 current behavior

in traffic portal try registering a new user or resetting the password of an existing user youll notice that the operation fails if you tail the logs youll see something similar to
getting current user querying current user sql scan error on column index  name lastauthenticated unsupported scan storing drivervalue type  into type timetime

 expected behavior

registration password reset should work as expected

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

in traffic portal try registering a new user or resetting the password of an existing user

",Not_TD,Not_TD
553,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic control health client 

 current behavior

the tc health client uses tms apicachestatuses api for getting cache availability states in order to mark caches updown this is very dangerous because this api returns the tms local cache states rather than the combined cache states of itself and its peers using the optimistic health protocol using this api the tc health client will set caches down when only the single requested tm thinks theyre down however if that singular tm is on a network partition and cant reach those caches because of it it will mark those caches down even though they might be perfectly reachable by its peers and the broader client base

 expected behavior

the tc health client should use tms publishcrstates api for getting cache availability states this api returns the combined cache states of itself and its peers participating in the optimistic health protocol and this api is what traffic router actually uses for routing clients to available caches

in addition to the dangers of using tms local cache states apicachestatuses includes a lot of unnecessary data that the tchealthclient doesnt really need whereas publishcrstates is simply just cache availability we also shouldnt have traffic router and the tchealthclient using different apis for getting cache states from tm

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

disconnect a tm from the cache network or otherwise make it unable to reach one or more caches request apicachestatuses and publishcrstates and compare the results as long as a cache is reachable and otherwise healthy the other peers will consider it available so the caches will be available in publishcrstates but not in apicachestatuses",Not_TD,TD
554," this bug report affects these traffic control components
 traffic ops

 current behavior
the api does not require a latitude and longitude when creating a cache group omitting those properties or setting them to null explicitly in the post request to create a cache group does not result in an underlying coordinate being created for the cache group a further put request to change eg the name of the cache group will cause a segmentation fault as traffic ops tries to dereference the null id of the coordinate associated with the cache group during the update process the request then fails even if otherwise wellformed with a  internal server error response

 expected behavior
if coordinates are to be required in requests then omitting them or setting them to null in requests should return a client error code and an appropriate alert if coordinates are not intended to be required then the handler for put requests should not assume they exist and appropriately handle the case that they dont

 steps to reproduce
 topost k cachegroups name test shortname test typeid  replace  with the id of any type that has a useintable value of cachegroup
 toput k  name test shortname test typeid  replace  with the id of the cache group created in step  and replace  with the id of any type that has a useintable value of cachegroup

note that changing anything is unnecessary to encounter the bug

its unclear to me if this is a regression or not
",Not_TD,TD
555,"for certain operations including snapshot generation cache groups must have geomagnetic coordinates latitude  longitude which is enforced in the traffic portal ui but not by the backing traffic ops endpoint

you really ought to have coordinates on a production cdn as they can be very helpful

possible solutions

 enforce that new cache groups must have coordinates
 provide some default coordinates either at cache group creation or at snapshot time",Not_TD,Not_TD
556," this bug report affects these traffic control components
 traffic portal

 current behavior
the aggrid generic table component used traffic portal  uses a binding to an htmlstandard global attribute title this causes browsers to display a tooltip on hover that contains the title this appears above all other content which means that it obscures aggrid tooltip content



 expected behavior
should bind to a nonstandard attribute to avoid this collision

 steps to reproduce
hover on an aggrid cell
",Not_TD,Not_TD
557,"as a sre i want to be able to click a link in traffic portal and see a calendar with a list of upcoming dates for which https enabled delivery services will have their certificates expire  as a secondary goal i would like to have a list or api endpoint that produces a list of expired ssl certificates  as a third goal i would also like the option to download this information in ics format for use in other tools such as gcal or outlook  this would make staying on top of ssl certificate expirations much easier so manual records or  party notifications would no longer be required and prevent expirations from occurring in production

this data is all presently available in trafficvault and could be reconstituted via apiscripting but id prefer to see it inside tp itself ",Not_TD,TD
558,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops
 traffic portal

 current behavior

in traffic portal try registering a new user or resetting the password of an existing user youll notice that the operation fails if you tail the logs youll see something similar to
getting current user querying current user sql scan error on column index  name lastauthenticated unsupported scan storing drivervalue type  into type timetime

 expected behavior

registration password reset should work as expected

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

in traffic portal try registering a new user or resetting the password of an existing user

",Not_TD,TD
559," this bug report affects these traffic control components
 traffic ops
 traffic portal

 current behavior
when a new user is registered traffic portal doesnt indicate that the password for that user must be set  which is actually true because traffic ops doesnt require it either so the form can be submitted without setting a password and that makes the token get dropped from the database leaving the user with no way to authenticate and since users cant be deleted and their emails must be unique thats not fixable without either direct database manipulation to be able to resend registration or some other user setting that users password as admins are allowed to do also their cookie is immediately invalid so that the very next request  and theres no way to obtain a new cookie

 expected behavior
local users must have either a token or a password because they need to be able to log in the problem is that oauth and ldap users cant have a local password or rather ldap users cant and oauth users need not solving this problem will therefore necessitate finding a different way to tell how a user is supposed to authenticate which will involve database and api changes and putting a way to select how the user will authenticate in the user registration form

 steps to reproduce
 register a user
 go to the link in the email
 set the full name as indicated by the form as being required then submit the form
 if you just wait like a minute a newcount logs request will be made that will cause a user not found error to be returned from the api and youll be dropped back on the login page with no way to log in since you dont have a password",Not_TD,Not_TD
560," this improvement request usability performance tech debt etc affects these traffic control components
 traffic monitor

 current behavior
as of  tm will no longer overwrite its monitoringjson snapshot data with corresponding crconfig snapshot data if the monitoringjson contains ip addresses for the tms meaning it now has parity with the crconfig data however it still needs the crconfig in order to filter out delivery services from monitoringjson which arent present in the crconfig that was fixed in  in that the monitoringjson no longer contains delivery services from other cdns to which the tm doesnt belong

 new behavior
once atc  is released with the changes from  we should be able to remove this fallback behavior from tm and possibly its reliance on the crconfig altogether in the next majorminor release that is because monitoringjson snapshots as of to  will contain all the necessary data and will no longer need to rely on the crconfig snapshot
",Not_TD,TD
561,"i found the wrong rpm name at  and 





",Not_TD,Not_TD
562,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic router

 current behavior

the current  config causes tr to rename accesslog to  for example then recreate the accesslog file this can cause data loss problems for log forwarding tools that expect to tail the same log file without having it change out from underneath them

 new behavior

trs  config should use a rollover strategy that doesnt cause the log file to be renamed then recreated i think this can be accomplished with a directwriterolloverstrategy which is documented  however in order to limit the number of rolledover log files on disk we may need to combine that with a custom delete action which is documented 
",Not_TD,Not_TD
563,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops

 current behavior
since  a new column has been added to the sslkeys table this value is not null and is not accounted for in trafficvaultmigrate causing all inserts to fail with  pq null value in column provider of relation sslkey violates notnull constraint



 expected behavior
tvm should not fail when importing into pg



 steps to reproduce
create a ssl key in riak attempt to use trafficvaultmigrate to migrate from riak to pg which will fail with a notnull constraint error
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,TD
564,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops

 current behavior

run to and tp
create a dsr and fulfill it
try deleting the resulting ds
you will notice an ise 

 expected behavior

deleting a ds created from a dsr should not give an ise 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

create a dsr and fulfill it
then try to delete the created ds
you will see an internal server error with the following log lines in errorlog

error  http superfluous responsewriteheader call from githubcomapachetrafficcontroltrafficopstrafficopsgolangroutingmiddlewaregzipresponse 
error    panic err runtime error invalid memory address or nil pointer dereference stacktrace
goroutine  
githubcomapachetrafficcontrollibgoutilstacktrace
         

         
 
         
  
         
  
         
  
         
  
         
  
         
   
         

         
created by nethttptimeouthandlerservehttp
         

goroutine  
  
         
mainmain
         

goroutine  
  
         

",Not_TD,Not_TD
565,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops
 traffic portal

 current behavior

when updating a cache group that belongs to a topology a user should not be able to update the type of that cache group resulting in a bad request  from traffic ops as well as an alert in the response or alert in traffic portal 

however if you update the name field of the cache group as well as the type this will work and result in an ok  with no alert on either to or tp this should not be allowed

 expected behavior

regardless of other fields being updated type should not be updated and the request should return a bad request  with corresponding alert

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

in tpto create a cache group and a server that uses the cache group create a topology with the cache group associated to it finally try updating the cache group type should fail try updating the type as well as the name field should succeed


",Not_TD,Not_TD
566,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic ops

 current behavior

run to and tp
create a dsr and fulfill it
try deleting the resulting ds
you will notice an ise 

 expected behavior

deleting a ds created from a dsr should not give an ise 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

create a dsr and fulfill it
then try to delete the created ds
you will see an internal server error with the following log lines in errorlog


error  http superfluous responsewriteheader call from githubcomapachetrafficcontroltrafficopstrafficopsgolangroutingmiddlewaregzipresponse 
error    panic err runtime error invalid memory address or nil pointer dereference stacktrace
goroutine  
githubcomapachetrafficcontrollibgoutilstacktrace
         

         
 
         
  
         
  
         
  
         
  
         
  
         
   
         

         
created by nethttptimeouthandlerservehttp
         

goroutine  
  
         
mainmain
         

goroutine  
  
         


",Not_TD,Not_TD
567," this bug report affects these traffic control components
 automation ansible

 current behavior

while processing the server list from to into an inventory the topy dsynamic inventory script encounters a keyerror exception


topy list username myuser password mypass url toexamplecom
errorrootipaddress
traceback most recent call last
  file  line  in 
    inventory  ansibleinventory
  file  line  in toinventory
    return selfgenerateinventorylistselftourl
  file  line  in generateinventorylist
    out  server
keyerror ipaddress


i believe this is due to differences in the json returned by the to api is  vs 

 expected behavior

the dynamic inventory script should return valid json without any errors for example 

topy list username myuser password mypass url toexamplecom  jq metahostvars  length



 steps to reproduce

 install the trafficcontrol python client from github as per the instructions 
 run topy with the list argument and a valid user password and url 
  topy list username myuser password mypass url toexamplecom



",Not_TD,TD
568,"asked about the process of using apache traffic control i have built it into rpm files but i dont know how to deploy it to localhost and how to exploit it can anyone who learns first guide me  thank you

",Not_TD,Not_TD
569,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 automation  traffic monitor integration tests github action

 current behavior

the trafic monitor integration tests github action shows
go
traffic monitor error   failed to write crconfig backup file open opttrafficmonitorcrconfigbackup no such file or directory

many times even when the gha passes for example in  the error shows up  times

 expected behavior

we should have that error

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

see the run integration tests step of the tm integration test gha",Not_TD,Not_TD
570,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 automation  traffic monitor integration tests github action

 current behavior

the trafic monitor integration tests github action shows
go
traffic monitor error   failed to write crconfig backup file open opttrafficmonitorcrconfigbackup no such file or directory

many times even when the gha passes for example in  the error shows up  times

 expected behavior

we should have that error

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

see the run integration tests step of the tm integration test gha",Not_TD,Not_TD
571," this feature request affects these traffic control components

 traffic monitor

 description
currently the tchealthclient is using the traffic monitor apicachestatuses endpoint to find and mark down unhealthy parents  this endpoint it turns out is for local tm state and may not reflect the state as reached by consensus of all tms  the healthclient is being switched to use the publishcrstates endpoint instead

however the publishcrstates endpoint lacks the status field that is available in the apicachestatuses endpoint  this field was logged by the healthclient so that it may be understood why the parent was marked down ie the health threshold that triggered the markdown  it would be invaluable to continue this logging if the field could be added to the publishcrstates endpoint or a query parameter that would let the client ask for the field as part of the response  querying both endpoints is not desirable

also a date time field should be added to the publishcrstates endpoint response that shows when the health monitor last polled the cache  this could also be added to the response only when requested with a query parameter

example status information from apicachestatuses

 reported  availablebandwidthinkbps too low   
 reported  available
 reported  querytime too high   

possible new struct layout see libgotccrstatsgo

type isavailable struct  
        isavailable bool  
         bool
         bool   
        status string  new field status and health threshold reason when unavailable
        lasthmpoll timetime  new field last health monitor poll 



",Not_TD,TD
572,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic router

 current behavior

tr defaults to using to api  if it doesnt have any profile parameters specifying which api urls to use

 new behavior

tr should default to using to api  if it doesnt have any profile parameters specifying which api urls to use
",Not_TD,TD
573,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic monitor

 current behavior

tm uses to api  and will fall back to  in case  is unavailable

 new behavior

tm should use to api  once stable and fall back to  in case  is unavailable
",Not_TD,Not_TD
574," this bug report affects these traffic control components
 automation ansible 

 current behavior

the ldapconf file is rendered based on the template and ldap variables when the trafficops role is run the toldapsetup boolean variable is not used to determine if the config file should be rendered or not  it seems that traffic ops golang   and maybe older versions  will read the ldapconf file regardless of if the ldapconf path is defined in cdnconf for perl backwards compatibility 

when running the playbook without defining any of the ldap variables  eg toldaphostname  i end up with a ldapconf file like this


cat opttrafficopsappconfldapconf

   adminpass  
   searchbase  
   admindn  
   host  
   searchquery  
   insecure  



because that file is in the default conf directory traffic ops golang will read it on service start this gives the following error

mar    trafficops loading config parsing ldap conf  json cannot unmarshal number into go struct field configldapinsecure of type bool

im unsure what the array of numbers means in the error message

when i alter the toldapinsecure in infrastructureansiblerolestrafficopsdefaultsmainyml to be a bool instead of a number the error changes to

mar    trafficops loading config ldap conf missing adminpass field

in both situtations the daemon does not start

i think the ldapconf file should not be rendered in all situation by infrastructureansiblerolestrafficopstaskstrafficopsyml and a conditional should be used instead

 expected behavior

the trafficops role when using default ldap config should allow the daemon to start 

 steps to reproduce

dont set any ldap variables so the defaults are used and then run the trafficops playbook 

",Not_TD,TD
575," this bug report affects these traffic control components
 traffic control cache config  formerly ort

 current behavior

when running  apply in badass mode on a new edge system we are seeing errors regarding the creation of directories required for config files  ssl files for example


error   unable to create the directory opttrafficserveretctrafficserverdscp for 
error   unable to create the directory opttrafficserveretctrafficserverssl for 


the transfer of the config files mentioned above was aborted so we ended up with an invalid traffic server config directory  an ssl key file mentioned in sslmulticertconfig that was not on the system 

the directory in both cases above were created correctly and any subsequent config files placed into those folders worked as expected

running the  apply with the same args a second time corrected the issue copied the missing files and gave us a valid trafficserver config directory

looking at the code it appears the domkdirwithowner function will not return true even if the directory creation worked correctly





 expected behavior

traffic server config should be valid after the  apply run has completed

 steps to reproduce

a cache config in traffic ops  that includes ssl certs  being applied to a freshly installed cache server should reproduce this issue on the first runs of  apply     

if you need my config i can work on redecting the secure stuff and can send it over

",Not_TD,TD
576,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     


with the  milestone api  will become unstable and api  will now be stable this should be documented as well as the necessary messages for any api endpoints that are not used by api 


 this improvement request usability performance tech debt etc affects these traffic control components


 documentation


 current behavior

documentation does not include these messages

 new behavior

before the new release occurs these changes should be documented
",Not_TD,TD
577,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components


 traffic ops maybe
 traffic router


 current behavior


currently the watchers in traffic router like letsencryptdnschallengewatcher and federationswatcher have the traffic ops api version hard coded 

 new behavior


this should be updated to be a parameter so a new deployment isnt required to change api versions the new behavior should just use a changeable api version instead of the hardcoded one
",Not_TD,TD
578,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components


 traffic router


 current behavior


currently all of the watchers in traffic router are turned on all the time usually this is preferred but for things like the letsencryptdnschallengewatcher it would be good to have the option to turn it on  off so it isnt watching in a system that doesnt use the lets encrypt functionality

 new behavior


watchers in traffic router can be turned on  off with default to on
",Not_TD,Not_TD
579,"related to  but somewhat of a bigger deal because using one endpoint can cause the other to give back a representation that cant be passed validly back to that same endpoint

 this bug report affects these traffic control components
 traffic ops

 current behavior
the fields email and fullname are not allowed to be blank missing or null in put or post requests to usersid and users respectively but are allowed to be any of those things in put requests to usercurrent so you can put your user in a state where it cant be updated via put usersid without fixing preexisting issues which could cause problems in a situation where there isnt a human around to intervene

also a put request to usercurrent because it incorrectly behaves more like a patch doesnt require other fields  role id username and tenantidtenantid whereas users does thats not as big a deal though because it leaves them unchanged when not specified

 expected behavior
our users api should make sense

 steps to reproduce
edit yourself to have a null fullname then try to update your  using a put request to users",Not_TD,TD
580,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic control cache config  formerly ort


 current behavior

in a mso ds if you have a cachegroup mid that has an offline primary parent org and an online secondary parent org  assumes that no parent exists and hence generates the parent config without anything in it 

 new behavior


 should log an error warning noting that the primary org parent was offline and then should go ahead and try the secondary parent and update the parent config accordingly",Not_TD,TD
581," this bug report affects these traffic control components
 traffic ops

 current behavior
if no server exists with id  then a post request to  results in a  internal server error response

 expected behavior
when a requested uri doesnt exist the response code should be  not found

 steps to reproduce
 topost kp serversiddeliveryservicesreplacefalse  where id doesnt exist",Not_TD,Not_TD
582," this bug report affects these traffic control components
 traffic ops

 current behavior
if no server exists with id  then a post request to  results in a  internal server error response

 expected behavior
when a requested uri doesnt exist the response code should be  not found

 steps to reproduce
 topost kp serversiddeliveryservicesreplacefalse  where id doesnt exist",Not_TD,Not_TD
583,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic router

 current behavior

tr defaults to using to api  if it doesnt have any profile parameters specifying which api urls to use

 new behavior

tr should default to using to api  if it doesnt have any profile parameters specifying which api urls to use
",Not_TD,Not_TD
584," this bug report affects these traffic control components
 traffic control cache config  formerly ort

 current behavior
 calculates the incorrect number for a delivery services maxoriginconnections when generating headerrewrite configs it is only using the number of caches in the same cachegroup as the given server rather than all caches at the same tier of the topology ie in a  topology  edgemid  it should be using the number of all caches in the mid tier

 expected behavior
for dses that use a topology  should calculate a servers maxoriginconnections based upon the number of all caches in the last tier rather than only caches in that servers same cachegroup

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

create a topology with more than one cachegroup in the last tier create a ds with maxoriginconnections   and assign it to that topology queue updates on the dss cdn observe that the generated maxoriginconnections option in the hdrrwlastconfig file for a given cache is calculated based on the number of caches in that cachegroup rather than all cachegroups at that tier
",Not_TD,TD
585,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the traffic control slack 
or traffic control mailing lists 
 before submitting please search github for a similar issue or pr


 im submitting a 


  new feature  enhancement request


 traffic control components affected 

  traffic ops
  traffic portal

 current behavior

currently if the max origin connections field is set in to it is only used to determine connections per server for dss that do not use mids 

 new behavior

if the max origin connections field is set traffic ops should automatically calculate the number of connections per edge or mids for a ds   this should be based on the amount of reported caches

 minimal reproduction of the problem with instructions

if you can illustrate your feature request better with an example please
provide the steps to reproduce and include the applicable tc version
if not feel free to delete this section


 anything else

eg additional context related issues suggestions about how to approach feel
free to delete this section



    licensed to the apache software foundation asf under one
    or more contributor license agreements  see the notice file
    distributed with this work for additional information
    regarding copyright ownership  the asf licenses this file
    to you under the apache license version  the
    license you may not use this file except in compliance
    with the license  you may obtain a copy of the license at

    

    unless required by applicable law or agreed to in writing
    software distributed under the license is distributed on an
    as is basis without warranties or conditions of any
    kind either express or implied  see the license for the
    specific language governing permissions and limitations
    under the license

",Not_TD,Not_TD
586,"
 this improvement request usability performance tech debt etc affects these traffic control components
 traffic control cache config  formerly ort

 current behavior
when  tries to install packages the yum cache might not be updated and sometime fails

example


error processing packages package  is not available to install error executing usrbinyum error no matching packages to list


 new behavior

a yum clean all should be run before attempting to install packages this would force a yum cache refresh and give us a better chance to succeed on package installation 
",Not_TD,Not_TD
587," traffic control cache config  formerly ort

 current behavior

ats  deprecated  configuration in sniyaml
   can flip between enabling  or not

 expected behavior
when  is installed the sniyaml setting should be  truefalse

 steps to reproduce
verify with your client of choice if  is working or not depending on the setting youd like

notes

  without sniyaml  enabled by default
  with sniyaml  disabled by default
  with sniyaml disabled by default and cant enable",Not_TD,TD
588," this bug report affects these traffic control components
 traffic ops

 current behavior
serversdetails requires one of the query string parameters hostname or physlocationid be specified but if neither are the error message says
json

	alerts 
		
			text missing required fields hostname or physlocationid
			level error
		
	



 expected behavior
the error message should name the actual required query string parameter hostname not hostname

 steps to reproduce
 toget kp serversdetailshostnameanything
",Not_TD,Not_TD
589," this bug report affects these traffic control components
 traffic ops

 current behavior
the statuses named offline online reported preprod and admindown are handled specially by different parts of traffic control and different parts of the code even go so far as to assume that offline online and reported exist but in fact there is no guarantee that any of the five exist at any given time

thats because you can rename them and less importantly change their descriptions
http
get  
host 
cookie mojolicious
contentlength 


  ok
contenttype applicationjson
setcookie mojolicious
transferencoding chunked

 response 
	description server is offline not active in any configuration
	id 
	lastupdated  
	name offline


http
put  
cookie mojolicious
contentlength 
contenttype applicationjson

name not offline anymore description an unhelpful or inaccurate description


  ok
contenttype applicationjson
permissionspolicy interestcohort
setcookie mojolicious
contentlength 


	alerts 
		
			text status was updated
			level success
		
	
	response 
		description an unhelpful or inaccurate description
		id 
		lastupdated  
		name not offline anymore
	



and even delete them
http
delete  
host 
cookie mojolicious
contentlength 


  ok
contenttype applicationjson
transferencoding chunked
setcookie mojolicious

 alerts 
	text status was deleted
	level success



 expected behavior
you shouldnt be able to get rid of things that we assume should exist that means either disallowing those operations on certain of those objects or disallowing those operations entirely ive always been hopeful that we could do away with custom statuses eliminating a server field two endpoints hundreds of lines of code two database tables and a lot of confusion and edge cases like this however that behavior is depended upon by many so we cant get rid of it without at least an alternative like the one proposed by  so if nothing else we should ensure that all valid ie only manipulated through the api traffic ops server states contain the statuses that atc requires to function at a minimum that would be reported but to avoid unexpected behavior when creating new statuses with reserved names we should also do the same with the others mentioned above",Not_TD,TD
590," this bug report affects these traffic control components
 traffic ops

 current behavior
usercurrent validates the role field and will reject requests that specify a new role with greater permissions or in old version privlevel than the users current role  but even if that validation passes its not possible to use this endpoint to change role the request will succeed but even in the response to that request the users role remains unchanged

usercurrent get requests also always show gid and uid as null even when they arent curiously it does allow the user to change these fields and the responses to put requests that do so will show the correct values subsequent get requests will show null

 expected behavior
usercurrent shouldnt show the wrong value for fields and if its intended to be able to change a users role using it then that should work if thats not intended then the field should be ignored not validated and removed from the request documentation

 steps to reproduce
put to usercurrent changing your role to anything you have permission to change it to observe that it didnt happen

put to usercurrent changing your uid and gid to anything nonnull observe that both still appear to be null in get responses

it is unknown if this is a regression or if this has just been broken forever since uid and gid have no known use and changing a users own role is rare and generally not very advisable because they can only be taking permissions away from themselves  so its possible this never worked and nobody noticed because nobody needed it to work
",Not_TD,TD
591," this bug report affects these traffic control components
 documentation

 current behavior
the documentation for users is missing property definitions for ucdn in post request bodies and changelogcount lastauthenticated and ucdn in post method responses

the documentation for usersid is missing a property definition for ucdn in get method responses and its missing property definitions for changelogcount and lastauthenticated in put method responses

the documentation for usercurrent includes a property definition in get responses for registrationsent but that property doesnt exist in get responses from that endpoint dont exist the response description for put requests lists no property definition for changelogcount lastauthenticated nor ucdn but all are present in responses the response example for that method also is missing those properties

these endpoints all also incorrectly list ucdn fields as being introduced in the nonexistent   should be 

 expected behavior
the docs should be correct

 steps to reproduce
read the docs
",Not_TD,TD
592,"
generate  ssl in traffic ops

error this site cant provide a secure connection

",Not_TD,Not_TD
593,"
generate  ssl in traffic ops

error this site cant provide a secure connection

",Not_TD,Not_TD
594,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components


 traffic ops


 current behavior

when making a get request  where id belongs to a profile that is not index  in the profilenames array the response will not display that server

for example if there exists a server with the profilenames
json


 profilenames 
                edgetieratscache midtieratscache
            




where the id of the edgetieratscache profile is  and the id of midtieratscache is 

if we perform a get request   we will see the server above returned in the response however
if we perform a get request   the following profile  at index  in the array that server will not be included in the response 


 expected behavior


should account for all profiles including profiles not at index  in the profilenames array

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

have a server with multiple profiles make a get request  where id belongs to the profile not at index  you will not see the server included in the response
",Not_TD,Not_TD
595,"related to  but somewhat of a bigger deal because using one endpoint can cause the other to give back a representation that cant be passed validly back to that same endpoint

 this bug report affects these traffic control components
 traffic ops

 current behavior
the fields email and fullname are not allowed to be blank missing or null in put or post requests to usersid and users respectively but are allowed to be any of those things in put requests to usercurrent so you can put your user in a state where it cant be updated via put usersid without fixing preexisting issues which could cause problems in a situation where there isnt a human around to intervene

also a put request to usercurrent because it incorrectly behaves more like a patch doesnt require other fields  role id username and tenantidtenantid whereas users does thats not as big a deal though because it leaves them unchanged when not specified

 expected behavior
our users api should make sense

 steps to reproduce
edit yourself to have a null fullname then try to update your  using a put request to users",Not_TD,TD
596," this bug report affects these traffic control components
 traffic ops

 current behavior
usercurrent validates the role field and will reject requests that specify a new role with greater permissions or in old version privlevel than the users current role  but even if that validation passes its not possible to use this endpoint to change role the request will succeed but even in the response to that request the users role remains unchanged

usercurrent get requests also always show gid and uid as null even when they arent curiously it does allow the user to change these fields and the responses to put requests that do so will show the correct values subsequent get requests will show null

 expected behavior
usercurrent shouldnt show the wrong value for fields and if its intended to be able to change a users role using it then that should work if thats not intended then the field should be ignored not validated and removed from the request documentation

 steps to reproduce
put to usercurrent changing your role to anything you have permission to change it to observe that it didnt happen

put to usercurrent changing your uid and gid to anything nonnull observe that both still appear to be null in get responses

it is unknown if this is a regression or if this has just been broken forever since uid and gid have no known use and changing a users own role is rare and generally not very advisable because they can only be taking permissions away from themselves  so its possible this never worked and nobody noticed because nobody needed it to work
",Not_TD,TD
597," this bug report affects these traffic control components
 documentation

 current behavior
the documentation for users is missing property definitions for ucdn in post request bodies and changelogcount lastauthenticated and ucdn in post method responses

the documentation for usersid is missing a property definition for ucdn in get method responses and its missing property definitions for changelogcount and lastauthenticated in put method responses

the documentation for usercurrent includes a property definition in get responses for registrationsent but that property doesnt exist in get responses from that endpoint dont exist the response description for put requests lists no property definition for changelogcount lastauthenticated nor ucdn but all are present in responses the response example for that method also is missing those properties

these endpoints all also incorrectly list ucdn fields as being introduced in the nonexistent   should be 

 expected behavior
the docs should be correct

 steps to reproduce
read the docs
",Not_TD,TD
598," this improvement request usability performance tech debt etc affects these traffic control components
 traffic ops
 documentation

 current behavior
the representations of users are different depending on the api endpoint used to view them eg usercurrent uses the field rolename to hold the name of the users role while users shows the same information in the rolename property

the current model for users api   makes some structural changes in some contexts is such that requests and responses have different shapes depending on the request method  and some fields are even renamed between requests and responses

a typescript model of users in 

typescript
export interface postrequestuser 
	 string  null
	 string  null
	city string  null
	company string  null
	confirmlocalpasswd string
	country string  null
	email string
	fullname string
	gid number  null
	id never
	lastupdated never
	localpasswd string
	newuser boolean  null
	phonenumber string  null
	postalcode string  null
	publicsshkey string  null
	registrationsent never
	role number
	rolename never
	rolename never
	stateorprovince string  null
	tenant never
	tenantid never
	tenantid number
	uid number  null
	username string


interface putrequestnotchangingpassworduser 
	 string  null
	 string  null
	city string  null
	company string  null
	confirmlocalpasswd never
	country string  null
	email string
	fullname string
	gid number  null
	id never
	lastupdated never
	localpasswd never
	newuser boolean  null
	phonenumber string  null
	postalcode string  null
	publicsshkey string  null
	registrationsent never
	role number
	rolename never
	rolename never
	stateorprovince string  null
	tenant never
	tenantid never
	tenantid number
	uid number  null
	username string


export type putrequestuser  postrequestuser  putrequestnotchangingpassworduser

interface responseuser 
	 string  null
	 string  null
	city string  null
	company string  null
	country string  null
	email string
	fullname string
	gid number  null
	id number
	lastupdated date
	newuser boolean  null
	phonenumber string  null
	postalcode string  null
	publicsshkey string  null
	registrationsent null  date
	role number
	stateorprovince null
	tenant string
	tenantid never
	tenantid number
	uid number  null
	username string


export interface putorpostresponseuser extends responseuser 
	
	  this appears only in response to post requests or to put requests where
	  the users password was changed
	 
	confirmlocalpasswd string
	rolename never
	rolename string


export interface getresponseuser extends responseuser 
	confirmlocalpasswd never
	rolename string
	rolename never


export type user  putrequestuser  postrequestuser  putorpostresponseuser  getresponseuser

export interface responsecurrentuser 
	 string  null
	 string  null
	city string  null
	company string  null
	country string  null
	email string
	fullname string
	gid number  null
	id number
	lastupdated date
	localuser boolean
	newuser boolean
	phonenumber string  null
	postalcode string  null
	publicsshkey string  null
	role number
	rolename string
	stateorprovince string  null
	tenant string
	tenantid number
	uid number  null
	username string


export interface requestcurrentuser 
	 never
	 never
	city never
	company never
	country never
	email never
	fullname never
	gid never
	id never
	lastupdated never
	localuser never
	newuser never
	phonenumber never
	postalcode never
	publicsshkey never
	role never
	rolename never
	stateorprovince never
	tenant never
	tenantid never
	uid never
	username never


export type currentuser  responsecurrentuser  requestcurrentuser





 requests use tenantid responses have tenantid
 responses from post requests and put requests where the password was changed include confirmlocalpasswd but get representations never do
 post and put responses dont include registrationsent but get requests always do
 users never shows localuser but usercurrent always does
 post and put requests allow newuser to be null but thats actually not allowed in the database and get requests will always show an actual boolean value plus if newuser was null in a post or put to users it will be null in the response but if it was null in a put to usercurrent the response will properly show false like a subsequent get
 put to usercurrent doesnt require any fields not even those required by post and put requests to users making it nonidempotent in violation of the http spec
 put to usercurrent literally doesnt work at all see  

and then of course we have the pervasive issue where things are allowed to be missing from the request as a synonym for null but thats more an issue just because in tsjs undefined and null are different but go makes no such distinction without jumping through some encodingjsonrawmessage hoops

 new behavior
users should be represented consistently in a single way throughout the api
",Not_TD,TD
599," this bug report affects these traffic control components
 traffic ops

 current behavior
get apiversiondeliveryservicesidhealth returns no info if the delivery service uses a topology

json
 response 
  totaloffline 
  totalonline 
  cachegroups 



 expected behavior
when a delivery service uses a topology it still should have a total for all online and offline caches as well as totals for each cache group employed by the topology such as this

json
 response 
  totaloffline 
  totalonline 
  cachegroups 
    
      offline 
      online 
      name usflsarasota
    
    
      offline 
      online 
      name usilchicago
    
  



 steps to reproduce
 assign servers directly to a delivery service
 get apiversiondeliveryservicesidhealth and observe the onlineoffline counts total and per cache group
 assign a topology to the delivery service
 get apiversiondeliveryservicesidhealth and observe no onlineoffline counts total and per cache group

",Not_TD,TD
600,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components


 traffic ops

 current behavior


this is a very specific scenario currently it works as such

there must exist an active mso delivery service with an origin server assigned must have the status online or reported
if you update the status of the origin to admindown this should result in a  making sure all the other fields are the exact same

http
  conflict
contenttype applicationjson
transferencoding chunked

    alerts 
        
            text setting server status to admindown would leave active delivery service  with no online or reported org servers
            level error
        
    



however if you change the profilenames replacing the previous profile to another you will get the same result but that server will no longer exist in any get requests however the server is still in the db

this only happens if you remove the previous profilename adding additional profiles will not create this issue 

the only get request that still shows that the previous servers exist is 

 expected behavior


server should be appearing in any and all valid get requests

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


there must exist an active mso delivery service with an origin server assigned must have the status online or reported
if you update the status of the origin to admindown this should result in a  making sure all the other fields are the exact same update the profilenames to something other than the current profile",Not_TD,Not_TD
601,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic control cache config  formerly ort
 traffic ops
 traffic portal

 current behavior

currently we can set a max origin value on a per ds basis this then gets spread across the last tier of all caches assigned to a delivery service however this currently does not work in instances where we are using topologies but have a localized origin ie say you have multiple services each covering a different region of the us but are using a topology that is just allonetier so that you can have failover this calculation for max origin will then include every server on that topology instead of just ones localized to a cache group for that region drastically reducing the max origin count

 new behavior

i suggest adding some sort of toggle on a ds with the max origins to indicate that the origin server is localized for one specific area then we would also need  changes to understand that toggle and know to calculate the max origin based on cache group instead of topology wide
",Not_TD,TD
602," this bug report affects these traffic control components
none

 current behavior
if a binary already exists at trafficopsappdbadmin the traffic ops service of the developer environment will fail to start

logs


attaching to 
         no response
       waiting for db on 
         accepting connections
       make trafficopsappdbadmin is up to date
       error relocating rootgosrcgithubcomapachetrafficcontroltrafficopsappdbadmin vfprintfchk symbol not found
       error relocating rootgosrcgithubcomapachetrafficcontroltrafficopsappdbadmin fprintfchk symbol not found
       error on line  of rootgosrcgithubcomapachetrafficcontroldevtrafficopsrunsh




 expected behavior
the success of the developer environment should not depend on the build state of the project

 steps to reproduce
 source devatcdevsh  atc stop  atc start trafficops  dockercompose logs f trafficops
",Not_TD,TD
603,"

 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     


 this bug report affects these traffic control components

 traffic ops  tests

 current behavior

githubcomapachetrafficcontroltrafficopstrafficopsgolangdeliveryservicetestaddhealth usually passes but sometimes fails
go
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail


 expected behavior

all unit tests should always pass

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

shell
cd trafficopstrafficopsgolangdeliveryservice
go test c

for i   i   i do
  deliveryservicetest   failures 
done
echo failed failures times out of i


example output click to expandsummary

go
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
pass
 fail testaddhealth 
 expected  to have  online and  offline caches but got  online and  offline instead
fail
pass
pass
pass
pass
pass
pass
pass
pass

",Not_TD,Not_TD
604,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this improvement request usability performance tech debt etc affects these traffic control components

 traffic control cache config  formerly ort

 current behavior

right now  will only enforce config file ownergroup settings when the file is written because of a change if for some reason the ownergroup is changed it will not be set back until the file contents change and is updated 

 new behavior

 diff will flag the file for replacement if not owned by ats or not a member of the ats group 
",Not_TD,Not_TD
605," this bug report affects these traffic control components
 delivery service
 traffic router
 cache server
 current behavior
we have a large cache with about  servers and delivery services to deliver content using the https protocol and http content routing however when a large amount of traffic is poured in we have noticed that the traffic between the cache servers chosen by the traffic router as a content delivery target is not evenly distributed only about  cache servers receive a lot of traffic the rest are very little this degrades the performance of our cdn cluster and causes overload for the hightraffic servers and idles for the rest of the cache servers we tried configuring with a maximum initial dispersion of  but this only addresses the balance between  servers can someone tell me what we need to do to balance the traffic between  servers like a simple roundrobin that many other technologies use is this a bug or just a misunderstanding of the content delivery mechanism of traffic control thank you looking forward to your help
 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,TD
606,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic control health client 

 current behavior

when the tchealthclients config file contains a to credentials file name tocredentialfile which contains a topassword that includes an equals sign  the tchealthclient does not parse the entire password to use it splits on the  and only uses the  part of the password

 expected behavior

the tchealthclient should be able to handle credentials files with passwords containing 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

have a password containing  for tchealthclient to use in its tocredentialfile observe that it gets  when attempting to log in to traffic ops
",Not_TD,TD
607,"some situations require that traffic ops db not be modified for a period of time  eg when upgrading to a newer version  inprocess items should be finished up  but no new actions started

create a maintenance mode that can be set by an admin   this should be shown somehow on the ui and any modification actions disallowed until changed back to the normal mode",Not_TD,Not_TD
608,"
 stop 
if this issue identifies a security vulnerability do not submit it instead contact
the apache traffic control security team at securitytrafficcontrolapacheorg and follow the
guidelines at  regarding vulnerability disclosure

 for support questions use the trafficcontrol channel on the asf slack 
or the traffic control users mailing list send an email to userssubscribetrafficcontrolapacheorg to subscribe
 before submitting please search github for a similar issue or pr
     
     



 this bug report affects these traffic control components

 traffic control health client 

 current behavior

when the tchealthclients config file contains a to credentials file name tocredentialfile which contains a topassword that includes an equals sign  the tchealthclient does not parse the entire password to use it splits on the  and only uses the  part of the password

 expected behavior

the tchealthclient should be able to handle credentials files with passwords containing 

 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version

have a password containing  for tchealthclient to use in its tocredentialfile observe that it gets  when attempting to log in to traffic ops
",Not_TD,Not_TD
609," this bug report affects these traffic control components
 traffic ops

 current behavior
when deleting a server the response will be an  representation of the server regardless of the version of the api used in the request this is a breaking change to that api endpoint in violation of our versioning contract

 expected behavior
the requested api version should be used to determine the response

 steps to reproduce
bash
 replace the typeid cdnid statusid physlocationid and cachegroupid
 with whatever values are valid for your traffic ops installation
idtopost ka  servers 
	interfaces 
		
			name 
			ipaddresses 
				
					address 
					serviceaddress true
				
			
		
	
	typeid 
	statusid 
	cachegroupid 
	profileid 
	cdnid 
	physlocationid 
	domainname test
	hostname quest
  jq responseid
todelete kpa  serversid

",Not_TD,TD
610," this bug report affects these traffic control components
 traffic ops

 current behavior
a post request to apiversioncachegroupsidqueueupdate will fail for any valid version and id with a request body that passes action dequeue along with a valid identifier for any existing cdn with the error code being  internal server error

example

http
post  
useragent 
acceptencoding gzip deflate
accept 
connection keepalive
cookie mojolicious
contentlength 
contenttype applicationjson

action dequeue cdnid 

  internal server error
accesscontrolallowcredentials true
accesscontrolallowheaders 
accesscontrolallowmethods 
accesscontrolalloworigin 
contentencoding gzip
contenttype applicationjson
permissionspolicy interestcohort
setcookie mojolicious
vary acceptencoding
 
xservername trafficopsgolang
date fri  jun   gmt
contentlength 


	alerts 
		
			text internal server error
			level error
		
	





verified in api versions    and  the type associated with the cache group does not appear to matter nor does the number andor types of cache servers it contains  or lack thereof

error from the to logs

error    queueing updates querying queue updates pq column serverid does not exist


 expected behavior
this endpoint used to work it should still work

 steps to reproduce
 for any given valid cdn id id and api version
	topost fkpa api version cachegroupsidqueueupdate action dequeue cdnid cdn id

 workaround
currently individual servers may still be cleared of updates  note however that this must be done oneatatime if using the traffic portal servers table view it cannot be parallelized as  does not support bulk table row operations as there is no limit to the number of servers that may be in a cache group and the api requires dequeuing a single server at a time parallelizing this task via some scripting language could result in much greater network request load andor a far longer operational time than if the cachegroupsidqueueupdate endpoint could be used  although said impact has not been measured",Not_TD,TD
611,"

 this bug report affects these traffic control components
 traffic router


 current behavior





 expected behavior
i have created delivery service with xml id as test domain cdn as com routing name as cdn  i have assigned ds with tolopogy  but i dont know how to client request using dns to route in router traffic  i request through gateway udp and tcp  of dns it says read time out error and i request with url delivery service but no response 


 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,TD
612,"
 this bug report affects these traffic control components
 traffic router


 current behavior






 expected behavior
i have created delivery service example ds url cdntestcom  i have assigned ds with tolopogy  but i dont know how to client request using dns to route in router traffic  i request through gateway udp and tcp  of dns it says read time out error and i request with url delivery service but no response 


 steps to reproduce
 if the current behavior is a bug please provide the steps to reproduce and
include the applicable tc version


",Not_TD,TD
613," this bug report affects these traffic control components
 traffic ops

 current behavior
sending an invalid request body in a post request to profileparameters in all api versions yields a  internal server error response

 expected behavior
invalid requests should yield  bad request responses with at least one errorlevel alert describing why the input was invalid

 steps to reproduce
 topost k profileparameters no request body is necessary to reproduce but also syntactically invalid bodies eg   will cause it and so will any valid json that isnt an object or array eg string null

",Not_TD,Not_TD
614," this bug report affects these traffic control components
 traffic ops

 current behavior
sending an invalid request body in a post request to profileparameters in all api versions yields a  internal server error response

 expected behavior
invalid requests should yield  bad request responses with at least one errorlevel alert describing why the input was invalid

 steps to reproduce
 topost k profileparameters no request body is necessary to reproduce but also syntactically invalid bodies eg   will cause it and so will any valid json that isnt an object or array eg string null

",Not_TD,Not_TD
615," this bug report affects these traffic control components

 current behavior
 doesnt include a description of the id property which can nevertheless be seen in the response example

 expected behavior
documentation should be accurate

 steps to reproduce
 read the docs
",Not_TD,Not_TD
